!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{ErGM:function(e,i,n){"use strict";n.r(i),n.d(i,"DashboardModule",function(){return Dt});var o=n("v0EB"),r=n("FPA4"),s=n("kYN2"),c=n("fXoL"),l=n("tyNb"),g=n("ofXK"),u=n("0Lug"),d=n("LUsR"),h=n("iiAa"),p=n("rkV7"),f=n("tk/3"),m=n("XiUz"),b=n("znSr"),y=n("1jcm"),v=n("Vs90"),D=n("cclQ"),S=n("xJfa"),x=n("c03H"),C=n("WlQZ"),O=n("mrSG"),L=n("v8aL"),M=n("8sDm"),_=n("hM+/"),F=n("Lzas"),P=n("oN2F"),k=n("kWzP"),A=n("UpBs"),w=function(t){function e(){var e=t.call(this)||this;return e.smallSlices=new M.a,e.bigSlices=new M.a,e.groupName="Other",e.groupProperties={},e.syncLegend=!1,e._threshold=5,e._clickDisposers=[],e._clickBehavior="none",e._ignoreDataUpdate=!1,e._closed=!0,e}return Object(O.c)(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.processSeries()},e.prototype.processSeries=function(){var t=this,e=this.target,a=e.chart,i=e.data&&e.data.length?e:a;this._dataProvider=i,this._disposers.push(i.events.on(!A.a.queue&&!A.a.onlyShowOnViewport||a.inited?"datavalidated":"inited",function(a){if(t._ignoreDataUpdate)t._ignoreDataUpdate=!1;else{t.groupSlice=void 0,t.smallSlices.clear(),t.bigSlices.clear();var n,o=0;if(e.dataItems.each(function(e,a){e.dataContext.sliceGrouperOther?n=e.dataContext:t.limit&&a>=t.limit||!t.limit&&e.values.value.percent<=t.threshold?(o+=e.value,e.hiddenInLegend=!0,e.hide(),e.hidden=!0,e.label.events.on("transitionended",function(a){t._closed&&e.hide()}),t.smallSlices.push(e.slice)):t.bigSlices.push(e.slice)}),o>0)if(n)n[e.dataFields.value]=o,t._ignoreDataUpdate=!0,i.validateRawData();else{var r={sliceGrouperOther:!0};r[e.dataFields.category]=t.groupName,r[e.dataFields.value]=o,t._ignoreDataUpdate=!0,i.addData(r)}}})),this._disposers.push(e.events.on("validated",function(a){e.slices.each(function(e){e.dataItem.dataContext.sliceGrouperOther&&(t.groupSlice||(t.groupSlice=e,t.initSlices()))})}))},e.prototype.initSlices=function(){var t=this;this.groupSlice&&(P.d(this.groupProperties,function(e,a){t.groupSlice[e]=a}),"none"!=this.clickBehavior&&(this.groupSlice.events.has("hit",this.toggleGroupOn,this)||this._clickDisposers.push(this.groupSlice.events.on("hit",this.toggleGroupOn,this))))},e.prototype.toggleGroupOn=function(){var t=this;"none"!=this.clickBehavior&&(this._closed=!1,this.groupSlice.dataItem.hide(),this.syncLegend&&(this.groupSlice.dataItem.hiddenInLegend=!0),this._clickDisposers.push(this.groupSlice.events.once("shown",function(e){t.toggleGroupOff()})),this.smallSlices.each(function(e){e.dataItem.hidden=!1,e.dataItem.show(),t.syncLegend&&(e.dataItem.hiddenInLegend=!1)}),"zoom"==this.clickBehavior&&this.bigSlices.each(function(e){e.dataItem.hide(),t.syncLegend&&(e.dataItem.hiddenInLegend=!0)}),this.syncLegend&&this.target.baseSprite.feedLegend(),this.zoomOutButton.show())},e.prototype.toggleGroupOff=function(){var t=this;"none"!=this.clickBehavior&&(this._closed=!0,this.groupSlice.events.disableType("shown"),this.groupSlice.dataItem.show(),this.groupSlice.events.enableType("shown"),this.syncLegend&&(this.groupSlice.dataItem.hiddenInLegend=!1),"zoom"==this.clickBehavior&&this.bigSlices.each(function(e){e.dataItem.hidden=!1,e.dataItem.show(),t.syncLegend&&(e.dataItem.hiddenInLegend=!1)}),this.smallSlices.each(function(e){e.dataItem.hide(),t.syncLegend&&(e.dataItem.hiddenInLegend=!0)}),this.syncLegend&&this.target.baseSprite.feedLegend(),this.zoomOutButton.hide())},Object.defineProperty(e.prototype,"threshold",{get:function(){return this._threshold},set:function(t){this._threshold!=t&&(this._threshold=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"limit",{get:function(){return this._limit},set:function(t){this._limit!=t&&(this._limit=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomOutButton",{get:function(){var t=this;if(!this._zoomOutButton){var e=this.target.baseSprite.tooltipContainer.createChild(F.a);e.shouldClone=!1,e.align="right",e.valign="top",e.zIndex=Number.MAX_SAFE_INTEGER,e.marginTop=5,e.marginRight=5,e.hide(0),this.zoomOutButton=e,this._disposers.push(this._zoomOutButton),e.events.on("hit",function(){t.toggleGroupOff()},this)}return this._zoomOutButton},set:function(t){this._zoomOutButton=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickBehavior",{get:function(){return this._clickBehavior},set:function(t){this._clickBehavior!=t&&(this._clickBehavior=t,this.initSlices())},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(this.disposeClickEvents(),this.groupSlice=void 0,this.smallSlices.clear(),this.bigSlices.clear(),this._dataProvider&&k.e(this._dataProvider.data))for(var e=0;e<this._dataProvider.data.length;e++)if(this._dataProvider.data[e].sliceGrouperOther){this._dataProvider.data.splice(e,1),this._dataProvider.invalidateData();break}t.prototype.dispose.call(this)},e.prototype.disposeClickEvents=function(){var t=this._clickDisposers;for(this._clickDisposers=null;0!==t.length;)t.shift().dispose()},e}(L.a);_.b.registeredClasses.SliceGrouper=w;var I,W=n("Dhln"),E=function(){return["chart"]},N=((I=function(){function e(a,i,n,o,r){var s=this;t(this,e),this.categoryPipe=a,this.as=i,this.zone=n,this.bhvSub=o,this.utility=r,this.chartReg={},this.categoryCount={High:0,Medium:0,Low:0,CamOff:0},this.subscription=this.bhvSub.engOrMood$.subscribe(function(t){s.engOrMood=t})}return a(e,[{key:"createChart",value:function(){D.k(x.a),D.k(C.a),D.h.commercialLicense=!0,this.chart=D.e(this.inpIn,S.f),this.chart.radius=D.i(40),this.chart.data=[{category:"HIGH",categoryValue:"".concat(this.engOrMood?this.pieChartData.hi_percentage[2].uuid.length:this.pieChartData.hi_percentage[1].uuid.length," ").concat(this.engOrMood?1===this.pieChartData.hi_percentage[2].uuid.length?"Student":"Students":1===this.pieChartData.hi_percentage[1].uuid.length?"Student":"Students"),value:this.engOrMood?this.pieChartData.hi_percentage[3]:this.pieChartData.hi_percentage[0],color:D.d("#1FA000")},{category:"MID",categoryValue:"".concat(this.engOrMood?this.pieChartData.med_percentage[2].uuid.length:this.pieChartData.med_percentage[1].uuid.length," ").concat(this.engOrMood?1===this.pieChartData.med_percentage[2].uuid.length?"Student":"Students":1===this.pieChartData.med_percentage[1].uuid.length?"Student":"Students"),value:this.engOrMood?this.pieChartData.med_percentage[3]:this.pieChartData.med_percentage[0],color:D.d("#D5AD2A")},{category:"LOW",categoryValue:"".concat(this.engOrMood?this.pieChartData.low_percentage[2].uuid.length:this.pieChartData.low_percentage[1].uuid.length," ").concat(this.engOrMood?1===this.pieChartData.low_percentage[2].uuid.length?"Student":"Students":1===this.pieChartData.low_percentage[1].uuid.length?"Student":"Students"),value:this.engOrMood?this.pieChartData.low_percentage[3]:this.pieChartData.low_percentage[0],color:D.d("#BA0E15")}];var t=this.chart.series.push(new S.g);t.dataFields.value="value",t.dataFields.category="category",t.slices.template.propertyFields.fill="color",t.slices.template.strokeOpacity=1,t.hiddenState.properties.opacity=1,t.hiddenState.properties.endAngle=-90,t.hiddenState.properties.startAngle=-90,t.labels.template.maxWidth=130,t.labels.template.wrap=!0,t.slices.template.tooltipText='{category} : {value.formatNumber(".##")}%',t.labels.template.adapter.add("text",function(t,e,a){e.html=e.dataItem&&"CAM OFF"===e.dataItem.category?'<div style="text-align: center;"><span style="color: #888787">{category}</span><br>{value.formatNumber(".##")}%<br>{categoryValue}</div>':'<div style="text-align: center;"><span style="color: {color}">{category}</span><br>{value.formatNumber(".##")}%<br>{categoryValue}</div>'}),t.alignLabels=!0,t.labels.template.radius=D.i(10),t.ticks.template.disabled=!1,t.ticks.template.stroke=D.d("white"),t.ticks.template.strokeWidth=1,t.ticks.template.strokeOpacity=1,t.ticks.template.length=2;var e=t.plugins.push(new w);e.threshold=0,e.groupName="Other",e.clickBehavior="none",this.chart.hiddenState.properties.radius=D.i(0)}},{key:"ngOnInit",value:function(){var t=this;this.pieChartData.UAE=this.pieChartData.UAE.map(function(e){return e.category=t.utility.setCategory(e.average),e.moodCategory=t.utility.setCategory(e.average_mood),e});var e=[];this.pieChartData.UAE.map(function(t){e.push(t.category)});var a=e.reduce(function(t,e){return e in t?t[e]++:t[e]=1,t},{});this.categoryCount.High=a.High,this.categoryCount.Medium=a.Medium,this.categoryCount.Low=a.Low,this.bhvSub.engOrMood$.subscribe(function(e){t.engOrMood=e,t.chart?(t.chart.dispose(),setTimeout(function(){t.createChart()},1e3)):t.createChart()})}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout(function(){t.chart?(t.chart.dispose(),setTimeout(function(){t.createChart()},1e3)):t.createChart()},100)}},{key:"ngOnDestroy",value:function(){var t=this;this.subscription.unsubscribe();try{this.zone.runOutsideAngular(function(){t.chart&&(t.chart.dispose(),delete t.chart)})}catch(e){console.log(e)}}}]),e}()).\u0275fac=function(t){return new(t||I)(c.Rb(W.a),c.Rb(o.a),c.Rb(c.B),c.Rb(d.a),c.Rb(h.a))},I.\u0275cmp=c.Lb({type:I,selectors:[["app-pie-chart"]],inputs:{inpIn:"inpIn",pieChartData:"pieChartData"},decls:1,vars:3,consts:[[3,"id","ngClass"]],template:function(t,e){1&t&&c.Sb(0,"div",0),2&t&&c.qc("id",e.inpIn)("ngClass",c.tc(2,E))},directives:[g.l,b.a],styles:[".chart[_ngcontent-%COMP%]{height:100%;width:100%}.AxisLabelCircular[_ngcontent-%COMP%]{background:red!important}"]}),I),X=n("NFeN"),q=n("Wp6s"),G=n("bTqV"),R=n("kmnG"),T=n("Xa2L");function z(t,e){if(1&t&&(c.Xb(0,"div",15),c.Pc(1),c.Wb()),2&t){var a=c.jc(2);c.Fb(1),c.Sc(" ",0===a.engOrMood?"Engagement":"Mood"," Percentage per ",a.headingDuration," minutes ")}}function j(t,e){1&t&&c.Sb(0,"span",17)}var U=function(t){return{visibility:t}},B=function(){return["upIcon"]};function H(t,e){if(1&t&&(c.Xb(0,"mat-icon",22),c.Pc(1,"arrow_drop_up"),c.Wb()),2&t){var a=c.jc().index,i=c.jc(2);c.qc("ngStyle",c.uc(2,U,i.selection===a?"visible":"hidden"))("ngClass",c.tc(4,B))}}function V(t,e){if(1&t){var a=c.Yb();c.Xb(0,"div",16),c.Xb(1,"span",17),c.Pc(2),c.Wb(),c.Xb(3,"app-pie-chart",18),c.fc("click",function(){c.Fc(a);var t=e.index,i=c.jc(2);return i.selection=t,i.cdRef.detectChanges(),i.studentListPanel(!0),i.segmentWiseScore(i.selection)}),c.Wb(),c.Nc(4,j,1,0,"span",19),c.Xb(5,"div",20),c.Nc(6,H,2,5,"mat-icon",21),c.Wb(),c.Wb()}if(2&t){var i=e.$implicit,n=e.index,o=c.jc(2);c.Fb(2),c.Qc(i.duration),c.Fb(1),c.qc("inpIn","container"+n)("pieChartData",o.pieChartData[n]),c.Fb(1),c.qc("ngIf",!o.dispStdList&&!o.dispCatSpecificData),c.Fb(2),c.qc("ngIf",o.dispStdList)}}var $=function(){return[]},K=function(t){return[t]},Y=function(t){return{student_id:t}},J=function(){return{}};function Q(t,e){if(1&t){var a=c.Yb();c.Xb(0,"div",33),c.fc("click",function(){return c.Fc(a),c.jc(5).cdRef.detectChanges()}),c.Xb(1,"mat-icon"),c.Pc(2,"account_circle"),c.Wb(),c.Xb(3,"div",34),c.Xb(4,"span",35),c.Pc(5),c.kc(6,"titlecase"),c.Wb(),c.Wb(),c.Xb(7,"span",36),c.Xb(8,"mat-icon",37),c.Pc(9,"fiber_manual_record"),c.Wb(),c.Wb(),c.Xb(10,"span",38),c.Pc(11),c.Wb(),c.Wb()}if(2&t){var i=c.jc().$implicit,n=c.jc().$implicit,o=c.jc(3);c.qc("ngClass",o.linkEnabled?"isLink":"")("routerLink",c.uc(10,K,o.linkEnabled?"../student-detail":c.tc(9,$)))("queryParams",o.linkEnabled?c.uc(12,Y,i.uuid):c.tc(14,J))("queryParamsHandling","merge"),c.Fb(5),c.Qc(c.lc(6,7,i.name)),c.Fb(3),c.qc("ngClass",n.className),c.Fb(3),c.Qc(o.engOrMood?i.average_mood:i.average)}}function Z(t,e){if(1&t&&(c.Vb(0),c.Nc(1,Q,12,15,"div",32),c.Ub()),2&t){var a=e.$implicit,i=c.jc().index,n=c.jc(3);c.Fb(1),c.qc("ngIf",(n.engOrMood?"High"===a.moodCategory:"High"===a.category)&&0===i||(n.engOrMood?"Medium"===a.moodCategory:"Medium"===a.category)&&1===i||(n.engOrMood?"Low"===a.moodCategory:"Low"===a.category)&&2===i)}}var tt=function(t){return{color:t}},et=function(){return["student-card"]};function at(t,e){if(1&t){var a=c.Yb();c.Xb(0,"div",27),c.Xb(1,"h3",28),c.fc("click",function(){c.Fc(a);var t=e.$implicit;return c.jc(3).individualSegmentScores(t)}),c.Pc(2),c.Wb(),c.Xb(3,"p",29),c.Pc(4),c.Wb(),c.Xb(5,"div",30),c.Nc(6,Z,2,1,"ng-container",31),c.Wb(),c.Wb()}if(2&t){var i=e.$implicit,n=e.index,o=c.jc(3);c.Fb(1),c.qc("ngStyle",c.uc(8,tt,i.color)),c.Fb(1),c.Sc("",i.name," ",0===o.engOrMood?i.eng:i.mood,""),c.Fb(2),c.Tc("",o.engOrMood?o.moodsegUsersArr[n]:o.segUsersArr[n]," ",1===o.segUsersArr[n]?"Participant":"Participants"," (",o.engOrMood?o.moodpercentArr[n]:o.percentArr[n],"%)"),c.Fb(1),c.qc("ngClass",c.tc(10,et)),c.Fb(1),c.qc("ngForOf",o.pieChartData[o.selection].UAE)}}function it(t,e){if(1&t){var a=c.Yb();c.Xb(0,"mat-card",23),c.Xb(1,"div",24),c.Xb(2,"button",25),c.fc("click",function(){return c.Fc(a),c.jc(2).dispStdList=!1}),c.Xb(3,"mat-icon"),c.Pc(4,"close"),c.Wb(),c.Wb(),c.Wb(),c.Nc(5,at,7,11,"div",26),c.Wb()}if(2&t){var i=c.jc(2);c.Fb(5),c.qc("ngForOf",i.segments)}}function nt(t,e){if(1&t){var a=c.Yb();c.Xb(0,"div",33),c.fc("click",function(){return c.Fc(a),c.jc(4).cdRef.detectChanges()}),c.Xb(1,"mat-icon"),c.Pc(2,"account_circle"),c.Wb(),c.Xb(3,"div",48),c.Xb(4,"span",49),c.Pc(5),c.kc(6,"titlecase"),c.Wb(),c.Wb(),c.Xb(7,"span",50),c.Xb(8,"mat-icon",37),c.Pc(9," fiber_manual_record"),c.Wb(),c.Wb(),c.Xb(10,"span",51),c.Pc(11),c.Wb(),c.Wb()}if(2&t){var i=e.$implicit,n=c.jc(4);c.qc("ngClass",n.linkEnabled?"isLink":"")("routerLink",c.uc(10,K,n.linkEnabled?"../student-detail":c.tc(9,$)))("queryParams",n.linkEnabled?c.uc(12,Y,i.uuid):c.tc(14,J))("queryParamsHandling","merge"),c.Fb(5),c.Qc(c.lc(6,7,i.name)),c.Fb(3),c.qc("ngClass",n.segSpecificData.iconClassName),c.Fb(3),c.Rc("",n.engOrMood?i.average_mood:i.average," ")}}function ot(t,e){if(1&t&&(c.Xb(0,"div",43),c.Xb(1,"mat-icon",44),c.Pc(2,"arrow_drop_up"),c.Wb(),c.Xb(3,"mat-card",45),c.Xb(4,"h3",46),c.Pc(5),c.Wb(),c.Xb(6,"p",29),c.Pc(7),c.Wb(),c.Xb(8,"div",5),c.Nc(9,nt,12,15,"div",47),c.Wb(),c.Wb(),c.Wb()),2&t){var a=e.index,i=c.jc(3);c.Fb(1),c.qc("ngClass",c.tc(7,B)),c.Fb(3),c.qc("ngStyle",c.uc(8,tt,i.segSpecificData.color)),c.Fb(1),c.Rc("",i.engOrMood?i.segSpecificData.name[1].name:i.segSpecificData.name[0].name," "),c.Fb(2),c.Tc("",i.engOrMood?null==i.segSpecificData?null:i.segSpecificData.moodParticipantsCount[a]:null==i.segSpecificData?null:i.segSpecificData.participantsCount[a]," ",i.engOrMood?1===(null==i.segSpecificData?null:i.segSpecificData.moodParticipantsCount[a])?"Participant":"Participants":1===(null==i.segSpecificData?null:i.segSpecificData.participantsCount[a])?"Participant":"Participants"," (",i.engOrMood?null==i.segSpecificData?null:i.segSpecificData.moodPercent[a]:null==i.segSpecificData?null:i.segSpecificData.percent[a],"%)"),c.Fb(2),c.qc("ngForOf",i.engOrMood?null==i.segSpecificData?null:i.segSpecificData.moodUsers[a]:null==i.segSpecificData?null:i.segSpecificData.users[a])}}function rt(t,e){if(1&t){var a=c.Yb();c.Xb(0,"div",39),c.Xb(1,"div",40),c.Xb(2,"button",41),c.fc("click",function(){c.Fc(a);var t=c.jc(2);return t.dispCatSpecificData=!t.dispCatSpecificData,t.dispStdList=!t.dispStdList}),c.Xb(3,"mat-icon"),c.Pc(4,"close"),c.Wb(),c.Wb(),c.Wb(),c.Nc(5,ot,10,10,"div",42),c.Wb()}if(2&t){var i=c.jc(2);c.Fb(5),c.qc("ngForOf",i.pieChartData)}}var st=function(t){return{display:t}};function ct(t,e){if(1&t){var a=c.Yb();c.Xb(0,"div",3),c.Xb(1,"div",4),c.Xb(2,"div",5),c.Xb(3,"div",6),c.Xb(4,"span",7),c.Pc(5,"Seconds"),c.Wb(),c.Xb(6,"mat-slide-toggle",8),c.fc("change",function(){return c.Fc(a),c.jc().changeStatus()}),c.Wb(),c.Xb(7,"span",7),c.Pc(8,"Minutes"),c.Wb(),c.Wb(),c.Sb(9,"app-overall-line-chart",9),c.Wb(),c.Wb(),c.Nc(10,z,2,2,"div",10),c.Xb(11,"div",11),c.Nc(12,V,7,5,"div",12),c.Wb(),c.Nc(13,it,6,1,"mat-card",13),c.Nc(14,rt,6,1,"div",14),c.Wb()}if(2&t){var i=c.jc();c.Fb(1),c.qc("ngStyle",c.uc(7,st,i.dispStdList||i.dispCatSpecificData?"none":"")),c.Fb(5),c.qc("checked",i.minuteToggle),c.Fb(3),c.qc("overallData",i.minuteToggle?i.sessionDataMinutes:i.sessionDataSeconds),c.Fb(1),c.qc("ngIf",0!==(null==i.segmentData?null:i.segmentData.length)),c.Fb(2),c.qc("ngForOf",i.segmentData),c.Fb(1),c.qc("ngIf",i.pieChartData&&i.pieChartData.length>0&&i.selection>=0&&i.dispStdList),c.Fb(1),c.qc("ngIf",i.dispCatSpecificData)}}function lt(t,e){1&t&&(c.Vb(0),c.Xb(1,"div",52),c.Xb(2,"span",53),c.Pc(3,"No Data Available"),c.Wb(),c.Wb(),c.Ub())}var gt=function(){return["customLoader"]};function ut(t,e){1&t&&c.Sb(0,"mat-spinner",54),2&t&&c.qc("ngClass",c.tc(2,gt))("diameter",50)}var dt,ht,pt=((dt=function(){function e(a,i,n,o,r,s,c,l,g,u,d,h,p){var f=this;t(this,e),this.router=a,this.date=i,this.api=n,this.ss=o,this.route=r,this.sl=s,this.cdRef=c,this.bhvSub=l,this.dashService=g,this.zone=u,this.utility=d,this.repo=h,this.http=p,this.minuteToggle=!0,this.sessionDataMinutes=[],this.sessionDataSeconds=[],this.percentArr=[],this.segUsersArr=[],this.moodpercentArr=[],this.moodsegUsersArr=[],this.duration=0,this.segmentData=[],this.students=[],this.dispStdList=!1,this.dispCatSpecificData=!1,this.studentData=[],this.dynamicLink="",this.lis=[],this.paymentError=!1,this.segments=[{name:"HIGH ",eng:"ENGAGEMENT",mood:"MOOD",indivSegKeyMap:"hi_percentage",category:"High",valMin:80,valMax:100,className:"title-success16-400",color:"#1FA000"},{name:"MID ",eng:"ENGAGEMENT",mood:"MOOD",indivSegKeyMap:"med_percentage",category:"Medium",valMin:40,valMax:80,className:"title-warning16-400",color:"#D5AD2A"},{name:"LOW ",eng:"ENGAGEMENT",mood:"MOOD",indivSegKeyMap:"low_percentage",category:"Low",valMin:0,valMax:40,className:"title-danger16-400",color:"#BA0E15"}],this.segmentDuration=[{name:"1st hour",value:1,selected:!0}],this.metricType={category:"",engagement:"",segmentName:"",engType:"Session",percentArr:[]},this.categoryFilterVal="category",this.segSpecificData={name:[],percent:[],participantsCount:[],users:[],moodPercent:[],moodParticipantsCount:[],moodUsers:[],categoryText:"",categoryMetric:"",category:"",color:"",iconClassName:""},this.sectionData={count:[],percent:[],moodCount:[],moodPercent:[]},this.route.queryParams.subscribe(function(t){t&&(f.roomId=t.roomid)})}return a(e,[{key:"ngOnInit",value:function(){var t=this;this.api.getApiStatic("avg-engagement-req?roomid="+this.roomId).subscribe(function(e){t.studentData=e,0===t.segmentData.length&&t.createSegment(t.studentData||"[]")}),this.generateReport(this.roomId),this.userDetails=JSON.parse(localStorage.getItem("userDetails")),this.email=this.userDetails.email,this.api.getApiStatic("userplanDetails?email="+this.email).subscribe(function(e){t.linkEnabled=e.data[0].postMeetingAnalytics}),this.bhvSub.engOrMood$.subscribe(function(e){t.engOrMood=e,t.categoryFilterVal=e?"category":"moodCategory",t.metricType.engType=0===e?"Session":"Mood",t.metricType.category=0===e?"segCategory":"segMoodCategory",t.metricType.segmentName=0===e?"ENGAGEMENT":"MOOD"})}},{key:"generateReport",value:function(t){var e=this;this.api.getApiStatic("getReportData?roomid="+this.roomId).subscribe(function(a){var i;e.studentReportData=a,e.reportData=a.report,e.createrId=a.report.creator_ID,null===a.report.pdf?e.api.getApiStatic("getPdfData?roomid="+e.roomId).subscribe(function(a){202===a.code?i=setInterval(function(){e.generateReport(t)},500):200===a.code?e.callDetails=a.pdf:404===(null==a?void 0:a.code)&&(clearInterval(i),e.api.getApiStatic("generatePdfData?roomid=".concat(e.roomId,"&creator_ID=").concat(e.createrId)).subscribe(function(t){e.callDetails=t.report},function(t){return console.error("Generate Report API error",t)}))}):e.callDetails=a.report.pdf,e.getDashboardData(e.reportData)})}},{key:"createSegment",value:function(t){var e=this;if(t.forEach(function(t){t.stdCallDuration=e.utility.convertDate(t.engagement_avg,60)}),this.callDetails){this.duration=this.utility.calculateDuration(t).duration,this.duration>3600&&this.segmentDuration.push({name:"2nd hour",value:2,selected:!1}),this.duration=Math.round(this.duration/4);for(var a=function(a){e.headingDuration=e.utility.convertDate(1*e.duration,e.callDetails.callDuration);var i={segment:a,data:[],metricAverage:{high:0,medium:0,low:0,camOff:0},moodAverage:{high:0,medium:0,low:0,camOff:0},catSpecificData:{high:[],medium:[],low:[],camOff:[]},metricCount:0,duration:e.utility.convertDate(e.duration*(a-1),e.callDetails.callDuration)+" - "+e.utility.convertDate(e.duration*a,e.callDetails.callDuration)},n=JSON.parse(JSON.stringify(t));1===a&&(e.callDetails.engagementAvg=0),n.map(function(t){return 1===a&&(e.callDetails.engagementAvg+=null!==t.engagement_avg?t.engagement_avg:0),t.segEngagement=0,t.segMood=0,t.category=e.utility.setCategory(t.engagement),t.engagement_data=t.session_data.filter(function(i){if(i.segment>=e.duration*(a-1)&&i.segment<e.duration*a)return i.category=e.utility.setCategory(i.engagement),i.moodCategory=e.utility.setCategory(i.mood),t.segMood+=null!==i.mood?i.mood:0,t.segEngagement+=null!==i.engagement?i.engagement:0,i}),t.segMood=t.segMood?Math.round(t.segMood/t.engagement_data.length):null,t.segEngagement=t.segEngagement?Math.round(t.segEngagement/t.engagement_data.length):null,t.segCategory=e.utility.setCategory(t.engagement_avg),i.metricCount+=t.session_data.length,i.data.push(t),t});for(var o=function(t){i.catSpecificData[""+e.segments[t].category.toLowerCase()]=i.data.filter(function(a){return a.segCategory===""+e.segments[t].category}),i.metricAverage[""+e.segments[t].category.toLowerCase()]=i.data.filter(function(a){return a.segCategory===""+e.segments[t].category}).length,i.moodAverage[""+e.segments[t].category.toLowerCase()]=i.data.filter(function(a){return a.segMoodCategory===""+e.segments[t].category}).length},r=0;1===a&&r<3;r++)o(r);e.zone.run(function(){return e.segmentData.push(i)})},i=1;i<=4;i++)a(i);this.callDetails.engagementAvg=Math.round(this.callDetails.engagementAvg/t.length)}}},{key:"getDashboardData",value:function(t){var e=this,a=1;t&&(null==t?void 0:t.pieData.length)&&(null==t?void 0:t.overallEngagement.length)?(this.pieChartData=t.pieData.map(function(t){return t.UAE.map(function(t){t.average=t.average.toFixed(2),t.average_mood=t.average_mood.toFixed(2)}),t}),this.sessionDataSeconds=t.overallEngagement.map(function(t){return t.segment=a++,t.category=e.utility.setCategory(t.average_engagement),t.moodCategory=e.utility.setCategory(t.average_mood),t}),this.sessionDataMinutes=this.dashService.SecArrToMinuteArr(t.overallEngagement)):(console.error("Data Not Available"),this.gettingData=!0)}},{key:"spline",value:function(t){this.router.navigate(["report/category-detail"],{queryParams:{catType:t.category.toLowerCase()},queryParamsHandling:"merge"})}},{key:"segmentWiseScore",value:function(t){for(var e=0;e<4;e++)this.dashService.updateArr(e,t,this)}},{key:"studentListPanel",value:function(t){this.dispStdList=t}},{key:"getCategoryVal",value:function(){return this.categoryFilterVal}},{key:"individualSegmentScores",value:function(t){this.segSpecificData.name=[{name:t.name+"ENGAGEMENT"},{name:t.name+"MOOD"}],this.segSpecificData.categoryText=t.name,this.segSpecificData.categoryMetric=0===this.engOrMood?"ENGAGEMENT":"MOOD",this.segSpecificData.category=t.category,this.segSpecificData.color=t.color,this.segSpecificData.iconClassName=t.className,this.segSpecificData.percent=[],this.segSpecificData.participantsCount=[],this.segSpecificData.users=[],this.segSpecificData.moodPercent=[],this.segSpecificData.moodParticipantsCount=[],this.segSpecificData.moodUsers=[],this.dispCatSpecificData=!0,this.dispStdList=!1;for(var e=0;e<this.pieChartData.length;e++)this.segSpecificData.percent[e]=this.pieChartData[e][""+t.indivSegKeyMap][0].toFixed(2),this.segSpecificData.participantsCount[e]=this.pieChartData[e][""+t.indivSegKeyMap][1].uuid.length,this.segSpecificData.users[e]="CAMERA OFF "!==t.name?this.pieChartData[e].UAE.filter(function(e){return e.category===t.category}):[],this.segSpecificData.moodPercent[e]=this.pieChartData[e][""+t.indivSegKeyMap][3].toFixed(2),this.segSpecificData.moodParticipantsCount[e]=this.pieChartData[e][""+t.indivSegKeyMap][2].uuid.length,this.segSpecificData.moodUsers[e]="CAMERA OFF "!==t.name?this.pieChartData[e].UAE.filter(function(e){return e.moodCategory===t.category}):[]}},{key:"changeStatus",value:function(){this.minuteToggle=!this.minuteToggle,this.repo._dataSource.next(this.minuteToggle)}}]),e}()).\u0275fac=function(t){return new(t||dt)(c.Rb(l.b),c.Rb(g.e),c.Rb(o.a),c.Rb(s.a),c.Rb(l.a),c.Rb(u.a),c.Rb(c.h),c.Rb(d.a),c.Rb(r.a),c.Rb(c.B),c.Rb(h.a),c.Rb(p.a),c.Rb(f.b))},dt.\u0275cmp=c.Lb({type:dt,selectors:[["app-dashboard"]],features:[c.Eb([o.a,r.a,s.a])],decls:3,vars:3,consts:[["fxLayout","column","fxFill","","padding","",4,"ngIf"],[4,"ngIf"],[3,"ngClass","diameter",4,"ngIf"],["fxLayout","column","fxFill","","padding",""],["fxLayout","row","fxLayoutAlign","center center","fxFlex","",2,"margin-top","-50px !important",3,"ngStyle"],["fxLayout","column","fxFlex","100"],["fxLayout","row","fxLayoutAlign","end center","p-r24","","p-l24","","border",""],["title-white12-400",""],["m-r12","","m-l12","",3,"checked","change"],["fxFlex","",3,"overallData"],["fxLayout","row","m-b20","","title-white12-200","",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between","fxFlex",""],["fxFlex","25","fxLayout","column","fxLayoutGap","10px",4,"ngFor","ngForOf"],["fxLayout","row","style","position: relative; ",4,"ngIf"],["fxLayout","row","fxLayoutGap","16px","fxLayoutAlign","space-around center","style","position: relative",4,"ngIf"],["fxLayout","row","m-b20","","title-white12-200",""],["fxFlex","25","fxLayout","column","fxLayoutGap","10px"],["title-white18-400","","fxLayoutAlign","center center","padding","",2,"border-left","1px solid #707070","border-right","1px solid #707070"],["fxFlex","100","pointer","",3,"inpIn","pieChartData","click"],["title-white18-400","","fxLayoutAlign","center center","style","border-left: 1px solid #707070 ; border-right: 1px solid #707070","padding","",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center"],[3,"ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["fxLayout","row",2,"position","relative"],["id","StdList","p-r8",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["t-center","","fxFlex","100","fxLayout","column","style","padding: 0 2%;",4,"ngFor","ngForOf"],["t-center","","fxFlex","100","fxLayout","column",2,"padding","0 2%"],["zero","",3,"ngStyle","click"],["xsmall",""],["fxLayout","column","fxFlex","100",3,"ngClass"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","20px","fxFlex","40px",3,"ngClass","routerLink","queryParams","queryParamsHandling","click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","20px","fxFlex","40px",3,"ngClass","routerLink","queryParams","queryParamsHandling","click"],["id","studentList","fxLayout","column","fxLayoutAlign","center","fxFlex","50"],["id","stdName","title-black12-400","","fxLayoutAlign","start","zero","",2,"text-align","start"],["fxfelx","10","fxLayoutAlign","start center","zero",""],["xsmall","","fxLayoutAlign","start center",3,"ngClass"],["fxFlex","10","xsmall","","fxLayoutAlign","start center","title-black14-500",""],["fxLayout","row","fxLayoutGap","16px","fxLayoutAlign","space-around center",2,"position","relative"],[2,"position","absolute","top","0","right","0"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear","title-white12-200","",3,"click"],["fxLayout","column","fxFill","","fxFlex","25",4,"ngFor","ngForOf"],["fxLayout","column","fxFill","","fxFlex","25"],[3,"ngClass"],["fxLayout","column","t-center","",2,"height","100%"],["t-center","","zero","",3,"ngStyle"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","20px","fxFlex","40px",3,"ngClass","routerLink","queryParams","queryParamsHandling","click",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","center","fxFlex","100"],["title-black12-400","","fxLayoutAlign","start","zero","",2,"text-align","start"],["fxflex","10","fxLayoutAlign","start center","zero",""],["fxflex","10","xsmall","","fxLayoutAlign","start center","title-black14-500",""],["fxLayout","column","fxLayoutAlign","center center","fxFill",""],[2,"color","white","padding","1%","border","1px solid white"],[3,"ngClass","diameter"]],template:function(t,e){1&t&&(c.Nc(0,ct,15,9,"div",0),c.Nc(1,lt,4,0,"ng-container",1),c.Nc(2,ut,1,3,"mat-spinner",2)),2&t&&(c.qc("ngIf",0!==(null==e.sessionDataMinutes?null:e.sessionDataMinutes.length)&&0!==(null==e.segmentData?null:e.segmentData.length)),c.Fb(1),c.qc("ngIf",e.gettingData),c.Fb(1),c.qc("ngIf",0===(null==e.segmentData?null:e.segmentData.length)&&e.sessionDataMinutes.length))},directives:[g.n,m.f,m.h,m.e,m.b,g.o,b.c,y.a,v.a,g.m,m.g,N,X.a,g.l,b.a,q.a,G.a,R.h,l.c,T.c],pipes:[g.w],styles:["hr[_ngcontent-%COMP%]{border:1px solid #fff}.z[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{width:100%}.z[_ngcontent-%COMP%]{z-index:10;position:absolute;top:8%}[zero][_ngcontent-%COMP%]{margin:0!important}.details_button[_ngcontent-%COMP%]{border-radius:30px}[mat-raised-button][_ngcontent-%COMP%]{background:#210041;color:#fff}.bullet[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:11px;height:11px}.High[_ngcontent-%COMP%]{border-top:5px solid #00a23e}.Medium[_ngcontent-%COMP%]{border-top:5px solid #d69718}.Low[_ngcontent-%COMP%]{border-top:5px solid #dc3545}.cam_off[_ngcontent-%COMP%]{border-top:5px solid #ccc}.student-card[_ngcontent-%COMP%]{max-height:370px!important;overflow:auto}.upIcon[_ngcontent-%COMP%]{height:50px!important;width:50px!important;font-size:86px!important;color:#fff!important}.customLoader[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.isLink[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.column[_ngcontent-%COMP%]{color:#fff}#studentList[_ngcontent-%COMP%]{height:50%}#stdName[_ngcontent-%COMP%]{width:5em;overflow:hidden;text-overflow:ellipsis}#stdDuration[_ngcontent-%COMP%]{line-height:1}#StdList[_ngcontent-%COMP%]{position:absolute;right:0;top:0}#StdList[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{cursor:pointer}h3[_ngcontent-%COMP%]{font-family:Segoe UI}"]}),dt),ft=n("zq/I"),mt=n("FpXt"),bt=n("A5z7"),yt=n("BcMA"),vt=[{path:"",component:pt}],Dt=((ht=a(function e(){t(this,e)})).\u0275fac=function(t){return new(t||ht)},ht.\u0275mod=c.Pb({type:ht}),ht.\u0275inj=c.Ob({providers:[r.a],imports:[[mt.a,ft.a,yt.a,q.b,G.b,T.b,bt.e,l.d.forChild(vt),y.b]]}),ht)}}])}();