!function(){function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){c=!0,r=e},f:function(){try{s||null==i.return||i.return()}finally{if(c)throw r}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=a(e);if(t){var r=a(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"1jcm":function(e,t,o){"use strict";o.d(t,"a",function(){return O}),o.d(t,"b",function(){return P});var a=o("GU7r"),r=o("fXoL"),l=o("FKr1"),u=o("8LU1"),d=o("3Pt+"),m=o("R1ws"),g=o("u47x"),b=["thumbContainer"],h=["toggleBar"],f=["input"],p=function(){return{enterDuration:150}},v=["*"],y=new r.s("mat-slide-toggle-default-options",{providedIn:"root",factory:function(){return{disableToggleValue:!1}}}),S=0,x={provide:d.q,useExisting:Object(r.X)(function(){return O}),multi:!0},k=s(function e(t,n){c(this,e),this.source=t,this.checked=n}),w=s(function e(t){c(this,e),this._elementRef=t}),_=Object(l.C)(Object(l.x)(Object(l.y)(Object(l.z)(w)),"accent")),O=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(o,e);var t=i(o);function o(e,n,i,a,s,l){var u;return c(this,o),(u=t.call(this,e))._focusMonitor=n,u._changeDetectorRef=i,u.defaults=s,u._animationMode=l,u._onChange=function(e){},u._onTouched=function(){},u._uniqueId="mat-slide-toggle-"+ ++S,u._required=!1,u._checked=!1,u.name=null,u.id=u._uniqueId,u.labelPosition="after",u.ariaLabel=null,u.ariaLabelledby=null,u.change=new r.o,u.toggleChange=new r.o,u.tabIndex=parseInt(a)||0,u}return s(o,[{key:"required",get:function(){return this._required},set:function(e){this._required=Object(u.c)(e)}},{key:"checked",get:function(){return this._checked},set:function(e){this._checked=Object(u.c)(e),this._changeDetectorRef.markForCheck()}},{key:"inputId",get:function(){return(this.id||this._uniqueId)+"-input"}},{key:"ngAfterContentInit",value:function(){var e=this;this._focusMonitor.monitor(this._elementRef,!0).subscribe(function(t){"keyboard"===t||"program"===t?e._inputElement.nativeElement.focus():t||Promise.resolve().then(function(){return e._onTouched()})})}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"_onChangeEvent",value:function(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}},{key:"_onInputClick",value:function(e){e.stopPropagation()}},{key:"writeValue",value:function(e){this.checked=!!e}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this._changeDetectorRef.markForCheck()}},{key:"focus",value:function(e,t){t?this._focusMonitor.focusVia(this._inputElement,t,e):this._inputElement.nativeElement.focus(e)}},{key:"toggle",value:function(){this.checked=!this.checked,this._onChange(this.checked)}},{key:"_emitChangeEvent",value:function(){this._onChange(this.checked),this.change.emit(new k(this,this.checked))}},{key:"_onLabelTextChange",value:function(){this._changeDetectorRef.detectChanges()}}]),o}(_);return e.\u0275fac=function(t){return new(t||e)(r.Rb(r.l),r.Rb(g.h),r.Rb(r.h),r.cc("tabindex"),r.Rb(y),r.Rb(m.a,8))},e.\u0275cmp=r.Lb({type:e,selectors:[["mat-slide-toggle"]],viewQuery:function(e,t){var n;(1&e&&(r.Uc(b,1),r.Uc(h,1),r.Uc(f,1)),2&e)&&(r.Cc(n=r.gc())&&(t._thumbEl=n.first),r.Cc(n=r.gc())&&(t._thumbBarEl=n.first),r.Cc(n=r.gc())&&(t._inputElement=n.first))},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(e,t){2&e&&(r.ac("id",t.id),r.Gb("tabindex",t.disabled?null:-1)("aria-label",null)("aria-labelledby",null),r.Jb("mat-checked",t.checked)("mat-disabled",t.disabled)("mat-slide-toggle-label-before","before"==t.labelPosition)("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[r.Eb([x]),r.Cb],ngContentSelectors:v,decls:16,vars:18,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,t){if(1&e&&(r.pc(),r.Xb(0,"label",0,1),r.Xb(2,"div",2,3),r.Xb(4,"input",4,5),r.fc("change",function(e){return t._onChangeEvent(e)})("click",function(e){return t._onInputClick(e)}),r.Wb(),r.Xb(6,"div",6,7),r.Sb(8,"div",8),r.Xb(9,"div",9),r.Sb(10,"div",10),r.Wb(),r.Wb(),r.Wb(),r.Xb(11,"span",11,12),r.fc("cdkObserveContent",function(){return t._onLabelTextChange()}),r.Xb(13,"span",13),r.Pc(14,"\xa0"),r.Wb(),r.oc(15),r.Wb(),r.Wb()),2&e){var n=r.Dc(1),i=r.Dc(12);r.Gb("for",t.inputId),r.Fb(2),r.Jb("mat-slide-toggle-bar-no-side-margin",!i.textContent||!i.textContent.trim()),r.Fb(2),r.qc("id",t.inputId)("required",t.required)("tabIndex",t.tabIndex)("checked",t.checked)("disabled",t.disabled),r.Gb("name",t.name)("aria-checked",t.checked.toString())("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby),r.Fb(5),r.qc("matRippleTrigger",n)("matRippleDisabled",t.disableRipple||t.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",r.tc(17,p))}},directives:[l.s,a.a],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),e}(),C=function(){var e=s(function e(){c(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({}),e}(),P=function(){var e=s(function e(){c(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({imports:[[C,l.t,l.j,a.c],C,l.j]}),e}()},"5BGd":function(t,n,i){"use strict";i.r(n),i.d(n,"CallModule",function(){return lt});var o=i("3Pt+"),a=i("v0EB"),r=i("0IaG"),l=i("0Lug"),u=i("ofXK"),d=i("fXoL"),m=i("tyNb"),g=i("tk/3"),b=i("kYN2"),h=i("LUsR"),f=i("iiAa"),p=i("dNgK"),v=i("STbY"),y=i("NFeN"),S=i("XiUz"),x=i("znSr"),k=i("mrSG"),w=i("R0Ic"),_=i("cclQ"),O=i("rjXu"),C=i("xk+7"),P=i("q1A0"),M=i("Qu3c"),L=i("bTqV"),j=i("bSwM"),F=i("zkoq"),I=i("sjQA"),A=["studentContainer"],X=["screenShareStreem"],W=["audioNotification"],R=["audioview"],q=["scShareAudio"];function D(e,t){if(1&e){var n=d.Yb();d.Xb(0,"mat-icon",9),d.fc("click",function(){d.Fc(n);var e=d.jc(2);return e.collapseUsersList.action=!e.collapseUsersList.action,e.collapseList(e.collapseUsersList.action,null)}),d.Pc(1),d.Wb()}if(2&e){var i=d.jc(2);d.qc("matTooltip",i.collapseUsersList.action?"Expand Users List":"Collapse Users List"),d.Fb(1),d.Rc(" ",i.collapseUsersList.action?"keyboard_double_arrow_left":"keyboard_double_arrow_right"," ")}}function E(e,t){if(1&e){var n=d.Yb();d.Vb(0),d.Xb(1,"div",14),d.Xb(2,"button",15),d.Xb(3,"mat-icon",16),d.Pc(4,"exit_to_app"),d.Wb(),d.Wb(),d.Xb(5,"span",17),d.Pc(6,"You are sharing your screen"),d.Wb(),d.Xb(7,"button",18),d.fc("click",function(){return d.Fc(n),d.jc(3).stopScreen()}),d.Pc(8,"Stop sharing"),d.Wb(),d.Xb(9,"mat-checkbox",19),d.fc("ngModelChange",function(e){return d.Fc(n),d.jc(3).screenShareAudio=e})("click",function(){d.Fc(n);var e=d.jc(3);return e.publisherScreenShare.toggleAudio("screen",e.screenShareAudio)}),d.Pc(10," Screen Share Audio "),d.Wb(),d.Wb(),d.Ub()}if(2&e){var i=d.jc(3);d.Fb(7),d.qc("disabled",i.stopScreenShareButtonStat),d.Fb(2),d.qc("ngModel",i.screenShareAudio)}}var N=function(){return{opacity:"1",margin:"0 15%"}},U=function(){return{opacity:"0"}},T=function(){return{opacity:"1",marginTop:"10px",height:"80vh"}},B=function(){return{opacity:"1"}};function V(e,t){if(1&e&&(d.Xb(0,"div",10),d.Sb(1,"video",11,12),d.Nc(3,E,11,2,"ng-container",13),d.Wb()),2&e){var n=d.jc(2);d.qc("fxFlexAlign",n.screenShareId&&n.screenShareId===n.param.id.toString()+"___"+n.param.id.toString()?"center":"stretch")("fxLayout",n.screenShareId&&n.screenShareId===(null==n.param||null==n.param.id?null:n.param.id.toString())+"___"+(null==n.param||null==n.param.id?null:n.param.id.toString())?"column":"")("fxLayoutAlign",n.screenShareId&&n.screenShareId===n.param.id.toString()+"___"+n.param.id.toString()?"center center":"")("ngStyle",n.screenshare?n.screenShareId===n.param.id.toString()+"___"+n.param.id.toString()?d.tc(6,N):n.fullScreen?n.opacity?d.tc(8,T):d.tc(9,U):d.tc(7,U):d.tc(10,B)),d.Fb(1),d.qc("fxHide",n.screenShareId===n.param.id.toString()+"___"+n.param.id.toString()),d.Fb(2),d.qc("ngIf",n.screenShareId&&n.screenShareId===(null==n.param||null==n.param.id?null:n.param.id.toString())+"___"+(null==n.param||null==n.param.id?null:n.param.id.toString()))}}function z(e,t){if(1&e){var n=d.Yb();d.Xb(0,"button",27),d.Xb(1,"mat-icon",28),d.fc("click",function(){return d.Fc(n),d.jc(3).scrollList("top")}),d.Pc(2,"double_arrow"),d.Wb(),d.Wb()}}var Y=function(e){return{backgroundColor:e}};function G(e,t){if(1&e&&(d.Xb(0,"div",33),d.Xb(1,"div",34),d.Xb(2,"mat-icon",35),d.Pc(3,"person"),d.Wb(),d.Wb(),d.Xb(4,"span",36),d.Pc(5,"You"),d.Wb(),d.Wb()),2&e){var n=d.jc(4);d.Fb(1),d.qc("ngStyle",d.uc(1,Y,"rgba("+n.randomColor.join(", ")+")"))}}var H=function(){return["video-title"]};function J(e,t){if(1&e&&(d.Xb(0,"div"),d.Xb(1,"div",37),d.Pc(2),d.Xb(3,"mat-icon",38),d.Pc(4),d.Wb(),d.Wb(),d.Wb()),2&e){var n=d.jc(4);d.Fb(1),d.qc("ngClass",d.tc(3,H)),d.Fb(1),d.Rc(" ",null==n.param?null:n.param.name," (You) \xa0 "),d.Fb(2),d.Rc("",n.userAudioIcon," ")}}var $=function(e){return["student-preview",e]};function Q(e,t){if(1&e&&(d.Xb(0,"mat-grid-tile",29),d.Nc(1,G,6,3,"div",30),d.Xb(2,"div",31),d.Sb(3,"video",32),d.Nc(4,J,5,4,"div",13),d.Wb(),d.Wb()),2&e){var n=d.jc(3);d.qc("ngClass",d.uc(5,$,(null==n.studentsList?null:n.studentsList.length)<2&&!n.screenshare&&!n.screen?"single-view":""))("colspan",n.screenshare?1:n.fullScreen?2:1)("rowspan",n.screenshare?1:n.fullScreen?2:1),d.Fb(1),d.qc("ngIf",!n.publisherAvatar),d.Fb(3),d.qc("ngIf",n.moderatorStream)}}var K=function(e,t){return["student-preview",e,t]};function Z(e,t){if(1&e){var n=d.Yb();d.Xb(0,"mat-grid-tile",29),d.Xb(1,"app-video-stream",39),d.fc("actionEmitter",function(e){d.Fc(n);var t=d.jc().$implicit;return d.jc(3).mainActions(e,t)}),d.Wb(),d.Wb()}if(2&e){var i=d.jc().$implicit,o=d.jc(3);d.qc("ngClass",d.vc(7,K,(null==o.studentsList?null:o.studentsList.length)<2&&!o.screenshare&&!o.screen?"single-view":"",(null==i?null:i.std_id)===o.selectedUserID&&o.selectStu?"select-list":""))("colspan",1)("rowspan",1),d.Fb(1),d.qc("module","proctor")("selectUser",o.selectUser)("std",o.json.stringify(i))("mediaStreamObj",null==i?null:i.msobj)}}function ee(e,t){if(1&e&&(d.Vb(0),d.Nc(1,Z,2,10,"mat-grid-tile",25),d.Ub()),2&e){var n=t.$implicit,i=d.jc(3);d.Fb(1),d.qc("ngIf",!(null!=n&&n.screen)&&(null==n?null:n.std_id)!==(null==i.param?null:i.param.id))}}function te(e,t){if(1&e){var n=d.Yb();d.Xb(0,"button",27),d.Xb(1,"mat-icon",40),d.fc("click",function(){return d.Fc(n),d.jc(3).scrollList("bottom")}),d.Pc(2,"double_arrow"),d.Wb(),d.Wb()}}var ne=function(e,t){return{marginLeft:e,minHeight:t}};function ie(e,t){if(1&e&&(d.Xb(0,"div",20),d.Nc(1,z,3,0,"button",21),d.Xb(2,"div",22,23),d.Xb(4,"mat-grid-list",24),d.Nc(5,Q,5,7,"mat-grid-tile",25),d.Nc(6,ee,2,1,"ng-container",26),d.Wb(),d.Wb(),d.Nc(7,te,3,0,"button",21),d.Wb()),2&e){var n=d.jc(2);d.qc("fxFlexOrder",n.screenshare?2:n.fullScreen?1:2)("ngStyle",d.vc(10,ne,n.screenshare?"5vh":n.fullScreen?"":"5vh",n.screenshare?"93vh":n.fullScreen?"":"93vh")),d.Fb(1),d.qc("ngIf",(null==n.studentsList?null:n.studentsList.length)>3&&!n.fullScreen),d.Fb(1),d.qc("fxFlex","calc(70vh - 10px)")("fxLayout",n.screenshare||n.fullScreen?"row wrap":"row"),d.Fb(2),d.qc("cols",n.screenshare?1:n.fullScreen?5:1),d.Fb(1),d.qc("ngIf",n.fullScreen),d.Fb(1),d.qc("ngForOf",n.studentsList)("ngForTrackBy",n.trackByUsers),d.Fb(1),d.qc("ngIf",(null==n.studentsList?null:n.studentsList.length)>3&&!n.fullScreen)}}var oe=function(e,t){return{background:e,minHeight:t}};function ae(e,t){if(1&e&&(d.Xb(0,"div",2),d.Sb(1,"audio",3,4),d.Nc(3,D,2,2,"mat-icon",5),d.Nc(4,V,4,11,"div",6),d.Xb(5,"div",7),d.Nc(6,ie,8,13,"div",8),d.Wb(),d.Wb()),2&e){var n=d.jc();d.qc("fxLayoutAlign",(n.screenshare||n.screen)&&n.param?"center center":"end start")("ngStyle",d.vc(7,oe,n.fullScreen?"black":"",n.screenshare||n.screen?"100vh":"93vh")),d.Fb(1),d.qc("hidden",!0),d.Fb(2),d.qc("ngIf",n.screenshare&&!(n.screenShareId===n.param.id.toString()+"___"+n.param.id.toString())),d.Fb(1),d.qc("ngIf",(n.screenshare||n.screen)&&n.param),d.Fb(1),d.qc("fxFlex",n.fullScreen?n.screenshare?"25%":"100%":(null==n.studentsList?null:n.studentsList.length)<2?"2%":"25%"),d.Fb(1),d.qc("ngIf",!0===n.fullScreen||(null==n.studentsList?null:n.studentsList.length)>1)}}var re=function(){return["invite","link"]};Object(w.m)("listAnimation",[Object(w.l)(":enter",[Object(w.k)({opacity:0}),Object(w.e)("300ms",Object(w.k)({opacity:1}))]),Object(w.l)(":leave",[Object(w.k)({opacity:1}),Object(w.e)("300ms",Object(w.k)({opacity:0}))])]);var se,ce=((se=function(){function t(e,n,i,o,a,r,s,l,u,m,g,b){c(this,t),this.as=e,this.route=n,this.ss=i,this.bhvSub=o,this.sl=a,this.router=r,this.snackBar=s,this.datePipe=l,this.dialog=u,this.http=m,this.utility=g,this.cdref=b,this.faceDataState=!0,this.userAudioIcon="mic",this.stopScreenShareButtonStat=!0,this.screenShareAudio=!0,this.publisherAvatar=!0,this.muteAll=!1,this.opacity=!1,this.fullScreen=!1,this.index=0,this.avg=[],this.duration={duration:0},this.collapseUsersList={action:!1,icon:"keyboard_double_arrow_right",iconOp:"keyboard_double_arrow_left"},this.randomColor=[0,0,0],this.json=JSON,this.size={col:5,row:3},this.screenShareStat=new d.o,this.resetConfigOptions=new d.o,this.screenShareMediaEmit=new d.o,this.moderatorMediaEmit=new d.o,this.studentEmit=new d.o,this.sideNavSize=new d.o,this.stopScreenShare=new d.o,this.toggleSideNav=new d.o,this.randomColor=this.generateRandomColor(),this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1}}return s(t,[{key:"generateRandomColor",value:function(){return[0,0,0].map(function(){return Math.floor(128*Math.random())})}},{key:"collapseList",value:function(e,t){var n=document.getElementById("usersList");if(n)if(e)var i=25,o=setInterval(function(){n.style.maxWidth=i--+"%",i<1&&(n.style.opacity="0",n.style.visibility="hidden",clearInterval(o))},1);else{var a=25,r=0;null!==t&&(a=this.fullScreen?100:25);var s=setInterval(function(){n.style.maxWidth=r+++"%",r>=a&&(n.style.opacity="1",n.style.visibility="visible",clearInterval(s))},1)}}},{key:"mainActions",value:function(e,t){var n=this,i={throwChalk:function(){return n.ss.socket.emit("throw-chalk",{sender:n.param.id,receiver:t.std_id})},exit:function(){return n.ss.socket.emit("leave",{uuid:t.std_id,type:"webcam"})},mic:function(){n.ss.socket.emit("toggle-audio",{roomid:n.param.roomid,from:t.std_id,status:e.enable}),n.studentsList.map(function(n){n.std_id===t.std_id&&(n.audio=e.enable)})},"":function(){}};i[e.value]()||i[""]()}},{key:"Menu",value:function(e){var t=this;this.bhvSub.obFullScreen(e),this.fullScreen=e,e?setTimeout(function(){var e=document.getElementById("webcamvideo"),n=[300,300,!0,!0,t.moderatorStream];e.width=n[0],e.height=n[1],e.muted=n[2],e.autoplay=n[3],e.srcObject=n[4]},500):this.moderatorMediaEmit.emit(this.moderatorStream)}},{key:"stopScreen",value:function(){var e;this.stopScreenShareButtonStat=!0,this.stopScreenShare.emit(!0),this.screenShareStat.emit("Share Screen"),this.ss.socket.emit("stopScreen",{uuid:this.param.id+"___"+this.param.id}),this.screenshare&&this.publisherScreenShare.destroy("screen"),e=[void 0,void 0,void 0],this.screen=e[0],this.screenshare=e[1],this.screenShareId=e[2],this.toggleSideNav.emit(!0),this.bhvSub.obScreenShare(!1)}},{key:"showSelectUser",value:function(e,t){var n=[e,t];this.selectedUserID=n[0],this.selectStu=n[1]}},{key:"startTimer",value:function(){var e=this;0===this.duration.duration&&(this.timer=setInterval(function(){e.duration.duration++,e.avg.map(function(t){e.showSelectUser(t.id,t.score>30)})},2e3))}},{key:"ngOnChanges",value:function(e){var t,n,i,o,a,r,s,c,l;(null==e?void 0:e.selectUser)&&(null===(t=e.selectUser)||void 0===t?void 0:t.currentValue)&&this.studentsList&&this.studentsList.lenght>1&&this.showSelectUser(e.selectUser.currentValue.std_id,e.selectUser.currentValue.fromSidenav),e.screenshare&&!1===(null===(n=e.screenshare)||void 0===n?void 0:n.currentValue)&&(this.screen=void 0),e.actionObj&&(null===(i=null==e?void 0:e.actionObj)||void 0===i?void 0:i.currentValue)&&this.actionsHandler(null===(a=null===(o=null==e?void 0:e.actionObj)||void 0===o?void 0:o.currentValue)||void 0===a?void 0:a.name,null===(s=null===(r=null==e?void 0:e.actionObj)||void 0===r?void 0:r.currentValue)||void 0===s?void 0:s.value),void 0!==(null===(c=null==e?void 0:e.configMediaSettings)||void 0===c?void 0:c.currentValue)&&!0===(null===(l=null==e?void 0:e.configMediaSettings)||void 0===l?void 0:l.currentValue)&&(this.availableMediaDevices=mediaDev.availableDevices,this.configMediaoptions())}},{key:"actionsHandler",value:function(e,t){var n=this,i={video:function(){n.pub.toggleVideo("webcam",t),n.studentsList.map(function(e){e.std_id===n.param.id&&(e.video=n.publisherAvatar=t)})},audio:function(){n.userAudioIcon=t?"mic":"mic_off",n.pub.toggleAudio("webcam",t)},screen:function(){t?(n.publisherScreenShare=new PubUser(n.param.name+"(screen)",n.param.id+"___"+n.param.id,n.param.roomid,"student",null,n.ss.socket,"screen",null,"",!0),n.publisherScreenShare.on("screen-share-denied",function(e,t){return n.ss.socket.emit("leave",{uuid:t,type:"webcam"})}),n.publisherScreenShare.sock=n.ss.socket,n.publisherScreenShare.connect()):n.stopScreen()},leave:function(){n.openDialog()},endRoom:function(){n.moderatorLeave(!1)},muteRoom:function(){return n.muteAllParticipants()},"toggle-view":function(){return n.Menu(t)},"":function(){}};i[e]()||i[""]()}},{key:"openDialog",value:function(){var e=this,t=this.dialog.open(C.a,{height:"25%",width:"25%"});t.afterClosed().subscribe(function(n){n&&e.moderatorLeave(!0),t=null})}},{key:"moderatorLeave",value:function(e){this.pub.destroy(),this.sendToAdmin(),this.stopScreen(),dynamoIp,this.ss.socket.emit("endRoom",{roomid:this.param.room}),this.ss.socket.emit("leave",{uuid:this.param.id,type:"webcam"}),this.router.navigate(["report"],{queryParams:{roomid:this.param.roomid}}).then(function(){})}},{key:"configMediaoptions",value:function(){var e=this;this.availableMediaDevices&&(this.dialogOpener=this.dialog.open(O.a,{data:{devicesList:this.availableMediaDevices},panelClass:"configDevice-dialog-container",hasBackdrop:!0,width:"23%",height:"auto",backdropClass:"backdropBackground"}).afterClosed().subscribe(function(t){e.resetConfigOptions.emit(!1),e.dialogOpener=null,t.result&&mediaDev.deltaMedia(t.result.label,t.result.id)}))}},{key:"ngOnDestroy",value:function(){this.timer&&clearInterval(this.timer),this.debounce&&clearTimeout(this.debounce)}},{key:"tryAgain",value:function(){var e=this;this.ss.socket.connect(),this.router.navigate(["/teacher/call"],{queryParamsHandling:"merge"}),this.as.getApiStatic("getRoomIp?roomid="+this.param.roomid).subscribe(function(t){fetchAvailableInstance(t.room.grp,t.room.instance),e.bhvSub.obDynamicLink(t.room.grp)})}},{key:"muteAllParticipants",value:function(){this.muteAll=!this.muteAll,this.as.postApi("muteRoom",{status:this.muteAll?"mute_room":"unmute_room",room:this.param.room,uuid:this.param.id}).subscribe(function(){})}},{key:"sendToAdmin",value:function(){var e=this,t={Admin:"",Name:"",Summary:"",Attendees:_.g,Link:"",Date:""};this.as.getApi("getInviteRoom?roomid="+this.param.roomid).subscribe(function(n){if(n&&n.response){var i=n.response.attendees.filter(function(e){return e&&!e.includes("(screen)")}).length,o=n.response,a=o.start.dateTime,r=o.creator_ID,s=o.creator,c=o.summary,l=o.roomid,u=new Date,d=new Date(a),m=Math.abs(u.getTime()-d.getTime())/1e3;t.Admin=r,t.Name=s,t.Summary=c;var g=e.utility.convertDate(m,m).split(":");t.Duration=2===g.length?"".concat(g[0],"min ").concat(g[1],"sec"):"".concat(g[0],"hr ").concat(g[1],"min ").concat(g[2],"sec"),t.Attendees=i,t.Link="https://www.monetlive.com/report/dashboard?roomid="+l,t.Date=e.datePipe.transform(new Date(a),"medium"),t.RoomId=l,e.as.postApiStatic("sendAdminEmail",t).subscribe(function(e){return console.log("Send Email Response :",e)}),e.as.putApiStatic("updateMeetingHours",{user:JSON.parse(localStorage.getItem("userDetails")||"{}"),hours:(m/3600).toFixed(2)}).subscribe(function(e){})}})}},{key:"managePublisher",value:function(){var e=this;this.pub=myPubUser=new PubUser(this.param.name,this.param.id,this.param.roomid,"teacher",null,this.ss.socket,"webcam",mediaDev.mediaStream,JSON.parse(localStorage.getItem("userDetails")||"").email,!0),this.moderatorStream=mediaDev.mediaStream,this.pub.newAudioStatus=this.configurations.audio,this.pub.newVideoStatus=this.configurations.video,this.pub.sendSpeakingInfo(),this.publisherStreamHandler(this.moderatorStream),this.pub.on("local",function(t,n){e.Menu(!0),e.publisherAvatar=e.configurations.video,-1===e.studentsList.findIndex(function(t){return t&&t.std_id===e.param.id})&&e.studentsList.push({audio:e.configurations.audio,engAvg:NaN,msobj:null,screen:null,video:e.configurations.video,webcam:!0,name:e.param.name,proctor:"proctor",roomid:e.param.roomid,serverIP:null,time:null,std_id:e.param.id}),e.studentEmit.emit(e.studentsList)}),this.studentEmit.emit(this.studentsList),this.getUsers(this.param.roomid),this.pub.on("remote",function(t,n){return Object(k.b)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(t=this.audioview)||void 0===t?void 0:t.nativeElement)){e.next=6;break}return e.next=3,n;case 3:this.audioview.nativeElement.srcObject=e.sent,e.next=7;break;case 6:console.error("Audio Element not found");case 7:case"end":return e.stop()}},e,this)}))}),this.pub.on("toggleVideo",function(t){e.studentsList.map(function(e){e.std_id===t.from&&(e.video=t.status)})}),this.pub.on("toggleAudio",function(t){e.studentsList.map(function(e){e.std_id===t.from&&(e.audio=t.status)})}),this.pub.sock=this.ss.socket,this.pub.connect()}},{key:"socketEventListeners",value:function(t,n){var i=this,o={"user-list":function(){var t=n.users.filter(function(e){var t;return-1===(null===(t=null==e?void 0:e.uuid)||void 0===t?void 0:t.search(i.param.id))});if(t.length>0){var o,a=e(t);try{var r=function(){var e=o.value,t=new SubUser(e.name,Math.floor(1e5*Math.random()),e.roomid,"dummy",e.serverIP,i.ss.socket,e.uuid);t.on("remote",function(t,n,o){i.studentsList.map(function(t){t.std_id===e.uuid&&(t.msobj=o)});var a=i.studentsList.findIndex(function(e){return"teacher"===e.proctor});i.studentsList.unshift(i.studentsList.splice(a,1)[0]),i.mediaStreamObj=o}),t.sock=i.ss.socket,t.connect()};for(a.s();!(o=a.n()).done;)r()}catch(s){a.e(s)}finally{a.f()}}console.log("Students-List =>",i.studentsList)},"face-data":function(){n&&(i.faceDataState=!0,i.studentsList=i.studentsList.map(function(e){var t,i;return e.engagement=Math.floor((null===(t=n[null==e?void 0:e.std_id])||void 0===t?void 0:t.engagement)||0),e.mood=Math.floor((null===(i=n[null==e?void 0:e.std_id])||void 0===i?void 0:i.mood_score)||0),e.category_engagement=e.engagement>80?"High":e.engagement>40?"Medium":"Low",e.category_mood=e.mood>80?"High":e.mood>40?"Medium":"Low",e}),i.studentEmit.emit(i.studentsList),i.debounce&&clearTimeout(i.debounce))},"raise-hand":function(){i.studentsList=i.studentsList.map(function(e){return e.std_id===n.from&&(e.raiseHand=n.status,i.selectUser=i.studentsList.filter(function(e){return e.std_id===n.from})[0],i.showSelectUser(n.from,!1),i.utility.notify(!0===n.status?n.name+" raised his/her hand":n.name+" put his/her hand down","")),e})},leave:function(){var e,t,o,a,r;Object.keys(null==n?void 0:n.userObj).length&&(i.studentsList=i.studentsList.filter(function(e){var t;return e.std_id!==(null===(t=n.userObj)||void 0===t?void 0:t.uuid)}),!1===(null===(o=null===(t=null==n?void 0:n.userObj)||void 0===t?void 0:t.janus)||void 0===o?void 0:o.screen)&&(null===(a=null==n?void 0:n.userObj)||void 0===a?void 0:a.uuid.includes("___"))&&(i.screenShareStat.emit("Share Screen"),i.collapseList(!1,!0),i.bhvSub.obScreenShare(!1),e=[void 0,void 0,void 0],i.screen=e[0],i.screenshare=e[1],i.screenShareId=e[2]),i.studentEmit.emit(i.studentsList),i.utility.notify(n.userObj.name+((null===(r=null==n?void 0:n.userObj)||void 0===r?void 0:r.uuid.includes("___"))?" stopped sharing screen":" left the call"),""))},"room-audio":function(){i.userAudioIcon=n.mute?"mic_off":"mic",i.utility.notify(n.mute?"Room muted":"Room  un-muted",""),i.studentsList=i.studentsList.map(function(e){return e.audio=!n.mute,e})},"screen-share":function(){var e;i.utility.notify("Screen is already being shared by someone",""),e=[void 0,void 0,void 0],i.screen=e[0],i.screenshare=e[1],i.screenShareId=e[2],i.bhvSub.obScreenShare(!1)},"join-request":function(){return i.bhvSub.obAddToWaitingList({userName:n.name,userId:n.uuid,socketId:n.sid})},"":function(){}};o[t]&&o[t]()||o[""]()}},{key:"getSubscribedUsers",value:function(e,t,n,i,o,a){var r=this;"audio"===e&&null!==t&&(this.scShareAudio.nativeElement.srcObject=t);var s=this.studentsList.find(function(e){return e.std_id===n.uuid});s?s.msobj=t:(this.studentsList.push({audio:a.janus.audio,engAvg:NaN,msobj:t,screen:a.janus.screen,video:a.janus.video,webcam:a.janus.webcam,name:a.name,proctor:a.proctor,roomid:a.janus.room,serverIP:null,time:null,std_id:n.uuid}),this.utility.notify(a.name+" Joined the call","")),this.studentsList.forEach(function(e,t){var i,o;e.std_id.includes("___")&&(r.studentsList=r.studentsList.filter(function(e){var t;return-1===(null===(t=null==e?void 0:e.std_id)||void 0===t?void 0:t.indexOf("___"))}),(null==e?void 0:e.std_id)!==r.param.id+"___"+r.param.id&&r.screenShareMediaEmit.emit(e.msobj),r.bhvSub.obScreenShare(!0),r.param.id+"___"+r.param.id===n.uuid&&(i=[1,!0,r.param.id+"___"+r.param.id],r.screen=i[0],r.screenshare=i[1],r.screenShareId=i[2]),o=[!0,1],r.screenshare=o[0],r.screen=o[1],setTimeout(function(){document.getElementById("screenShareStreem").srcObject=e.msobj,r.utility.notify(a.name+" Shared his/her screen",""),r.screenShareStat.emit(r.param.id+"___"+r.param.id===n.uuid?{type:"Self",Name:r.param.name}:{type:"Other",Name:a.name})},1e3),r.stopScreenShareButtonStat=!1)})}},{key:"ngAfterViewInit",value:function(){var e=this;this.route.queryParams.subscribe(function(t){var n,i;e.link=(null===(i=null===(n=null===window||void 0===window?void 0:window.location)||void 0===n?void 0:n.href)||void 0===i?void 0:i.split("#")[0])+"#/student/login?roomid="+(null==t?void 0:t.roomid)+"&room="+(null==t?void 0:t.room),e.param=t,e.ss.generateSocket(),e.dynamicLink?(e.subSession=new StateSubscription("wss://www.monetlive.com/".concat(e.dynamicLink,"/rtc/"),e.param.id,parseInt(e.param.room,10),e.ss.socket),e.subSession.start(),e.managePublisher()):console.error("Dynamic Link not found"),e.ss.socket.onAny(function(t,n){e.socketEventListeners(t,n)})}),this.subSession.on("remote",function(t){var n=t.type,i=t.stream,o=t.slot,a=t.mid,r=t.sub,s=t.user;console.log("State Subscription (remote) : ",s),e.getSubscribedUsers(n,i,r,o,a,s)}),this.studentEmit.emit(this.studentsList)}},{key:"trackByUsers",value:function(e,t){if(null==t?void 0:t.std_id)return t.std_id}},{key:"ngOnInit",value:function(){var e=this;this.sl.load("janus").then(function(){return e.sl.load("user").then(function(){})}),this.startTimer(),this.bhvSub.fullScreen$.subscribe(function(t){e.fullScreen=t}),this.bhvSub.screenShare$.subscribe(function(t){""!==t&&(e.opacity=t)}),this.bhvSub.faceData$.subscribe(function(t){console.log("FaceDataFromBehaviourSubject-teacher side",t),e.faceDataState=t}),mediaDev.on("media",function(e){var t=document.getElementById("webcamvideo");t&&(t.srcObject=e)}),mediaDev.on("media-error",function(t){console.log("media-error :",t),e.router.navigate(["/auth"])}),this.bhvSub.dynamicLink$.subscribe(function(t){console.log("Moderator - dynamic link :",t),e.dynamicLink=t})}},{key:"publisherStreamHandler",value:function(e){return Object(k.b)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.cdref.detectChanges(),e.next=3,document.getElementById("webcamvideo");case 3:n=e.sent,console.log("Publisher Video Element : ",n),t=[300,300,!1,!0,this.moderatorStream],n.width=t[0],n.height=t[1],n.muted=t[2],n.autoplay=t[3],n.srcObject=t[4];case 6:case"end":return e.stop()}},e,this)}))}},{key:"getUsers",value:function(e){var t=this;this.as.getApi("user_list?id="+e).subscribe(function(e){if(e){if(e.response=e.response.filter(function(e){var n;return e.screen&&e.active&&(n=[1,!0,e.std_id],t.screen=n[0],t.screenshare=n[1],t.screenShareId=n[2]),!e.screen&&e.active}),e.response.length>1){var n=e.response.findIndex(function(e){return e.std_id===t.param.id});e.response.unshift(e.response.splice(n,1)[0]);var i=e.response.findIndex(function(e){return"proctor"===e.proctor});e.response.unshift(e.response.splice(i,1)[0])}if(t.selectUser){var o=t.selectUser.std_id;if(e.response.length>1){var a=e.response.findIndex(function(e){return e.std_id===o});e.response.unshift(e.response.splice(a,1)[0])}}t.studentsList=e.response,t.studentEmit.emit(t.studentsList)}})}},{key:"scrollList",value:function(e){var t=document.getElementById("list");t.scrollTop="top"===e?t.scrollTop-200:t.scrollTop+200}}]),t}()).\u0275fac=function(e){return new(e||se)(d.Rb(a.a),d.Rb(m.a),d.Rb(b.a),d.Rb(h.a),d.Rb(l.a),d.Rb(m.b),d.Rb(p.b),d.Rb(u.e),d.Rb(r.b),d.Rb(g.b),d.Rb(f.a),d.Rb(d.h))},se.\u0275cmp=d.Lb({type:se,selectors:[["app-student-video"]],viewQuery:function(e,t){var n;1&e&&(d.Uc(A,1),d.Uc(X,1),d.Uc(W,1),d.Uc(R,1),d.Uc(q,1)),2&e&&(d.Cc(n=d.gc())&&(t.studentContainer=n.first),d.Cc(n=d.gc())&&(t.screenShareStreem=n.first),d.Cc(n=d.gc())&&(t.audioNotification=n.first),d.Cc(n=d.gc())&&(t.audioview=n.first),d.Cc(n=d.gc())&&(t.scShareAudio=n.first))},inputs:{configMediaSettings:"configMediaSettings",actionObj:"actionObj",moderatorObj:"moderatorObj",action:"action",module:"module",selectUser:"selectUser",configurations:"configurations",room:"room",Duration:"Duration",stream:"stream"},outputs:{screenShareStat:"screenShareStat",resetConfigOptions:"resetConfigOptions",screenShareMediaEmit:"screenShareMediaEmit",moderatorMediaEmit:"moderatorMediaEmit",studentEmit:"studentEmit",sideNavSize:"sideNavSize",stopScreenShare:"stopScreenShare",toggleSideNav:"toggleSideNav"},features:[d.Eb([a.a]),d.Db],decls:2,vars:6,consts:[[3,"room","duration","action","role","toggleMenu","refreshSession"],["fxLayout","row","style","min-height: calc(93vh); position: relative",3,"fxLayoutAlign","ngStyle",4,"ngIf"],["fxLayout","row",2,"min-height","calc(93vh)","position","relative",3,"fxLayoutAlign","ngStyle"],["id","webcamaudio","preload","none","autoplay","",3,"hidden"],["audioview",""],["f-white","","pointer","","style","position: absolute; right: 0px ; bottom: 50vh; background: red; z-index: 999;",3,"matTooltip","click",4,"ngIf"],["fxFlex","","class","screenshare-box",3,"fxFlexAlign","fxLayout","fxLayoutAlign","ngStyle",4,"ngIf"],["id","usersList","fxLayout","row","fxFlexAlign","start",3,"fxFlex"],["fxLayout","column","fxFlex","90","style","height: 80vh",3,"fxFlexOrder","ngStyle",4,"ngIf"],["f-white","","pointer","",2,"position","absolute","right","0px","bottom","50vh","background","red","z-index","999",3,"matTooltip","click"],["fxFlex","",1,"screenshare-box",3,"fxFlexAlign","fxLayout","fxLayoutAlign","ngStyle"],["id","screenShareStreem","height","100%","width","auto","autoplay","",1,"videocol",3,"fxHide"],["screenShareStreem",""],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","space-around center",2,"border","1px solid black","height","250px","width","350px","border-radius","4px"],["mat-icon-button","",2,"background","#5829A6"],["id","exit_to_app","f-white",""],["xlarge",""],["mat-raised-button","","color","primary",2,"background","#5829A6","border-radius","40px",3,"disabled","click"],[3,"ngModel","ngModelChange","click"],["fxLayout","column","fxFlex","90",2,"height","80vh",3,"fxFlexOrder","ngStyle"],["mat-icon-button","","style","margin: 1% auto;",4,"ngIf"],["id","list","fxLayoutAlign","center start","fxLayoutGap","20px",1,"student-list",3,"fxFlex","fxLayout"],["studentContainer",""],["rowHeight","3:2","full-width","","gutterSize","5px",3,"cols"],["relative","",3,"ngClass","colspan","rowspan",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["mat-icon-button","",2,"margin","1% auto"],["id","arrow_up","f-white","",3,"click"],["relative","",3,"ngClass","colspan","rowspan"],["fxFill","","class","no-camera","fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","5px",4,"ngIf"],["fxLayout","column",1,"videodiv"],["id","webcamvideo","height","100%","width","100%","autoplay","",1,"videocol"],["fxFill","","fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","5px",1,"no-camera"],[1,"avatar",3,"ngStyle"],["f-white",""],["title-white14-400",""],["fxLayout","row","fxLayoutAlign","center center",3,"ngClass"],["f-white","","large","",2,"vertical-align","middle"],[2,"height","100%","width","90%",3,"module","selectUser","std","mediaStreamObj","actionEmitter"],["id","arrow_down","f-white","",3,"click"]],template:function(e,t){1&e&&(d.Xb(0,"app-top-bar",0),d.fc("toggleMenu",function(e){return t.Menu(e)})("refreshSession",function(){return t.tryAgain()}),d.Wb(),d.Nc(1,ae,7,10,"div",1)),2&e&&(d.qc("room",t.room)("duration",t.duration)("action",d.tc(5,re))("role","moderator"),d.Fb(1),d.qc("ngIf",t.faceDataState))},directives:[P.a,u.n,S.f,S.e,u.o,x.c,S.a,S.b,y.a,M.a,x.b,L.a,j.a,o.s,o.v,S.d,S.g,F.a,u.m,F.c,u.l,x.a,S.h,I.a],styles:[".student-list[_ngcontent-%COMP%]{height:calc(100vh - 80px);overflow-y:auto;padding:10px}.student-list[_ngcontent-%COMP%]   .student-preview[_ngcontent-%COMP%]{box-sizing:border-box;background:hsla(0,0%,100%,.1)}.bubble[_ngcontent-%COMP%]{color:#fff;border-radius:50%;height:30px;width:30px;display:flex;align-items:center;justify-content:center}.Low[_ngcontent-%COMP%]{background-color:#ff275a}.Medium[_ngcontent-%COMP%]{background-color:#ff8b4c}.High[_ngcontent-%COMP%]{background-color:#3ab147}.screenshare-box[_ngcontent-%COMP%]{background-color:#fff;padding:5px;border-radius:4px;height:450px;width:400px}.panel[_ngcontent-%COMP%]{margin:16px;height:auto}.panel[_ngcontent-%COMP%], .panel[_ngcontent-%COMP%]   .panel-head[_ngcontent-%COMP%]{border-radius:10px 10px 0 0}.panel[_ngcontent-%COMP%]   .panel-head[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.1);padding:10px}.panel[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{height:100%!important;width:100%!important}.redDot[_ngcontent-%COMP%]{color:red}.greenDot[_ngcontent-%COMP%]{color:green}mat-grid-tile[_ngcontent-%COMP%]{border:1px solid rgba(86,216,225,.16862745098039217);background:rgba(0,0,0,.4)}mat-grid-list[_ngcontent-%COMP%]{width:100%}.screen-div[_ngcontent-%COMP%]{max-width:70%;height:calc(100vh - 134px);position:relative;margin-right:10px}.screen-div[_ngcontent-%COMP%]   .title-name[_ngcontent-%COMP%]{padding:8px;border-top-right-radius:5px;border-top-left-radius:5px;font-size:16px;text-align:center;position:absolute;bottom:0;background:rgba(0,0,0,.43137254901960786);color:#fff}.single-grid[_ngcontent-%COMP%]{display:block;width:70%;margin:auto}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto;grid-gap:10px;padding:10px}.grid-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center;padding:5px;font-size:30px;grid-row-start:1;grid-row-end:1;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.item1[_ngcontent-%COMP%]{grid-row-start:1!important;grid-row-end:3!important;grid-column-start:1;grid-column-end:3}.engagement[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:12px;font-weight:400;border-radius:50%;height:14px;width:14px;position:absolute;line-height:24px;z-index:10;top:5px;right:5px}.full-screen-div[_ngcontent-%COMP%]{width:70%;margin:0 auto}.single-view[_ngcontent-%COMP%]   .videodiv[_ngcontent-%COMP%]{height:100%;width:99%}mat-grid-tile[_ngcontent-%COMP%]   .video-title[_ngcontent-%COMP%]{position:absolute;top:5px;padding:5px;background-color:rgba(66,63,63,.58);color:#fff}mat-card[_ngcontent-%COMP%]{background-color:#fff!important}#webcamvideo[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}.avatar[_ngcontent-%COMP%]{height:60px;width:60px;border-radius:50%;display:flex;text-align:center;align-items:center;justify-content:center;z-index:5}#arrow_down[_ngcontent-%COMP%]{margin:auto;transform:rotate(90deg);-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg)}#arrow_up[_ngcontent-%COMP%], #exit_to_app[_ngcontent-%COMP%]{margin:auto;transform:rotate(270deg);-webkit-transform:rotate(270deg);-moz-transform:rotate(270deg)}[_nghost-%COMP%]{border-radius:30px}#list[_ngcontent-%COMP%]{scroll-behavior:smooth;min-width:inherit!important}.example-margin[_ngcontent-%COMP%]{margin:0 10px}"]}),se),le=i("c8Cp"),ue=i("iQ2w"),de=i("TU8p"),me=i("Xa2L");function ge(e,t){1&e&&(d.Xb(0,"div",24),d.Sb(1,"mat-spinner",25),d.Wb()),2&e&&(d.Fb(1),d.qc("diameter",30))}function be(e,t){if(1&e){var n=d.Yb();d.Vb(0),d.Xb(1,"button",26),d.fc("click",function(){d.Fc(n);var e=t.$implicit,i=d.jc();return e.status=!e.status,i.mainActions(e)}),d.Xb(2,"mat-icon",27),d.Pc(3),d.Wb(),d.Wb(),d.Ub()}if(2&e){var i=t.$implicit;d.Fb(1),d.qc("matTooltip",i.status?i.name:i.nameop||""),d.Fb(1),d.qc("id",i.icon)("inline",!0),d.Fb(1),d.Qc(i.status?i.icon:i.iconop)}}var he,fe=function(){return["/profile/dashboard/personal"]},pe=function(){return{position:"absolute",top:"30px",right:"2px"}},ve=function(){return{marginRight:"3%"}},ye=function(){return{position:"absolute",bottom:"30px"}},Se=((he=function(){function e(t,n,i,o,a,r,s){c(this,e),this.route=t,this.ss=n,this.router=i,this.dialog=o,this.sl=a,this.as=r,this.utility=s,this.startSession=new d.o,this.recordingEnabled=!1,this.recordMeeting=!1,this.startMeet=!0,this.action=!0,this.permission={audio:!0,video:!0,screen:!1},this.video={loadstart:!0,buffering:!1,canplay:!1},this.actions=[{name:"Mute",nameop:"Unmute",value:"audio",icon:"mic",status:!0,iconop:"mic_off"},{name:"Stop Camera",value:"video",icon:"videocam",nameop:"Share Camera",status:!0,iconop:"videocam_off"}]}return s(e,[{key:"mainActions",value:function(e){switch(e.value){case"video":this.permission.video=e.status,mediaDev.toggleVideo(e.status),this.ss.socket.emit("preview-toggle-video",{status:e.status});break;case"audio":this.permission.audio=e.status,mediaDev.toggleAudio(e.status),this.ss.socket.emit("preview-toggle-audio",{status:e.status})}}},{key:"ngOnInit",value:function(){var e,t=this;this.ss.generateSocket(),this.sl.load("janus").then(function(e){t.sl.load("user").then(function(n){e[0].loaded&&n[0].loaded&&(mediaDev.on("media",function(e){return Object(k.b)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.vidElement=document.getElementById("video"),this.vidElement&&(n=[e,!0],this.vidElement.srcObject=n[0],this.vidElement.muted=n[1]),t.next=4,mediaDev.availableDevices;case 4:this.availableMediaDevices=t.sent;case 5:case"end":return t.stop()}},t,this)}))}),mediaDev.on("media-error",function(e){t.router.navigate(["/auth"])}),mediaDev.start())})}),this.recordingEnabled=null===(e=JSON.parse(localStorage.getItem("userPlanDetails")||"[]"))||void 0===e?void 0:e.recording}},{key:"ngAfterViewInit",value:function(){var e=this;this.route.queryParams.subscribe(function(t){t&&(e.params=t)}),this.OS=this.getOS()}},{key:"getOS",value:function(){var e=window.navigator.platform,t=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)?t="Mac":-1!==["Win32","Win64","Windows","WinCE"].indexOf(e)&&(t="Windows"),t}},{key:"start",value:function(){var e=this;setTimeout(function(){e.recordMeeting&&e.recordCall(),e.startSession.emit(e.permission)},1e3)}},{key:"loadedMetaData",value:function(e){this.startMeet=!1}},{key:"onLoadStart",value:function(e){e&&(this.video.loadstart=!1)}},{key:"configMediaoptions",value:function(){var e=this;this.availableMediaDevices&&(this.dialogOpener=this.dialog.open(O.a,{data:{devicesList:this.availableMediaDevices},panelClass:"configDevice-dialog-container",hasBackdrop:!0,width:"23%",height:"auto",backdropClass:"backdropBackground"}).afterClosed().subscribe(function(t){e.dialogOpener=null,t.result&&mediaDev.deltaMedia(t.result.label,t.result.id)}))}},{key:"recordCall",value:function(){this.ss.socket.emit("create-mosaic",{roomid:this.params.roomid,uuid:this.params.id})}},{key:"stopStream",value:function(){mediaDev.stop()}}]),e}()).\u0275fac=function(e){return new(e||he)(d.Rb(m.a),d.Rb(b.a),d.Rb(m.b),d.Rb(r.b),d.Rb(l.a),d.Rb(a.a),d.Rb(f.a))},he.\u0275cmp=d.Lb({type:he,selectors:[["app-preview"]],outputs:{startSession:"startSession"},decls:37,vars:13,consts:[["fxLayoutAlign"," center","fxFill",""],["src","assets/images/previewBackground.jpg","id","previewBackground","height","100%","width","100%"],["id","content","fxLayout","row"],["fxFlex","20"],[2,"margin-left","24px","margin-top","16px"],["src","assets/MonetLiveWhite.png","height","50px","pointer","",1,"logo",3,"routerLink","click"],["fxFlex","60","fxLayoutAlign","center center"],[1,"preview-container-card"],[1,"video-container",2,"text-align","center"],[2,"height","300px","width","400px","margin","auto","position","relative"],["class","spinner","fxLayout","row","fxLayoutAlign","center center","style","min-height: 100%; height: 100%; position: absolute; width: 100%",4,"ngIf"],["id","video","autoplay","","muted","","height","300px","width","400px",2,"border-radius","10px",3,"loadedmetadata","loadstart"],["fxLayout","column","fxLayoutAlign","space-between","fxFill","",2,"width","auto","height","100%","border-radius","10px","position","absolute","margin","16px","top","0","left","0","z-index","10"],["fxLayout","row","fxLayoutAlign","end center","fxFlex","20",1,"settings-container",3,"ngStyle"],["mat-mini-fab","","color","primary",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item",""],["mat-menu-item","",3,"disabled","click"],["fxLayout","row","fxLayoutGap","16px","fxLayoutAlign","center center","fxFlex","20",1,"audio-video-button-container",3,"ngStyle"],[4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","center center",1,"meeting-link-container"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"record-meeting-container"],[3,"disabled","click"],["fxLayout","row","fxLayoutAlign","center center",1,"spinner",2,"min-height","100%","height","100%","position","absolute","width","100%"],[3,"diameter"],["mat-icon-button","","mat-mini-fab","","color","primary",3,"matTooltip","click"],[2,"font-size","20px",3,"id","inline"]],template:function(e,t){if(1&e&&(d.Xb(0,"div",0),d.Sb(1,"img",1),d.Wb(),d.Xb(2,"div",2),d.Xb(3,"div",3),d.Xb(4,"div",4),d.Xb(5,"img",5),d.fc("click",function(){return t.stopStream()}),d.Wb(),d.Wb(),d.Wb(),d.Xb(6,"div",6),d.Xb(7,"div",7),d.Xb(8,"div",8),d.Xb(9,"div",9),d.Nc(10,ge,2,1,"div",10),d.Xb(11,"video",11),d.fc("loadedmetadata",function(e){return t.loadedMetaData(e)})("loadstart",function(e){return t.onLoadStart(e)}),d.Wb(),d.Xb(12,"div",12),d.Xb(13,"div",13),d.Xb(14,"button",14),d.Xb(15,"mat-icon"),d.Pc(16,"more_vert"),d.Wb(),d.Wb(),d.Xb(17,"mat-menu",null,15),d.Xb(19,"button",16),d.Xb(20,"mat-icon"),d.Pc(21,"feedback"),d.Wb(),d.Xb(22,"span"),d.Pc(23,"Feedback"),d.Wb(),d.Wb(),d.Xb(24,"button",17),d.fc("click",function(){return t.configMediaoptions()}),d.Xb(25,"mat-icon"),d.Pc(26,"settings"),d.Wb(),d.Xb(27,"span"),d.Pc(28,"Settings"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(29,"div",18),d.Nc(30,be,4,4,"ng-container",19),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(31,"div",20),d.Xb(32,"button",21),d.fc("click",function(){return t.start()}),d.Pc(33,"Start Meeting"),d.Wb(),d.Wb(),d.Xb(34,"div",22),d.Xb(35,"mat-checkbox",23),d.fc("click",function(){return t.recordMeeting=!t.recordMeeting}),d.Pc(36,"Record this call"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb()),2&e){var n=d.Dc(18);d.Fb(5),d.qc("routerLink",d.tc(9,fe)),d.Fb(5),d.qc("ngIf",(null==t.video?null:t.video.loadstart)||(null==t.video?null:t.video.buffering)),d.Fb(3),d.qc("ngStyle","Mac"===t.OS?d.tc(10,pe):d.tc(11,ve)),d.Fb(1),d.qc("matMenuTriggerFor",n),d.Fb(10),d.qc("disabled",!t.availableMediaDevices),d.Fb(5),d.qc("ngStyle","Mac"===t.OS?d.tc(12,ye):null),d.Fb(1),d.qc("ngForOf",t.actions),d.Fb(2),d.qc("disabled",t.startMeet),d.Fb(3),d.qc("disabled",!t.recordingEnabled)}},directives:[S.e,S.h,S.f,S.b,m.c,u.n,u.o,x.c,L.a,v.d,y.a,v.a,v.b,S.g,u.m,j.a,me.c,M.a],styles:[".preview-container-card[_ngcontent-%COMP%]{height:80%;width:60%;background-color:#fff;border-radius:10px}.video-container[_ngcontent-%COMP%]{height:60%;margin:16px}.meeting-link-container[_ngcontent-%COMP%]{height:20%;margin-left:16px;margin-right:16px;margin-bottom:16px}.custom-button[_ngcontent-%COMP%]{margin-top:16px;background-color:#1c5ba2;color:#fff;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border-style:none;border-radius:30px;padding:12px 24px}.record-meeting-container[_ngcontent-%COMP%]{height:-webkit-max-content;height:-moz-max-content;height:max-content;margin-left:24px;margin-right:16px;margin-bottom:16px}.audio-video-button-container[_ngcontent-%COMP%]{width:100%}.mat-raised-button[_ngcontent-%COMP%]{margin-top:12px;border-radius:35px}#previewBackground[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:calc(100vw);height:calc(100vh);min-width:calc(100vw);min-height:calc(100vh)}#content[_ngcontent-%COMP%]{height:100vh;width:100vw;position:absolute;top:0;left:0}#video[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}.mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .spinner[_ngcontent-%COMP%]     .mat-progress-spinner circle{stroke:#3f51b5!important}"]}),he),xe=i("f0Cb"),ke=i("kmnG"),we=i("qFsG"),_e=i("n1FK"),Oe=i("iadO"),Ce=["video"],Pe=function(e){return{opacity:e}};function Me(e,t){if(1&e&&d.Sb(0,"video",17),2&e){var n=d.jc(2);d.qc("ngStyle",d.uc(1,Pe,!0===n.fullScreen?0:1))}}function Le(e,t){if(1&e){var n=d.Yb();d.Xb(0,"app-chat",22),d.fc("badgeCount",function(e){return d.Fc(n),d.jc(3).msgCount=e})("messagePanelOpen",function(e){return d.Fc(n),d.jc(3).messagePanel=e})("messagePanelClose",function(e){d.Fc(n);var t=d.jc(3);return t.messagePanel=e,t.receivedMessageEvent(e)}),d.Wb()}if(2&e){var i=d.jc(3);d.qc("param",i.param)("messagePanel",i.messagePanel)("role","teacher")("students",i.students)}}var je=function(){return{background:"#252030"}},Fe=function(){return{background:"rgba(0,0,0,0.4)"}},Ie=function(){return["side-nav"]},Ae=function(){return["message-panel"]};function Xe(e,t){if(1&e&&(d.Xb(0,"div",18),d.Sb(1,"app-call-sidenav",19),d.Xb(2,"div",20),d.Nc(3,Le,1,4,"app-chat",21),d.Wb(),d.Wb()),2&e){var n=d.jc(2);d.Fb(1),d.qc("ngStyle",!0===n.fullScreen?d.tc(8,je):d.tc(9,Fe))("moduleName","proctor")("ngClass",d.tc(10,Ie))("students",n.students)("score",n.scoreVal),d.Fb(1),d.qc("ngClass",d.tc(11,Ae))("hidden",!n.messagePanel),d.Fb(1),d.qc("ngIf",n.param)}}function We(e,t){if(1&e){var n=d.Yb();d.Vb(0),d.Xb(1,"button",34),d.fc("click",function(){d.Fc(n);var e=t.$implicit,i=d.jc(3);return e.status=!e.status,i.mainActions(e)}),d.Xb(2,"mat-icon",35),d.Pc(3),d.Wb(),d.Wb(),d.Ub()}if(2&e){var i=t.$implicit,o=d.jc(3);d.Fb(1),d.qc("ngClass","leave"===i.value?"leave_button":"other_buttons")("matTooltip",i.status?i.name:i.nameop||"")("disabled",!1===o.btnDisabled(i)),d.Fb(1),d.Kc("color",!1===o.btnDisabled(i)?"grey":""),d.rc("matBadge","Chat"===i.name?o.msgCount:""),d.qc("matTooltip","screen"===i.value&&i.status?i.nameop:"")("matBadgeHidden",o.msgCount<=0||o.messagePanel)("inline",!0),d.Fb(1),d.Rc(" ",i.status?i.icon:i.iconop," ")}}function Re(e,t){if(1&e&&(d.Xb(0,"button",36),d.Xb(1,"mat-icon",30),d.Pc(2,"publish"),d.Wb(),d.Wb()),2&e){d.jc();var n=d.Dc(14);d.qc("matMenuTriggerFor",n)}}function qe(e,t){if(1&e){var n=d.Yb();d.Vb(0),d.Xb(1,"button",37),d.fc("click",function(e){return d.Fc(n),d.jc(3).publishAssignment(e)}),d.Xb(2,"mat-icon",38),d.Pc(3,"assignment"),d.Wb(),d.Xb(4,"span",38),d.Pc(5),d.Wb(),d.Wb(),d.Ub()}if(2&e){var i=t.$implicit;d.Fb(1),d.rc("id",i.fileId),d.Fb(4),d.Qc(i.title)}}function De(e,t){if(1&e){var n=d.Yb();d.Vb(0),d.Xb(1,"div",23),d.Xb(2,"span",24),d.Pc(3),d.Wb(),d.Xb(4,"button",25),d.fc("click",function(){d.Fc(n);var e=d.jc(2);return e.unfoldAction=!e.unfoldAction,e.SidePanel()}),d.Xb(5,"mat-icon",26),d.Pc(6),d.Wb(),d.Wb(),d.Wb(),d.Xb(7,"div",27),d.Nc(8,We,4,10,"ng-container",28),d.Xb(9,"button",29),d.Xb(10,"mat-icon",30),d.Pc(11,"settings"),d.Wb(),d.Wb(),d.Nc(12,Re,3,1,"button",31),d.Xb(13,"mat-menu",32,33),d.Nc(15,qe,6,2,"ng-container",28),d.Wb(),d.Wb(),d.Ub()}if(2&e){var i=d.jc(2),o=d.Dc(2);d.Fb(1),d.qc("matTooltip","Call duration"),d.Fb(2),d.Qc(null==i.duration?null:i.duration.time),d.Fb(1),d.qc("matTooltip",i.unfoldAction?"Expand":"Collapse")("disabled",!i.fullScreen),d.Fb(1),d.qc("inline",!0),d.Fb(1),d.Qc(i.unfoldAction?"unfold_less":"unfold_more"),d.Fb(2),d.qc("ngForOf",i.actions),d.Fb(1),d.qc("matMenuTriggerFor",o),d.Fb(3),d.qc("ngIf",i.assigmentList.length>0),d.Fb(3),d.qc("ngForOf",i.assigmentList)}}var Ee=function(){return{left:"18vw",width:"82vw"}},Ne=function(){return{left:"0vw",width:"100vw"}},Ue=function(){return["invite","link"]};function Te(e,t){if(1&e){var n=d.Yb();d.Xb(0,"div",8),d.Xb(1,"div",9),d.Xb(2,"video",10),d.fc("loadstart",function(e){return d.Fc(n),d.jc().onLoadStart(e)}),d.Wb(),d.Nc(3,Me,1,3,"video",11),d.Wb(),d.Xb(4,"div",12),d.Nc(5,Xe,4,12,"div",13),d.Xb(6,"div",14),d.Xb(7,"app-student-video",15),d.fc("moderatorMediaEmit",function(e){return d.Fc(n),d.jc().getModeratorStream(e)})("screenShareMediaEmit",function(e){return d.Fc(n),d.jc().getScreenShare(e)})("screenShareStat",function(e){return d.Fc(n),d.jc().getStat(e)})("studentEmit",function(e){return d.Fc(n),d.jc().students=e})("resetConfigOptions",function(e){return d.Fc(n),d.jc().configMediaSettings=e})("stopScreenShare",function(){d.Fc(n);var e=d.jc();return e.shareScreen(e.param)}),d.Wb(),d.Wb(),d.Wb(),d.Nc(8,De,16,10,"ng-container",16),d.Wb()}if(2&e){var i=d.jc();d.Fb(2),d.qc("ngClass",!0===i.dispSideNav?"videocol":"screenShare")("ngStyle",d.uc(14,Pe,!0===i.fullScreen?0:1)),d.Fb(1),d.qc("ngIf",i.checkSS),d.Fb(2),d.qc("ngIf",i.dispSideNav),d.Fb(2),d.qc("ngStyle",!0===i.dispSideNav?d.tc(16,Ee):d.tc(17,Ne))("moderatorObj",i.moderatorObj)("configMediaSettings",i.configMediaSettings)("configurations",i.configurations)("module","proctor")("action",d.tc(18,Ue))("actionObj",i.actionObj)("room",i.room)("Duration",i.duration),d.Fb(1),d.qc("ngIf",i.session)}}function Be(e,t){if(1&e){var n=d.Yb();d.Xb(0,"div",39),d.Xb(1,"app-preview",40),d.fc("startSession",function(e){return d.Fc(n),d.jc().startSession(e)}),d.Wb(),d.Wb()}}var Ve,ze=((Ve=function(){function e(t,n,i,o,a,r,s,l,u,d,m,g){c(this,e),this.fb=t,this.route=n,this.api=i,this.dialog=o,this.sl=a,this.router=r,this.httpClient=s,this.datePipe=l,this.ss=u,this.bhvSub=d,this.utility=m,this._snackBar=g,this.unfoldAction=!1,this.checkSS=!1,this.moderatorObj={instance:"",stream:""},this.fullScreen=!1,this.dispSideNav=!0,this.date=new Date,this.loaded=!1,this.scoreVal=1,this.dispFilterBottom=!1,this.scores=[{name:"Session",value:0},{name:"10 Seconds",value:10},{name:"Actual",value:1}],this.muteAll={name:"Mute All",nameop:"Unmute All",value:"muteall",icon:"mic",status:!1,iconop:"mic_off"},this.students=[],this.stream={},this.session=!1,this.msgCount=0,this.flexValue="243px",this.video_spinner={loadstart:!0,buffering:!1,canplay:!1},this.duration={time:"00:00:00",duration:0},this.actionObj={name:"",value:!1},this.actions=[{name:"Mute",nameop:"Unmute",value:"audio",icon:"mic",status:!1,iconop:"mic_off"},{name:"Stop Camera",value:"video",icon:"videocam",nameop:"Share Camera",status:!1,iconop:"videocam_off"},{name:"Leave Room",value:"leave",status:!1,icon:"call_end",iconop:"call_end"},{name:"Stop Sharing",value:"screen",nameop:"Share Screen",icon:"stop_screen_share",status:!1,iconop:"screen_share"},{name:"Chat",value:"chat",icon:"speaker_notes_off",status:!1,iconop:"message"}],this.messagePanel=!1,this.assigmentList=[],this.btnDisabled=function(e){if("chat"===e.value)return JSON.parse(String(localStorage.getItem("chat")))},this.studentFilter=this.fb.group({duration:["1"]}),this.permission=this.fb.group({audio:[!0],video:[!0],screen:[!1]})}return s(e,[{key:"getRoom",value:function(e){var t=this;this.api.getApi("getInviteRoom?roomid="+e).subscribe(function(e){e&&(t.room=e.response)})}},{key:"muteAllParticipants",value:function(e){var t;console.log(e),this.muteAll.status=!this.muteAll.status,t=["muteRoom",this.muteAll.status],this.actionObj.name=t[0],this.actionObj.value=t[1],this.actionObj=Object.assign({},this.actionObj),this.actions[0].status=!this.muteAll.status}},{key:"uploadAssignment",value:function(e){for(var t=this,n=function(n){var i=e.target.files[n],o=new FormData;o.append("files",i),t.api.postApi("createAssignment?roomId="+t.roomId,o).subscribe(function(e){e.error||t.assigmentList.push({fileName:i.name,title:e.assignment.title,fileId:e.assignment._id})})},i=0;i<e.target.files.length;i++)n(i);this._snackBar.open("Assignment uploaded","Ok",{horizontalPosition:"end",verticalPosition:"bottom"}),console.log("Assignment list",this.assigmentList)}},{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.subscribe(function(t){t&&(e.param=t,e.teacherID=t.id,e.roomId=t.roomid,e.getRoom(t.roomid),e.getUsers(t.roomid),e.link=window.location.href.split("#")[0]+"#/student/login?roomid="+e.param.roomid+"&room="+e.param.room,e.ss.generateSocket(),e.sl.load("janus").then(function(t){e.sl.load("user").then(function(n){t[0].loaded&&n[0].loaded&&(e.loaded=!0)})}))}),this.bhvSub.screenShare$.subscribe(function(t){""!==t&&(e.checkSS=t,e.actions[3].status=t,e.dispSideNav=t&&!e.fullScreen?!t:!t||!e.fullScreen||t)}),this.bhvSub.fullScreen$.subscribe(function(t){""!==t&&(e.fullScreen=t||!1)})}},{key:"ngOnDestroy",value:function(){this.students&&(localStorage.setItem("students",JSON.stringify(this.students)),localStorage.setItem("callDetails",JSON.stringify(this.duration))),clearInterval(this.interval)}},{key:"getUsers",value:function(e){this.api.getApi("user_list?id="+e)}},{key:"mainActions",value:function(e){var t;switch(t=[e.value,e.status],this.actionObj.name=t[0],this.actionObj.value=t[1],e.value){case"screen":this.actionObj=Object.assign({},this.actionObj),this.bhvSub.obScreenShare(!0);break;case"video":case"audio":case"leave":this.actionObj=Object.assign({},this.actionObj);break;case"chat":this.check(e.status);break;case"settings":this.actionObj=Object.assign({},this.actionObj)}}},{key:"toggleView",value:function(e){var t;t=["toggle-view",e],this.actionObj.name=t[0],this.actionObj.value=t[1],this.actionObj=Object.assign({},this.actionObj)}},{key:"shareScreen",value:function(e){console.log(e)}},{key:"getStudents",value:function(e){this.students=e}},{key:"startSession",value:function(e){var t=this;if(this.configurations=e,this.actions.map(function(t){e.hasOwnProperty(t.value)&&(t.status=e[t.value])}),e.screen&&this.shareScreen(this.param),0===this.duration.duration){var n=JSON.parse(localStorage.getItem("userPlanDetails")||"[]").meetingDuration;this.interval=setInterval(function(){t.duration.duration++,t.duration.time=t.datePipe.transform(1e3*t.duration.duration,"H:mm:ss","UTC")||"",t.duration.duration<60*n&&t.duration.duration===60*n-300?t.utility.notifyPermanent("Your Meeting is going to expire in 5 minutes.","Okay"):t.duration.duration===60*n&&(t.utility.notify("Call Ended. Duration limit reached !",""),t.actionObj=Object.assign("",{name:"endRoom",value:!0}))},1e3)}this.session=!0,setTimeout(function(){return t.dispFilterBottom=!0})}},{key:"check",value:function(e){this.messagePanel=e}},{key:"receivedMessageEvent",value:function(e){this.actions[4].status=e}},{key:"getModeratorStream",value:function(e){var t,n=document.getElementById("moderatorvideo");n&&(this.moderatorObj.stream=e,t=[300,300,!0,!0,e],n.width=t[0],n.height=t[1],n.muted=t[2],n.autoplay=t[3],n.srcObject=t[4])}},{key:"getScreenShare",value:function(e){setTimeout(function(){var t,n=document.getElementById("screenShareVideo");n&&(t=[300,300,!1,!0,e],n.width=t[0],n.height=t[1],n.muted=t[2],n.autoplay=t[3],n.srcObject=t[4])},1e3)}},{key:"onLoadStart",value:function(e){e&&(this.video_spinner.loadstart=!0)}},{key:"SidePanel",value:function(){var e=0,t=this.unfoldAction?18:0,n=this.unfoldAction?18:0,i=this.unfoldAction?82:100,o=document.getElementById("sideNav"),a=document.getElementById("video_streams");if(this.unfoldAction)var r=setInterval(function(){o.style.width=t--+"vw",a.style.left=n--+"vw",a.style.width=i+e+++"vw",t<0&&clearInterval(r)},1);else var s=setInterval(function(){o.style.width=t+++"vw",a.style.left=n+++"vw",a.style.width=i-e+++"vw",t>18&&clearInterval(s)},1)}},{key:"getStat",value:function(e){this.actions[3].nameop="object"==typeof e?"Self"===e.type?"You are sharing your screen":"Screen is being Shared by "+e.Name:e}},{key:"publishAssignment",value:function(e){this.ss.socket.emit("publish-assignment",{id:e.target.id,roomId:this.roomId}),this.assigmentList=this.assigmentList.filter(function(t){return t.fileId!==e.target.id})}}]),e}()).\u0275fac=function(e){return new(e||Ve)(d.Rb(o.g),d.Rb(m.a),d.Rb(a.a),d.Rb(r.b),d.Rb(l.a),d.Rb(m.b),d.Rb(g.b),d.Rb(u.e),d.Rb(b.a),d.Rb(h.a),d.Rb(f.a),d.Rb(p.b))},Ve.\u0275cmp=d.Lb({type:Ve,selectors:[["app-call"]],viewQuery:function(e,t){var n;1&e&&d.Uc(Ce,1),2&e&&d.Cc(n=d.gc())&&(t.video=n.first)},features:[d.Eb([a.a,l.a,u.e])],decls:31,vars:6,consts:[["class","moderatorVid","full-height","",4,"ngIf"],[1,"popup-upload"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["type","file","multiple","","accept","application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",1,"file-upload",2,"display","none",3,"change"],["fileUpload",""],["fxLayout","row","full-height","",4,"ngIf"],["full-height","",1,"moderatorVid"],["fxLayoutAlign"," center","fxFill",""],["id","moderatorvideo","height","100%","width","100%","autoplay","",3,"ngClass","ngStyle","loadstart"],["id","screenShareVideo","class","videocol","height","100%","width","100%","autoplay","",3,"ngStyle",4,"ngIf"],["fxLayout","row"],["fxLayout","column","fxFlex","10%",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center end"],["id","video_streams",3,"ngStyle","moderatorObj","configMediaSettings","configurations","module","action","actionObj","room","Duration","moderatorMediaEmit","screenShareMediaEmit","screenShareStat","studentEmit","resetConfigOptions","stopScreenShare"],[4,"ngIf"],["id","screenShareVideo","height","100%","width","100%","autoplay","",1,"videocol",3,"ngStyle"],["fxLayout","column","fxFlex","10%"],["id","sideNav","full-width","",2,"width","18vw","height","calc(100vh)",3,"ngStyle","moduleName","ngClass","students","score"],[3,"ngClass","hidden"],[3,"param","messagePanel","role","students","badgeCount","messagePanelOpen","messagePanelClose",4,"ngIf"],[3,"param","messagePanel","role","students","badgeCount","messagePanelOpen","messagePanelClose"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"float-timer",3,"matTooltip"],["title-white18-200",""],["mat-icon-button","","title-white18-200","","id","unfold",3,"matTooltip","disabled","click"],[2,"font-size","30px",3,"inline"],["fxLayout","row","fxLayoutGap","30px",1,"float-panel"],[4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Settings",3,"matMenuTriggerFor"],[1,"other_buttons"],["mat-icon-button","","matTooltip","Publish assignment","style","line-height: 60px;",3,"matMenuTriggerFor",4,"ngIf"],[2,"height","auto"],["pAssig","matMenu"],["mat-icon-button","",3,"ngClass","matTooltip","disabled","click"],["matBadgeColor","accent","matBadgeSize","small",3,"matTooltip","matBadgeHidden","inline","matBadge"],["mat-icon-button","","matTooltip","Publish assignment",2,"line-height","60px",3,"matMenuTriggerFor"],["mat-menu-item","",3,"id","click"],[2,"pointer-events","none"],["fxLayout","row","full-height",""],[3,"startSession"]],template:function(e,t){if(1&e){var n=d.Yb();d.Nc(0,Te,9,19,"div",0),d.Xb(1,"mat-menu",1,2),d.Xb(3,"button",3),d.fc("click",function(){return t.toggleView(!0)}),d.Xb(4,"mat-icon"),d.Pc(5,"grid_on"),d.Wb(),d.Xb(6,"span"),d.Pc(7,"Grid View"),d.Wb(),d.Wb(),d.Xb(8,"button",3),d.fc("click",function(){return t.toggleView(!1)}),d.Xb(9,"mat-icon"),d.Pc(10,"fullscreen"),d.Wb(),d.Xb(11,"span"),d.Pc(12,"Fullscreen"),d.Wb(),d.Wb(),d.Xb(13,"button",4),d.fc("click",function(e){return t.muteAllParticipants(e)}),d.Xb(14,"mat-icon"),d.Pc(15),d.Wb(),d.Xb(16,"span"),d.Pc(17),d.Wb(),d.Wb(),d.Xb(18,"button",4),d.fc("click",function(){return t.configMediaSettings=!0}),d.Xb(19,"mat-icon"),d.Pc(20,"build"),d.Wb(),d.Xb(21,"span"),d.Pc(22,"Configure"),d.Wb(),d.Wb(),d.Xb(23,"button",4),d.fc("click",function(){return d.Fc(n),d.Dc(29).click()}),d.Xb(24,"mat-icon"),d.Pc(25,"cloud_upload"),d.Wb(),d.Xb(26,"span"),d.Pc(27,"Upload Assignment"),d.Wb(),d.Wb(),d.Xb(28,"input",5,6),d.fc("change",function(e){return t.uploadAssignment(e)}),d.Wb(),d.Wb(),d.Nc(30,Be,2,0,"div",7)}2&e&&(d.qc("ngIf",t.session),d.Fb(3),d.qc("disabled",t.checkSS||t.actions[3].status),d.Fb(5),d.qc("disabled",t.checkSS||t.actions[3].status),d.Fb(7),d.Qc(t.muteAll.status?t.muteAll.iconop:t.muteAll.icon),d.Fb(2),d.Qc(t.muteAll.status?t.muteAll.nameop:t.muteAll.name),d.Fb(13),d.qc("ngIf",!t.session))},directives:[u.n,v.a,v.b,y.a,S.e,S.h,u.l,x.a,u.o,x.c,S.f,ce,S.b,le.a,ue.a,S.g,M.a,L.a,u.m,v.d,de.a,Se],styles:[".filter-bottom[_ngcontent-%COMP%]{position:absolute;bottom:7px}.filter-bottom-screenshare[_ngcontent-%COMP%]{position:absolute;bottom:4px;left:0;width:115px}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#1c5ba2;color:#fff}.message[_ngcontent-%COMP%]{background-color:#eee;color:#777;padding:10px;border-radius:3px;max-height:300px;overflow-y:auto}.message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1c5ba2;text-decoration:none}.intro[_ngcontent-%COMP%]{height:calc(100% - 72px)}.intro[_ngcontent-%COMP%]   .intro-box[_ngcontent-%COMP%]{padding:20px;width:500px;border-radius:5px;background-color:#eee}.intro[_ngcontent-%COMP%]   .intro-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#777}.intro[_ngcontent-%COMP%]   .intro-box[_ngcontent-%COMP%]   .start-message[_ngcontent-%COMP%]{width:100%;text-align:left;padding:10px;border-radius:3px;background-color:rgba(28,91,162,.09);color:#1c5ba2}  .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background-color:#1c5ba2}  .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:rgba(28,91,162,.35)}  .mat-icon-button{height:auto!important}.side-nav[_ngcontent-%COMP%]{height:calc(100vh - 43px);overflow-y:auto}.message-btn[_ngcontent-%COMP%]{position:absolute;right:20px;bottom:20px}.message-panel[_ngcontent-%COMP%]{position:fixed;right:10px;bottom:0;height:500px;width:300px;background:#fff;z-index:20}.moderatorVid[_ngcontent-%COMP%]{position:relative}#sideNav[_ngcontent-%COMP%]{left:0}#sideNav[_ngcontent-%COMP%], #video_streams[_ngcontent-%COMP%]{position:absolute;top:0}.leave_button[_ngcontent-%COMP%]{background:#e71c31;height:60px;width:60px;border-radius:50px;font-size:35px;line-height:55px}.other_buttons[_ngcontent-%COMP%]{height:50px;width:50px;font-size:40px;line-height:55px}.screenShare[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:250px;height:170px;margin-left:2%;display:none}.screenShare[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{background-color:#777}#moderatorvideo[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}#screenShareVideo[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:-1}#unfold[_ngcontent-%COMP%]{transform:rotate(270deg);-webkit-transform:rotate(270deg);-moz-transform:rotate(270deg)}.popup-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#775fee;height:-webkit-max-content!important;height:-moz-max-content!important;height:max-content!important}  .mat-menu-content:not(:empty){padding:16px!important;height:auto!important;overflow:hidden;padding:0!important}  .mat-menu-panel{height:auto!important}"]}),Ve),Ye=i("FpXt"),Ge=i("sOF7"),He=i("jaxi"),Je=i("UXJo"),$e=i("4GZO"),Qe=i("1jcm"),Ke=i("ioy8"),Ze=i("folJ"),et=i("rjSt"),tt=i("tbnV"),nt=i("nLfN"),it=i("vxfF"),ot=i("FKr1");i("8LU1"),i("FtGj"),i("XNiG"),i("xgIS"),i("VRyK"),i("pLZG"),i("lJxs"),i("7o/Q"),i("1G5W"),i("/uUt"),i("IzEk"),i("JX91"),i("Kj3r"),i("R1ws"),i("u47x"),i("cH1L");var at,rt,st=((at=s(function e(){c(this,e)})).\u0275fac=function(e){return new(e||at)},at.\u0275mod=d.Pb({type:at}),at.\u0275inj=d.Ob({imports:[[u.c,ot.j,nt.b,it.b],it.b,ot.j]}),at),ct=[{path:"",component:ze}],lt=((rt=s(function e(){c(this,e)})).\u0275fac=function(e){return new(e||rt)},rt.\u0275mod=d.Pb({type:rt}),rt.\u0275inj=d.Ob({imports:[[Ye.a,m.d.forChild(ct),u.c,ke.e,we.c,L.b,xe.b,o.x,$e.a,Ge.a,Ke.a,M.b,y.b,He.c,Je.b,r.e,Qe.b,Oe.h,de.b,st,_e.c,_e.e,_e.d,Ze.a,et.a,tt.PreviewModule,me.b,v.c]]}),rt)}}])}();