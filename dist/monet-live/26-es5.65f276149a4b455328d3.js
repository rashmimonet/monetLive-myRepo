!function(){function e(t,i){return(e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(t,i)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}function i(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"1jcm":function(i,a,n){"use strict";n.d(a,"a",function(){return D}),n.d(a,"b",function(){return M});var s=n("GU7r"),l=n("fXoL"),c=n("FKr1"),d=n("8LU1"),u=n("3Pt+"),g=n("R1ws"),h=n("u47x"),f=["thumbContainer"],m=["toggleBar"],b=["input"],p=function(){return{enterDuration:150}},v=["*"],y=new l.s("mat-slide-toggle-default-options",{providedIn:"root",factory:function(){return{disableToggleValue:!1}}}),S=0,k={provide:u.q,useExisting:Object(l.X)(function(){return D}),multi:!0},x=r(function e(t,i){o(this,e),this.source=t,this.checked=i}),C=r(function e(t){o(this,e),this._elementRef=t}),_=Object(c.C)(Object(c.x)(Object(c.y)(Object(c.z)(C)),"accent")),D=function(){var i=function(i){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&e(t,i)}(n,i);var a=t(n);function n(e,t,i,r,s,c){var d;return o(this,n),(d=a.call(this,e))._focusMonitor=t,d._changeDetectorRef=i,d.defaults=s,d._animationMode=c,d._onChange=function(e){},d._onTouched=function(){},d._uniqueId="mat-slide-toggle-"+ ++S,d._required=!1,d._checked=!1,d.name=null,d.id=d._uniqueId,d.labelPosition="after",d.ariaLabel=null,d.ariaLabelledby=null,d.change=new l.o,d.toggleChange=new l.o,d.tabIndex=parseInt(r)||0,d}return r(n,[{key:"required",get:function(){return this._required},set:function(e){this._required=Object(d.c)(e)}},{key:"checked",get:function(){return this._checked},set:function(e){this._checked=Object(d.c)(e),this._changeDetectorRef.markForCheck()}},{key:"inputId",get:function(){return(this.id||this._uniqueId)+"-input"}},{key:"ngAfterContentInit",value:function(){var e=this;this._focusMonitor.monitor(this._elementRef,!0).subscribe(function(t){"keyboard"===t||"program"===t?e._inputElement.nativeElement.focus():t||Promise.resolve().then(function(){return e._onTouched()})})}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"_onChangeEvent",value:function(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}},{key:"_onInputClick",value:function(e){e.stopPropagation()}},{key:"writeValue",value:function(e){this.checked=!!e}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this._changeDetectorRef.markForCheck()}},{key:"focus",value:function(e,t){t?this._focusMonitor.focusVia(this._inputElement,t,e):this._inputElement.nativeElement.focus(e)}},{key:"toggle",value:function(){this.checked=!this.checked,this._onChange(this.checked)}},{key:"_emitChangeEvent",value:function(){this._onChange(this.checked),this.change.emit(new x(this,this.checked))}},{key:"_onLabelTextChange",value:function(){this._changeDetectorRef.detectChanges()}}]),n}(_);return i.\u0275fac=function(e){return new(e||i)(l.Rb(l.l),l.Rb(h.h),l.Rb(l.h),l.cc("tabindex"),l.Rb(y),l.Rb(g.a,8))},i.\u0275cmp=l.Lb({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(e,t){var i;(1&e&&(l.Uc(f,1),l.Uc(m,1),l.Uc(b,1)),2&e)&&(l.Cc(i=l.gc())&&(t._thumbEl=i.first),l.Cc(i=l.gc())&&(t._thumbBarEl=i.first),l.Cc(i=l.gc())&&(t._inputElement=i.first))},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(e,t){2&e&&(l.ac("id",t.id),l.Gb("tabindex",t.disabled?null:-1)("aria-label",null)("aria-labelledby",null),l.Jb("mat-checked",t.checked)("mat-disabled",t.disabled)("mat-slide-toggle-label-before","before"==t.labelPosition)("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[l.Eb([k]),l.Cb],ngContentSelectors:v,decls:16,vars:18,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,t){if(1&e&&(l.pc(),l.Xb(0,"label",0,1),l.Xb(2,"div",2,3),l.Xb(4,"input",4,5),l.fc("change",function(e){return t._onChangeEvent(e)})("click",function(e){return t._onInputClick(e)}),l.Wb(),l.Xb(6,"div",6,7),l.Sb(8,"div",8),l.Xb(9,"div",9),l.Sb(10,"div",10),l.Wb(),l.Wb(),l.Wb(),l.Xb(11,"span",11,12),l.fc("cdkObserveContent",function(){return t._onLabelTextChange()}),l.Xb(13,"span",13),l.Pc(14,"\xa0"),l.Wb(),l.oc(15),l.Wb(),l.Wb()),2&e){var i=l.Dc(1),a=l.Dc(12);l.Gb("for",t.inputId),l.Fb(2),l.Jb("mat-slide-toggle-bar-no-side-margin",!a.textContent||!a.textContent.trim()),l.Fb(2),l.qc("id",t.inputId)("required",t.required)("tabIndex",t.tabIndex)("checked",t.checked)("disabled",t.disabled),l.Gb("name",t.name)("aria-checked",t.checked.toString())("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby),l.Fb(5),l.qc("matRippleTrigger",i)("matRippleDisabled",t.disableRipple||t.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.tc(17,p))}},directives:[c.s,s.a],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),i}(),w=function(){var e=r(function e(){o(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({}),e}(),M=function(){var e=r(function e(){o(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({imports:[[w,c.t,c.j,s.c],w,c.j]}),e}()},c03H:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var a=i("hM+/"),n=i("A9VE"),r=function(e){Object(a.a)(e,"InterfaceColorSet")&&(e.setFor("stroke",Object(n.b)("#000000")),e.setFor("fill",Object(n.b)("#2b2b2b")),e.setFor("primaryButton",Object(n.b)("#6794dc").lighten(-.2)),e.setFor("primaryButtonHover",Object(n.b)("#6771dc").lighten(-.2)),e.setFor("primaryButtonDown",Object(n.b)("#68dc75").lighten(-.2)),e.setFor("primaryButtonActive",Object(n.b)("#68dc75").lighten(-.2)),e.setFor("primaryButtonText",Object(n.b)("#FFFFFF")),e.setFor("primaryButtonStroke",Object(n.b)("#6794dc")),e.setFor("secondaryButton",Object(n.b)("#3b3b3b")),e.setFor("secondaryButtonHover",Object(n.b)("#3b3b3b").lighten(.1)),e.setFor("secondaryButtonDown",Object(n.b)("#3b3b3b").lighten(.15)),e.setFor("secondaryButtonActive",Object(n.b)("#3b3b3b").lighten(.15)),e.setFor("secondaryButtonText",Object(n.b)("#bbbbbb")),e.setFor("secondaryButtonStroke",Object(n.b)("#3b3b3b").lighten(-.2)),e.setFor("grid",Object(n.b)("#bbbbbb")),e.setFor("background",Object(n.b)("#000000")),e.setFor("alternativeBackground",Object(n.b)("#ffffff")),e.setFor("text",Object(n.b)("#ffffff")),e.setFor("alternativeText",Object(n.b)("#000000")),e.setFor("disabledBackground",Object(n.b)("#bbbbbb"))),Object(a.a)(e,"Scrollbar")&&(e.background.fillOpacity=.4,e.thumb.background.fillOpacity=.5)}},xOm6:function(e,t,i){"use strict";i.r(t),i.d(t,"StudentDetailModule",function(){return oe});var a,n,s=i("ofXK"),l=i("tyNb"),c=i("mrSG"),d=i("LRne"),u=i("cp0P"),g=i("AytR"),h=i("fXoL"),f=i("v0EB"),m=i("iiAa"),b=((a=function(){function e(t,i){o(this,e),this.as=t,this.utility=i,this.sessionData={overAllSessionMins:[],overAllSessionSeconds:[],userSessionMins:[],userSessionSeconds:[],mergedDataSecWise:[],mergedDataMinWise:[]},this.gap=0}return r(e,[{key:"getCompiledData",value:function(e,t,i){var a=this;i&&(this.gap=(new Date(i.video_start).getTime()-new Date(t[0].createdAt).getTime())/1e3),e=e.map(function(e,t){return e.segment=t+1,e}),this.sessionData.overAllSessionSeconds=this.findClosestDate(t[0].createdAt,t[t.length-1].createdAt,e),this.sessionData.overAllSessionMins=this.secToMin_overAll(e),this.sessionData.userSessionSeconds=t,this.sessionData.userSessionMins=this.secToMin_user(t),this.sessionData.mergedDataSecWise=this.sessionData.overAllSessionSeconds.map(function(e,t){return Object.assign({},e,a.sessionData.userSessionSeconds[t])}).filter(function(e){if(e.createdAt)return e}),this.sessionData.mergedDataMinWise=this.equaliseMin_Sec_length(this.sessionData.userSessionMins,this.sessionData.overAllSessionMins);var n=this.sessionData;return{mergedDataSecWise:n.mergedDataSecWise,mergedDataMinWise:n.mergedDataMinWise}}},{key:"secToMin_overAll",value:function(e){var t=this,i=[],a=0,n=0,r=0,o=e.length,s=this.diff_minutes(new Date(e[0].timestamp),new Date(e[e.length-1].timestamp)).minutes,l=this.diff_minutes(new Date(e[0].timestamp),new Date(e[e.length-1].timestamp)).seconds,c=Math.round(o/((60*s+l)/60));return e.map(function(e,o){n+=e.average_engagement,r+=e.average_mood,o%c==0&&(i.push({segment:a++,average_engagement:Math.round(n/c),average_mood:Math.round(r/c),category:t.utility.setCategory(Math.round(n/c)),moodCategory:t.utility.setCategory(Math.round(r/c))}),n=0,r=0)}),i}},{key:"secToMin_user",value:function(e){var t=this,i=[],a=0,n=0,r=0,o=e.length,s=this.diff_minutes(new Date(e[0].createdAt),new Date(e[e.length-1].createdAt)).minutes,l=this.diff_minutes(new Date(e[0].createdAt),new Date(e[e.length-1].createdAt)).seconds,c=Math.round(o/((60*s+l)/60));return e=e.map(function(e,o){n+=e.engagement,r+=e.mood,o%c==0&&(i.push({segment:a++,engagement:Math.round(n/c),mood:Math.round(r/c),category:t.utility.setCategory(Math.round(n/c)),moodCategory:t.utility.setCategory(Math.round(r/c))}),n=0,r=0)}),i}},{key:"diff_minutes",value:function(e,t){var i=(t.getTime()-e.getTime())/1e3,a=(t.getTime()-e.getTime())/1e3;return i/=60,a%=60,{minutes:Math.abs(Math.floor(i)),seconds:Math.round(a)}}},{key:"findClosestDate",value:function(e,t,i){if(i){var a=1;i.map(function(i){i.diffFromStart=Math.abs((new Date(i.timestamp).getTime()-new Date(e).getTime())/1e3),i.diffFromEnd=Math.abs((new Date(i.timestamp).getTime()-new Date(t).getTime())/1e3)});var n=i.reduce(function(e,t){return e.diffFromStart<t.diffFromStart?e:t}),r=i.reduce(function(e,t){return e.diffFromEnd<t.diffFromEnd?e:t});return i.filter(function(e,t){if(e.timestamp>=n.timestamp&&e.timestamp<=r.timestamp)return e.overallsegment=a++,e})}}},{key:"equaliseMin_Sec_length",value:function(e,t){var i=this,a=t.filter(function(t){var i=t.segment;return!e.some(function(e){return e.segment===i})});return(t=t.filter(function(e){return!a.includes(e)})).map(function(e,t){return Object.assign({},e,i.sessionData.userSessionMins[t])})}}]),e}()).\u0275fac=function(e){return new(e||a)(h.bc(f.a),h.bc(m.a))},a.\u0275prov=h.Nb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),p=i("cclQ"),v=i("kYN2"),y=i("tk/3"),S=i("0Lug"),k=i("XiUz"),x=i("znSr"),C=i("1jcm"),_=i("xJfa"),D=i("WlQZ"),w=i("c03H"),M=i("LUsR"),O=((n=function(){function e(t,i,a,n,r,s,l){o(this,e),this.as=t,this.bhvSub=i,this.as$=a,this.zone=n,this.router=r,this.route=s,this.utility=l,this.seekVideoFrom=new h.o,this.chartLoadCheck=!1,this.metric=0,this.segmentArray=[],this.yAxisLabels=[{value:0,text:"Camera Off"},{value:40,text:"Low"},{value:80,text:"Medium"},{value:100,text:"High"}],this.series=[{name:"Engagement",color:"#ff8b51"},{name:"Mood",color:"#1393ff"}]}return r(e,[{key:"createChart",value:function(){var e=this,t=this;this.segmentArray="Seconds"===this.secMin?this.createSegment(Math.floor(this.utility.getSegmentData(this.allSeriesData.mergedDataSecWise).duration/4)):this.createMinutesQuadrants(),p.k(D.a),p.k(w.a),this.config.chart=p.e(this.stdId,_.i),this.config.chart.data="Seconds"===this.secMin?this.allSeriesData.mergedDataSecWise:this.allSeriesData.mergedDataMinWise;var i=this.config.chart.xAxes.push(new _.a);i.dataFields.category="segment",i.renderer.grid.template.disabled=!0,i.cursorTooltipEnabled=!1;var a=this.config.chart.yAxes.push(new _.h);a.renderer.labels.template.disabled=!0,a.cursorTooltipEnabled=!1,a.renderer.line.strokeOpacity=0,a.min=0,a.max=110,a.renderer.grid.template.disabled=!0;var n,r,o=this.config.chart.yAxes.push(new _.a);function s(e,t,a){var n=i.axisRanges.create();n.category=e,n.endCategory=t,n.label.text=a,n.label.location=.5,n.label.horizontalCenter="middle",n.label.fontWeight="bold",n.label.inside=!0,n.label.valign="top",n.label.events.on("hit",function(){i.zoomToIndexes(n.category,n.endCategory)})}function l(e,t){var i=a.axisRanges.create();i.value=e,i.label.text=t}o.dataFields.category="category",o.cursorTooltipEnabled=!1,o.renderer.labels.template.disabled=!0,o.renderer.grid.template.disabled=!0,[{name:"engagement",value:0},{name:"mood",value:1},{name:"average_engagement",value:0},{name:"average_mood",value:1}].forEach(function(t){var i=e.config.chart.series.push(new _.e);0===t.value&&"engagement"===t.name?(i.tooltipText='Engagement : {engagement.formatNumber(".##")}',i.segments.template.fill=p.d("#1393ff"),i.stroke=p.d("#1393ff"),i.fill=p.d("#1393ff")):0===t.value&&"average_engagement"===t.name?(i.tooltipText='Overall Engagement : {average_engagement.formatNumber(".##")}',i.segments.template.fill=p.d("#ff8b51"),i.stroke=p.d("#ff8b51"),i.fill=p.d("#ff8b51")):1===t.value&&"mood"===t.name?(i.tooltipText='Mood : {mood.formatNumber(".##")}',i.segments.template.fill=p.d("#1393ff"),i.stroke=p.d("#1393ff"),i.fill=p.d("#1393ff")):1===t.value&&"average_mood"===t.name&&(i.tooltipText='Overall Mood : {average_mood.formatNumber(".##")}',i.segments.template.fill=p.d("#ff8b51"),i.stroke=p.d("#ff8b51"),i.fill=p.d("#ff8b51")),i.fillOpacity=1;var a=new p.c;a.opacities=[.7,0],a.offsets=[0,1],a.gradient.rotation=90,i.segments.template.fillModifier=a;var n=i.dataFields,r=i.tooltip;n.valueY=t.name,i.hidden=t.value!==e.metric,n.categoryX="segment",i.strokeWidth=2,i.minBulletDistance=15,r.background.cornerRadius=20,r.background.strokeOpacity=0,r.pointerOrientation="vertical",r.label.minWidth=20,r.label.minHeight=20,r.label.textAlign="middle",r.label.textValign="middle";var o=i.bullets.push(new _.b);o.circle.strokeWidth=2,o.circle.radius=4,o.circle.fill=p.d("#fff"),o.states.create("hover").properties.scale=1.3,e.config.chart.cursor=new _.j});for(var c=0;c<4;c++)s(this.segmentArray[c].start,this.segmentArray[c].end,this.segmentArray[c].label),n=this.segmentArray[c].start,r=void 0,(r=i.axisRanges.create()).category=n,r.grid.strokeOpacity=.5,r.label.text="",r.tick.disabled=!0,r.tick.strokeOpacity=.5,l(this.yAxisLabels[c].value,this.yAxisLabels[c].text);function d(e){var i=e.target,a=i.getPositionLabel(i.start),n=i.getPositionLabel(i.end);t.debounce&&clearInterval(t.debounce),t.debounce=setTimeout(function(){t.seekVideoFrom.emit({Start:a,End:n})},100)}this.config.chart.cursor.lineX.stroke=p.d("red"),this.config.chart.cursor.lineX.strokeWidth=2,this.config.chart.cursor.lineX.strokeOpacity=.5,i.events.on("startchanged",d),i.events.on("endchanged",d)}},{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.subscribe(function(t){e.params=t}),this.bhvSub.engOrMood$.subscribe(function(t){if("number"==typeof t&&e.config.chart){e.metric=t;var i=e.config.chart.series.getIndex(0),a=e.config.chart.series.getIndex(1),n=e.config.chart.series.getIndex(2),r=e.config.chart.series.getIndex(3);e.config.chart.series.values.map(function(t,o){0===e.metric?(i.show(),a.hide(),n.show(),r.hide()):(i.hide(),a.show(),n.hide(),r.show())})}})}},{key:"ngAfterViewInit",value:function(){var e=this;this.config.chart?(this.config.chart.dispose(),setTimeout(function(){e.createChart()},1e3)):this.createChart()}},{key:"ngOnChanges",value:function(e){var t=this;if((null==e?void 0:e.secMin)&&this.chartLoadCheck)if("Minutes"===e.secMin.currentValue){var i=0;this.config.chart.data=this.allSeriesData.mergedDataMinWise,this.segmentArray=this.createMinutesQuadrants();for(var a=0;a<7;a++)a%2==0?(this.config.chart.xAxes.values[0].axisRanges.values[a].properties.category=this.segmentArray[i].start,this.config.chart.xAxes.values[0].axisRanges.values[a].properties.endCategory=this.segmentArray[i].end,this.config.chart.xAxes.values[0].axisRanges.values[a].label.text=this.segmentArray[i].label,i++):this.config.chart.xAxes.values[0].axisRanges.values[a].properties.category=this.segmentArray[i].start;this.config.chart.validateData()}else if("Seconds"===e.secMin.currentValue){var n=0;this.config.chart.data=this.allSeriesData.mergedDataSecWise,this.segmentArray=this.createSegment(Math.floor(this.utility.getSegmentData(this.allSeriesData.mergedDataSecWise).duration/4));for(var r=0;r<7;r++)r%2==0?(this.config.chart.xAxes.values[0].axisRanges.values[r].properties.category=this.segmentArray[n].start,this.config.chart.xAxes.values[0].axisRanges.values[r].properties.endCategory=this.segmentArray[n].end,this.config.chart.xAxes.values[0].axisRanges.values[r].label.text=this.segmentArray[n].label,n++):this.config.chart.xAxes.values[0].axisRanges.values[r].properties.category=this.segmentArray[n].start;this.config.chart.validateData()}(null==e?void 0:e.allSeriesData)&&(this.chartLoadCheck=!0,this.config.chart?(this.config.chart.dispose(),setTimeout(function(){t.createChart()},1e3)):this.createChart())}},{key:"createMinutesQuadrants",value:function(){for(var e=Math.floor(this.allSeriesData.mergedDataMinWise.length/4),t=0===this.allSeriesData.mergedDataMinWise[0].segment?0:this.allSeriesData.mergedDataMinWise[0].segment,i=t+e,a=[],n=0;n<4;n++)a.push({start:""+t,end:""+(i>this.allSeriesData.mergedDataMinWise.length-1?this.allSeriesData.mergedDataMinWise.length-1:i),label:this.utility.convertDate(e*n,4*e)+" - "+this.utility.convertDate(e*(n+1),4*e)}),t+=e,i+=e;return a}},{key:"createSegment",value:function(e){for(var t=1,i=t+Math.floor(this.allSeriesData.mergedDataSecWise.length/4),a=[],n=0;n<4;n++)a.push({start:""+t,end:i>=this.allSeriesData.mergedDataSecWise.length-1?this.allSeriesData.mergedDataSecWise.length-1:i,label:this.utility.convertDate(e*n,4*e)+" - "+this.utility.convertDate(e*(n+1),4*e)}),t+=Math.floor(this.allSeriesData.mergedDataSecWise.length/4),i+=Math.floor(this.allSeriesData.mergedDataSecWise.length/4);return a}},{key:"ngOnDestroy",value:function(){var e=this;this.chartLoadCheck=!1;try{this.zone.runOutsideAngular(function(){e.chart&&(e.config.chart.dispose(),delete e.config.chart)})}catch(t){console.log(t)}}}]),e}()).\u0275fac=function(e){return new(e||n)(h.Rb(f.a),h.Rb(M.a),h.Rb(f.a),h.Rb(h.B),h.Rb(l.b),h.Rb(l.a),h.Rb(m.a))},n.\u0275cmp=h.Lb({type:n,selectors:[["app-line-chart"]],inputs:{stdId:"stdId",config:"config",detectChartDataChange:"detectChartDataChange",secMin:"secMin",allSeriesData:"allSeriesData"},outputs:{seekVideoFrom:"seekVideoFrom"},features:[h.Db],decls:1,vars:1,consts:[["fxFill","",3,"id"]],template:function(e,t){1&e&&h.Sb(0,"div",0),2&e&&h.qc("id",t.stdId)},directives:[k.h],styles:[""]}),n),R=i("NFeN"),F=i("Xa2L"),T=["video"],A=["videoScreenAudiio"],j=["screen"];function P(e,t){if(1&e&&(h.Vb(0),h.Xb(1,"video",14,15),h.Sb(3,"source",16),h.Wb(),h.Ub()),2&e){var i=h.jc(2);h.Fb(3),h.qc("src","https://"+i.dataRaw.screen_path.link,h.Hc)}}function I(e,t){if(1&e&&(h.Xb(0,"span",17),h.Pc(1),h.Wb()),2&e){var i=h.jc(2);h.Fb(1),h.Rc("Screen Share ",null==i.dataRaw?null:i.dataRaw.screen_path.status,"")}}var L=function(e){return[e]};function W(e,t){if(1&e){var i=h.Yb();h.Xb(0,"div",23),h.Xb(1,"mat-icon",24),h.fc("click",function(){h.Fc(i),h.jc();var e=h.Dc(3),t=h.jc(2);return t.detectChartDataChange=!1,e.paused?e.play():e.pause(),e.paused?t.toggleScreenShare():t.noop}),h.Pc(2),h.Wb(),h.Wb()}if(2&e){h.jc();var a=h.Dc(3);h.qc("ngClass",h.uc(2,L,a.paused?"display":"child")),h.Fb(2),h.Rc(" ",a.paused?"play_circle_outline":"pause_circle_outline"," ")}}function V(e,t){if(1&e&&h.Sb(0,"source",25),2&e){var i=h.jc(3);h.qc("src","https://"+(null==i.dataRaw.video_path?null:i.dataRaw.video_path.link),h.Hc)}}function E(e,t){if(1&e&&h.Sb(0,"source",26),2&e){var i=h.jc(3);h.qc("src","https://"+(null==i.dataRaw.audio_path?null:i.dataRaw.audio_path.link),h.Hc)}}function q(e,t){if(1&e){var i=h.Yb();h.Vb(0),h.Nc(1,W,3,4,"div",18),h.Xb(2,"video",19,20),h.fc("timeupdate",function(e){h.Fc(i);var t=h.Dc(3);return h.jc(2).videoTimeUpdate(e,t.paused)}),h.Nc(4,V,1,1,"source",21),h.Nc(5,E,1,1,"source",22),h.Wb(),h.Ub()}if(2&e){var a=h.jc(2);h.Fb(1),h.qc("ngIf",a.dispChartType&&"-"!==a.dataRaw.video_path.link),h.Fb(3),h.qc("ngIf",a.dispChartType&&"-"!==a.dataRaw.video_path.link),h.Fb(1),h.qc("ngIf",!a.dispChartType)}}function X(e,t){if(1&e&&(h.Xb(0,"span",17),h.Pc(1),h.Wb()),2&e){var i=h.jc(2);h.Fb(1),h.Rc("Video ",i.dataRaw.video_path.status,"")}}var B=function(){return{height:"60%"}},N=function(){return{height:"90%"}};function U(e,t){if(1&e){var i=h.Yb();h.Xb(0,"div",2),h.Xb(1,"div",3),h.Xb(2,"div",4),h.Nc(3,P,4,1,"ng-container",5),h.Nc(4,I,2,1,"span",6),h.Wb(),h.Xb(5,"div",7),h.Nc(6,q,6,3,"ng-container",5),h.Nc(7,X,2,1,"span",6),h.Wb(),h.Wb(),h.Xb(8,"div",8),h.Xb(9,"span",9),h.Pc(10,"Time Elapsed"),h.Wb(),h.Xb(11,"div",10),h.Xb(12,"span",11),h.Pc(13,"Seconds"),h.Wb(),h.Xb(14,"mat-slide-toggle",12),h.fc("change",function(e){h.Fc(i);var t=h.jc();return t.config.minuteToggle=t.detectChartDataChange=e.checked}),h.Wb(),h.Xb(15,"span",11),h.Pc(16,"Minutes"),h.Wb(),h.Wb(),h.Wb(),h.Xb(17,"app-line-chart",13),h.fc("seekVideoFrom",function(e){return h.Fc(i),h.jc().seekVideoFrom(e)}),h.Wb(),h.Wb()}if(2&e){var a=h.jc();h.Fb(2),h.qc("ngStyle.lt-xl",h.tc(18,B))("ngStyle",h.tc(19,N))("hidden",a.dataRaw.screen_path),h.Fb(1),h.qc("ngIf","-"!==a.dataRaw.screen_path.link||a.liveStreamVideo),h.Fb(1),h.qc("ngIf","-"===(null==a.dataRaw?null:a.dataRaw.screen_path.link)&&!a.liveStreamVideo),h.Fb(1),h.qc("ngStyle.lt-xl",h.tc(20,B))("ngStyle",h.tc(21,N))("hidden","-"===a.dataRaw.video_path.link||!a.liveStreamVideo),h.Fb(1),h.qc("ngIf","-"!==a.dataRaw.video_path.link||a.liveStreamVideo),h.Fb(1),h.qc("ngIf","-"===a.dataRaw.video_path.link&&!a.liveStreamVideo),h.Fb(7),h.qc("checked",a.config.minuteToggle)("disabled",a.disableToggle),h.Fb(3),h.qc("stdId","lineChart")("detectChartDataChange",a.detectChartDataChange)("secMin",a.config.minuteToggle?"Minutes":"Seconds")("config",a.config)("allSeriesData",a.allSeriesData)("hidden",!a.dispChartType)}}var G=function(){return["customLoader"]};function z(e,t){1&e&&h.Sb(0,"mat-spinner",27),2&e&&h.qc("ngClass",h.tc(2,G))("diameter",50)}var H,J=((H=function(){function e(t,i,a,n,r,s,l){o(this,e),this.route=t,this.ss=i,this.http=a,this.as$=n,this.sl=r,this.sds=s,this.utility=l,this.screenShareSeek={start:p.g,end:p.g},this.base=g.a.base,this.videoTimeCounter=0,this.pauseVideoAt=0,this.time="00:00:00",this.liveStreamVideo=!1,this.dispChartType=!0,this.disableToggle=!1,this.eng=[],this.value=[],this.config={chart:void 0,minuteToggle:!1,video:void 0,dataRaw:void 0}}return r(e,[{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.subscribe(function(t){var i;if(t&&t.student_id)if(e.params=t,e.roomId=t.roomid,e.nitin(t.roomid),"manager"!==(null===(i=e.params)||void 0===i?void 0:i.module));else{e.dispChartType=!1;var a={};e.sl.load("janus").then(function(t){e.sl.load("user").then(function(i){t[0].loaded&&i[0].loaded&&(a=MediaStreams.filter(function(t){if(t.id===e.params.student_id&&"video"===t.type)return e.liveStreamVideo=!0,t}),setTimeout(function(){var e=document.getElementById("video");e&&(e.srcObject=a[0].stream,e.play())},3e3))})})}setTimeout(function(){e.detectChartDataChange=!1},2e3)}),this.userDetails=JSON.parse(localStorage.getItem("userDetails")),this.email=this.userDetails.email,this.as$.getApiStatic("userplanDetails?email="+this.email).subscribe(function(t){e.scoresTimeGap=t.data[0].realTimeScores})}},{key:"nitin",value:function(e){var t=this;this.as$.getApiStatic("getReportData?roomid="+e).subscribe(function(e){t.eng=e.report.overallEngagement,t.getData(t.params)})}},{key:"getData",value:function(e){var t=this,i=Object(d.a)(this.eng),a=this.as$.getApiStatic("report?id="+e.student_id),n=this.as$.getApiStatic("getScreenShareDetails?uuid="+e.student_id);Object(u.a)([i,a,n]).subscribe(function(e){var i,a,n,r;(null===(i=e[1].response)||void 0===i?void 0:i.session_data)&&(e[1].response.session_data=e[1].response.session_data.sort(function(e,t){return e.segment-t.segment}),t.dataRaw=e[1].response,t.disableToggle=t.utility.calculateDuration([e[1].response]).duration<60,null===(n=null===(a=e[1].response)||void 0===a?void 0:a.session_data)||void 0===n||n.map(function(e){return e.engagement=null===e.engagement?0:e.engagement,e.mood=null===e.mood?0:e.mood,e.category=t.utility.setCategory(e.engagement),e.moodCategory=t.utility.setCategory(e.mood),e})),t.allSeriesData=t.sds.getCompiledData(e[0],e[1].response.session_data,null===(r=e[2].data)||void 0===r?void 0:r.janus),console.log("All Series Data :",t.allSeriesData),setTimeout(function(){void 0!==t.screen&&t.configureScreenShare(t.screen.nativeElement)},1e3)},function(e){console.error(e)})}},{key:"videoTimeUpdate",value:function(e,t){var i,a,n,r,o;void 0===this.screen||t||(console.log("Inside IF"),this.seekScreenShareVideoFrom(Math.floor(e.target.currentTime)));var s=document.getElementById("video");if((null===(a=null===(i=this.config)||void 0===i?void 0:i.chart)||void 0===a?void 0:a.data[(null===(o=null===(r=null===(n=this.config)||void 0===n?void 0:n.chart)||void 0===r?void 0:r.data)||void 0===o?void 0:o.length)-1].segment)>=Math.floor(e.target.currentTime)){0!==this.pauseVideoAt&&this.videoTimeCounter+Math.floor(e.target.currentTime/this.scoresTimeGap)>=this.pauseVideoAt&&s.pause();var l=this.config.chart.xAxes.values[0].categoryToPoint(this.videoTimeCounter+Math.floor(e.target.currentTime/this.scoresTimeGap));this.config.chart.cursor.triggerMove(l,"sticky")}else{0!==this.pauseVideoAt&&Math.floor(e.target.currentTime/this.scoresTimeGap)>=this.pauseVideoAt&&s.pause();var c=this.config.chart.xAxes.values[0].categoryToPoint(Math.floor(e.target.currentTime/this.scoresTimeGap));this.config.chart.cursor.triggerMove(c,"sticky")}}},{key:"seekVideoFrom",value:function(e){return Object(c.b)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("ScreenShare Seek : ",e),t.next=3,document.getElementById("video");case 3:return i=t.sent,t.next=6,document.getElementById("screenShare");case 6:a=t.sent,this.videoTimeCounter=0,this.pauseVideoAt=e.End,i.currentTime=e.Start*this.scoresTimeGap,this.videoTimeCounter=e.Start,void 0!==this.screen&&(console.log("IF"),this.screenShareSeek.start=this.sds.gap+e.Start,this.screenShareSeek.end=this.sds.gap+e.Start+ +JSON.stringify(null==a?void 0:a.duration).split(".")[0],e.Start<this.sds.gap||e.Start>this.sds.gap+ +JSON.stringify(null==a?void 0:a.duration).split(".")[0]?(console.log("IF inside IF"),a.currentTime=this.sds.gap):(console.log("ELSE inside IF"),a.currentTime=e.Start));case 8:case"end":return t.stop()}},t,this)}))}},{key:"seekScreenShareVideoFrom",value:function(e){console.log("seekScreenShareVideoFrom : ",e);var t=document.getElementById("screenShare");e>=+this.screenShareSeek.start&&e<+this.screenShareSeek.end?(console.log("ScreenShare Sec : "+e+" , this.screenShareSeek.start : ",this.screenShareSeek.start),t.play()):t.pause()}},{key:"configureScreenShare",value:function(e){this.screenShareSeek.start=this.sds.gap,this.screenShareSeek.end=this.sds.gap+ +JSON.stringify(null==e?void 0:e.duration).split(".")[0],console.log("Start :",this.screenShareSeek.start),console.log("End :",this.screenShareSeek.end),console.log("Gap :",this.sds.gap)}},{key:"toggleScreenShare",value:function(){var e=this;setTimeout(function(){void 0!==e.screen&&e.screen.nativeElement.pause()},500)}}]),e}()).\u0275fac=function(e){return new(e||H)(h.Rb(l.a),h.Rb(v.a),h.Rb(y.b),h.Rb(f.a),h.Rb(S.a),h.Rb(b),h.Rb(m.a))},H.\u0275cmp=h.Lb({type:H,selectors:[["app-student-detail"]],viewQuery:function(e,t){var i;1&e&&(h.Uc(T,1),h.Uc(A,1),h.Uc(j,1)),2&e&&(h.Cc(i=h.gc())&&(t.video=i.first),h.Cc(i=h.gc())&&(t.videoScreenAudiio=i.first),h.Cc(i=h.gc())&&(t.screen=i.first))},features:[h.Eb([b])],decls:2,vars:2,consts:[["fxLayout","column","fxFill","","fxLayoutGap","14px","padding","",4,"ngIf"],[3,"ngClass","diameter",4,"ngIf"],["fxLayout","column","fxFill","","fxLayoutGap","14px","padding",""],["fxLayout","row","fxFlex","","fxLayoutAlign","space-around center","m-t0","","m-b0",""],["fxLayout","column","fxLayoutAlign","center center",1,"parentScreen",3,"ngStyle.lt-xl","ngStyle","hidden"],[4,"ngIf"],["style","color: #fff;",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"parentVideo",3,"ngStyle.lt-xl","ngStyle","hidden"],["fxLayout","row","fxLayoutAlign","space-between"],["title-white14-400","","fxLayoutAlign","center center"],["fxLayout","row","fxLayoutAlign","end center","p-r24","","p-l24","","border",""],["title-white12-400",""],["m-r12","","m-l12","",3,"checked","disabled","change"],["fxFlex","",3,"stdId","detectChartDataChange","secMin","config","allSeriesData","hidden","seekVideoFrom"],["id","screenShare","muted","","border","",2,"height","auto","width","auto","max-height","100%","max-width","100%"],["screen",""],["type","video/webm",3,"src"],[2,"color","#fff"],["id","vidPlayPause","fxFill","","fxLayout","row","fxLayoutAlign","center center",3,"ngClass",4,"ngIf"],["id","video","muted","","border","",3,"timeupdate"],["video",""],["id","lineChartVideo","type","video/webm",3,"src",4,"ngIf"],["id","liveLineChartVideo","type","audio/opus",3,"src",4,"ngIf"],["id","vidPlayPause","fxFill","","fxLayout","row","fxLayoutAlign","center center",3,"ngClass"],[3,"click"],["id","lineChartVideo","type","video/webm",3,"src"],["id","liveLineChartVideo","type","audio/opus",3,"src"],[3,"ngClass","diameter"]],template:function(e,t){1&e&&(h.Nc(0,U,18,22,"div",0),h.Nc(1,z,1,3,"mat-spinner",1)),2&e&&(h.qc("ngIf",t.allSeriesData),h.Fb(1),h.qc("ngIf",!t.allSeriesData))},directives:[s.n,k.f,k.h,k.g,k.b,k.e,x.c,s.o,C.a,O,s.l,x.a,R.a,F.c],styles:[".parentVideo[_ngcontent-%COMP%]{position:relative;width:350px;background:hsla(0,0%,100%,.1)}.parentVideo[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{height:100%;width:100%;transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}.parentVideo[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]{visibility:visible}.parentVideo[_ngcontent-%COMP%]   .child[_ngcontent-%COMP%], .parentVideo[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]{position:absolute;background-color:rgba(0,0,0,.5);height:100%;width:100%;z-index:2}.parentVideo[_ngcontent-%COMP%]   .child[_ngcontent-%COMP%]{visibility:hidden}.parentVideo[_ngcontent-%COMP%]:hover   .child[_ngcontent-%COMP%]{visibility:visible}.parentScreen[_ngcontent-%COMP%]{position:relative;width:500px;background:hsla(0,0%,100%,.1)}.parentScreen[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{height:100%;width:100%\n  }.parentScreen[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]{visibility:visible}.parentScreen[_ngcontent-%COMP%]   .child[_ngcontent-%COMP%], .parentScreen[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]{position:absolute;background-color:rgba(0,0,0,.5);height:100%;width:100%;z-index:2}.parentScreen[_ngcontent-%COMP%]   .child[_ngcontent-%COMP%]{visibility:hidden}.parentScreen[_ngcontent-%COMP%]:hover   .child[_ngcontent-%COMP%]{visibility:visible}.mat-icon[_ngcontent-%COMP%]{font-size:48px!important;color:#fff;cursor:pointer}.customLoader[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]}),H),Y=i("Wp6s"),Q=i("FKr1");i("nLfN");var $,K,Z,ee=(($=r(function e(){o(this,e)})).\u0275fac=function(e){return new(e||$)},$.\u0275mod=h.Pb({type:$}),$.\u0275inj=h.Ob({imports:[[Q.j],Q.j]}),$),te=i("bTqV"),ie=i("YUcS"),ae=i("FpXt"),ne=((K=r(function e(){o(this,e)})).\u0275fac=function(e){return new(e||K)},K.\u0275mod=h.Pb({type:K}),K.\u0275inj=h.Ob({imports:[[ae.a]]}),K),re=[{path:"",component:J}],oe=((Z=r(function e(){o(this,e)})).\u0275fac=function(e){return new(e||Z)},Z.\u0275mod=h.Pb({type:Z}),Z.\u0275inj=h.Ob({imports:[[s.c,ae.a,Y.b,ee,te.b,C.b,ie.a,ne,F.b,l.d.forChild(re)]]}),Z)}}])}();