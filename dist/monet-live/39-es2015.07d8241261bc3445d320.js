(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{Zcnr:function(t,e,n){"use strict";n.r(e),n.d(e,"StudentDashboardModule",function(){return At});var i=n("ofXK"),s=n("0Lug"),o=n("v0EB"),a=n("fXoL"),r=n("tyNb"),c=n("kYN2"),d=n("LUsR"),l=n("XiUz"),u=n("znSr"),h=n("Qu3c"),b=n("bTqV"),g=n("NFeN"),m=n("STbY"),p=n("c8Cp"),f=n("mrSG"),v=n("0IaG"),S=n("rjXu"),x=n("xk+7"),y=n("iiAa"),_=n("q1A0"),w=n("zkoq"),O=n("bSwM"),C=n("3Pt+"),P=n("sjQA");const L=["studentContainer"],M=["screenShareStreem"],k=["audioview"],j=["scShareAudio"];function F(t,e){if(1&t){const t=a.Yb();a.Xb(0,"mat-icon",17),a.fc("click",function(){a.Fc(t);const e=a.jc(2);return e.collapseUsersList.action=!e.collapseUsersList.action,e.collapseList(e.collapseUsersList.action,null)}),a.Pc(1),a.Wb()}if(2&t){const t=a.jc(2);a.qc("matTooltip",t.collapseUsersList.action?"Expand Users List":"Collapse Users List"),a.Fb(1),a.Rc(" ",t.collapseUsersList.action?"keyboard_double_arrow_left":"keyboard_double_arrow_right"," ")}}function I(t,e){if(1&t){const t=a.Yb();a.Vb(0),a.Xb(1,"div",22),a.Xb(2,"button",23),a.Xb(3,"mat-icon",24),a.Pc(4,"exit_to_app"),a.Wb(),a.Wb(),a.Xb(5,"span",25),a.Pc(6,"You are sharing your screen"),a.Wb(),a.Xb(7,"button",26),a.fc("click",function(){return a.Fc(t),a.jc(3).stopScreen()}),a.Pc(8,"Stop sharing"),a.Wb(),a.Xb(9,"mat-checkbox",27),a.fc("ngModelChange",function(e){return a.Fc(t),a.jc(3).screenShareAudio=e})("click",function(){a.Fc(t);const e=a.jc(3);return e.publisherScreenShare.toggleAudio("screen",e.screenShareAudio)}),a.Pc(10,"Screen Share Audio "),a.Wb(),a.Wb(),a.Ub()}if(2&t){const t=a.jc(3);a.Fb(7),a.qc("disabled",t.stopScreenShareButtonStat),a.Fb(2),a.qc("ngModel",t.screenShareAudio)}}const A=function(){return{opacity:"1",margin:"0 15%"}},X=function(){return{opacity:"0"}},W=function(){return{opacity:"1",marginTop:"10px",height:"80vh"}},q=function(){return{opacity:"1"}};function U(t,e){if(1&t&&(a.Xb(0,"div",18),a.Sb(1,"video",19,20),a.Nc(3,I,11,2,"ng-container",21),a.Wb()),2&t){const t=a.jc(2);a.qc("fxFlexAlign",t.screenShareId&&t.screenShareId===t.param.id.toString()+"___"+t.param.id.toString()?"center":"stretch")("fxLayout",t.screenShareId&&t.screenShareId===t.param.id.toString()+"___"+t.param.id.toString()?"column":"")("fxLayoutAlign",t.screenShareId&&t.screenShareId===t.param.id.toString()+"___"+t.param.id.toString()?"center center":"")("ngStyle",t.screenshare?t.screenShareId===t.param.id.toString()+"___"+t.param.id.toString()?a.tc(6,A):t.fullScreen?t.opacity?a.tc(8,W):a.tc(9,X):a.tc(7,X):a.tc(10,q)),a.Fb(1),a.qc("fxHide",t.screenShareId===t.param.id.toString()+"___"+t.param.id.toString()),a.Fb(2),a.qc("ngIf",t.screenShareId&&t.screenShareId===t.param.id.toString()+"___"+t.param.id.toString())}}function E(t,e){if(1&t){const t=a.Yb();a.Xb(0,"button",28),a.Xb(1,"mat-icon",29),a.fc("click",function(){return a.Fc(t),a.jc(2).scrollList("top")}),a.Pc(2,"double_arrow"),a.Wb(),a.Wb()}}const D=function(t){return{backgroundColor:t}};function N(t,e){if(1&t&&(a.Xb(0,"div",35),a.Xb(1,"div",36),a.Xb(2,"mat-icon",37),a.Pc(3,"person"),a.Wb(),a.Wb(),a.Xb(4,"span",38),a.Pc(5,"You"),a.Wb(),a.Wb()),2&t){const t=a.jc(3);a.Fb(1),a.qc("ngStyle",a.uc(1,D,"rgba("+t.randomColor.join(", ")+")"))}}const B=function(){return["video-title"]};function R(t,e){if(1&t&&(a.Xb(0,"div",39),a.Xb(1,"div",40),a.Pc(2),a.Xb(3,"mat-icon",41),a.Pc(4),a.Wb(),a.Wb(),a.Wb()),2&t){const t=a.jc(3);a.Fb(1),a.qc("ngClass",a.tc(3,B)),a.Fb(1),a.Rc("",null==t.param?null:t.param.name," (You) \xa0 "),a.Fb(2),a.Qc(t.userAudioIcon)}}const V=function(t){return["student-preview",t]};function T(t,e){if(1&t&&(a.Xb(0,"mat-grid-tile",30),a.Nc(1,N,6,3,"div",31),a.Xb(2,"div",32),a.Sb(3,"video",33),a.Nc(4,R,5,4,"div",34),a.Wb(),a.Wb()),2&t){const t=a.jc(2);a.qc("ngClass",a.uc(5,V,(null==t.studentsList?null:t.studentsList.length)<2&&!t.screenshare&&!t.screen?"single-view":""))("colspan",t.screenshare?1:t.fullScreen?2:1)("rowspan",t.screenshare?1:t.fullScreen?2:1),a.Fb(1),a.qc("ngIf",!t.publisherAvatar),a.Fb(3),a.qc("ngIf",t.userStream)}}const z=function(t,e){return["student-preview",t,e]};function H(t,e){if(1&t&&(a.Xb(0,"mat-grid-tile",30),a.Sb(1,"app-video-stream",42),a.Wb()),2&t){const t=a.jc().$implicit,e=a.jc(2);a.qc("ngClass",a.vc(7,z,(null==e.studentsList?null:e.studentsList.length)<2&&!e.screenshare&&!e.screen?"single-view":"",(null==t?null:t.std_id)===e.selectedUserID&&e.selectStu?"select-list":""))("colspan",1)("rowspan",1),a.Fb(1),a.qc("module","student")("selectUser",e.selectUser)("std",e.json.stringify(t))("mediaStreamObj",null==t?null:t.msobj)}}function Y(t,e){if(1&t&&(a.Vb(0),a.Nc(1,H,2,10,"mat-grid-tile",15),a.Ub()),2&t){const t=e.$implicit,n=a.jc(2);a.Fb(1),a.qc("ngIf",!(null!=t&&t.screen)&&(null==t?null:t.std_id)!==(null==n.param?null:n.param.id))}}function G(t,e){if(1&t){const t=a.Yb();a.Xb(0,"button",28),a.Xb(1,"mat-icon",43),a.fc("click",function(){return a.Fc(t),a.jc(2).scrollList("bottom")}),a.Pc(2,"double_arrow"),a.Wb(),a.Wb()}}const $=function(t,e){return{background:t,minHeight:e}},Q=function(t,e){return{marginLeft:t,minHeight:e}};function J(t,e){if(1&t&&(a.Xb(0,"div",2),a.Sb(1,"audio",3,4),a.Sb(3,"audio",5,6),a.Nc(5,F,2,2,"mat-icon",7),a.Nc(6,U,4,11,"div",8),a.Xb(7,"div",9),a.Xb(8,"div",10),a.Nc(9,E,3,0,"button",11),a.Xb(10,"div",12,13),a.Xb(12,"mat-grid-list",14),a.Nc(13,T,5,7,"mat-grid-tile",15),a.Nc(14,Y,2,1,"ng-container",16),a.Wb(),a.Wb(),a.Nc(15,G,3,0,"button",11),a.Wb(),a.Wb(),a.Wb()),2&t){const t=a.jc();a.qc("fxLayoutAlign",(t.screenshare||t.screen)&&t.param?"center center":"end start")("ngStyle",a.vc(17,$,t.fullScreen?"black":"",t.screenshare||t.screen?"100vh":"93vh")),a.Fb(1),a.qc("hidden",!0),a.Fb(2),a.qc("hidden",!0),a.Fb(2),a.qc("ngIf",t.screenshare&&!(t.screenShareId===t.param.id.toString()+"___"+t.param.id.toString())),a.Fb(1),a.qc("ngIf",(t.screenshare||t.screen)&&t.param),a.Fb(1),a.qc("fxFlex",t.fullScreen?t.screenshare?"25%":"100%":(null==t.studentsList?null:t.studentsList.length)<2?"2%":"25%"),a.Fb(1),a.qc("fxFlexOrder",t.screenshare?2:t.fullScreen?1:2)("ngStyle",a.vc(20,Q,t.screenshare?"5vh":t.fullScreen?"":"5vh",t.screenshare?"93vh":t.fullScreen?"":"93vh")),a.Fb(1),a.qc("ngIf",(null==t.studentsList?null:t.studentsList.length)>3&&!t.fullScreen),a.Fb(1),a.qc("fxFlex","calc(70vh - 10px)")("fxLayout",t.screenshare||t.fullScreen?"row wrap":"row"),a.Fb(2),a.qc("cols",t.screenshare?1:t.fullScreen?5:1),a.Fb(1),a.qc("ngIf",t.fullScreen),a.Fb(1),a.qc("ngForOf",t.studentsList)("ngForTrackBy",t.trackByUsers),a.Fb(1),a.qc("ngIf",(null==t.studentsList?null:t.studentsList.length)>4&&!t.fullScreen)}}const K=function(){return["invite"]};let Z=(()=>{class t{constructor(t,e,n,i,s,o,r){this.as=t,this.route=e,this.bhvSub=n,this.router=i,this.dialog=s,this.ss=o,this.utility=r,this.screenShareAudio=!0,this.userAudioIcon="mic",this.faceDataState=!0,this.stopScreenShareButtonStat=!0,this.test=!1,this.collapseUsersList={action:!1,icon:"keyboard_double_arrow_right",iconOp:"keyboard_double_arrow_left"},this.publisherAvatar=!0,this.randomColor=[0,0,0],this.avg=[],this.opacity=!1,this.fullScreen=!1,this.duration={duration:0},this.index=0,this.AudioArr=[],this.check=[],this.json=JSON,this.size={col:5,row:3},this.screenShareStat=new a.o,this.resetConfigOptions=new a.o,this.screenShareMediaEmit=new a.o,this.userMediaEmit=new a.o,this.audioStatus=new a.o,this.studentEmit=new a.o,this.stopScreenShare=new a.o,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}collapseList(t,e){const n=document.getElementById("usersList");if(n)if(t){let t=25;const e=setInterval(()=>{n.style.maxWidth=t--+"%",t<1&&(n.style.opacity="0",n.style.visibility="hidden",clearInterval(e))},1)}else{let t=25,i=0;null!==e&&(t=this.fullScreen?100:25);const s=setInterval(()=>{n.style.maxWidth=i+++"%",i>=t&&(n.style.opacity="1",n.style.visibility="visible",clearInterval(s))},1)}}stopScreen(){this.stopScreenShareButtonStat=!0,this.stopScreenShare.emit(!0),this.screenShareStat.emit("Share Screen"),this.ss.socket.emit("stopScreen",{uuid:this.param.id+"___"+this.param.id}),this.screenshare&&this.publisherScreenShare.destroy("screen"),[this.screen,this.screenshare,this.screenShareId]=[void 0,void 0,void 0],this.bhvSub.obScreenShare(!1)}Menu(t){this.bhvSub.obFullScreen(!t),this.fullScreen=!t}startTimer(){0===this.duration.duration&&(this.timer=setInterval(()=>{this.duration.duration++,this.avg.map(t=>{this.showSelectUser(t.id,t.score>30)})},2e3))}showSelectUser(t,e){this.selectedUserID=t,this.selectStu=e}ngOnChanges(t){var e,n,i,s,o,a,r;if(t.selectUser&&t.selectUser.currentValue&&this.studentsList){const e=t.selectUser.currentValue.std_id;if(this.studentsList.length>1){const t=this.studentsList.findIndex(t=>t.std_id===e);this.studentsList.unshift(this.studentsList.splice(t,1)[0]),this.studentContainer.nativeElement.scroll(0,0)}}t.screenshare&&!1===t.screenshare.currentValue&&(this.screen=void 0),(null===(e=t.actionObj)||void 0===e?void 0:e.currentValue)&&this.actionsHandler(null===(i=null===(n=null==t?void 0:t.actionObj)||void 0===n?void 0:n.currentValue)||void 0===i?void 0:i.name,null===(o=null===(s=null==t?void 0:t.actionObj)||void 0===s?void 0:s.currentValue)||void 0===o?void 0:o.value),void 0!==(null===(a=null==t?void 0:t.configMediaSettings)||void 0===a?void 0:a.currentValue)&&!0===(null===(r=null==t?void 0:t.configMediaSettings)||void 0===r?void 0:r.currentValue)&&(this.availableMediaDevices=mediaDev.availableDevices,this.configMediaoptions())}actionsHandler(t,e){let n={video:()=>{this.pub.toggleVideo("webcam",e),this.publisherAvatar=e,this.studentsList[this.studentsList.findIndex(t=>t.std_id===this.param.id)].video=e},audio:()=>{this.pub.toggleAudio("webcam",e),this.userAudioIcon=e?"mic":"mic_off",this.studentsList[this.studentsList.findIndex(t=>t.std_id===this.param.id)].audio=e},screen:()=>{e?this.stopScreen():(this.publisherScreenShare=new PubUser(this.param.name+"(screen)",this.param.id+"___"+this.param.id,this.param.roomid,"student",null,this.ss.socket,"screen",null,"",!0),this.publisherScreenShare.on("screen-share-denied",(t,e)=>{this.ss.socket.emit("leave",{uuid:e,type:"webcam"})}),this.publisherScreenShare.sock=this.ss.socket,this.publisherScreenShare.connect())},leave:()=>{this.openDialog()},remove:()=>{console.log("Exit room called")},"toggle-view":()=>{this.Menu(e)},"":()=>{console.log("Default")}};n[t]()||n[""]()}openDialog(){let t=this.dialog.open(x.a,{height:"25%",width:"25%"});t.afterClosed().subscribe(e=>{e&&(this.ss.socket.emit("leave",{uuid:this.param.id,type:"webcam"}),this.pub.destroy(),this.stopScreen(),inSession=!1,mediaDev.stop(),this.router.navigate(["student/meeting-end"],{queryParamsHandling:"merge"}).then(t=>{console.log("meeting end working",t)}).catch(t=>{console.error(t)})),t=null})}configMediaoptions(){this.availableMediaDevices&&(this.dialogOpener=this.dialog.open(S.a,{data:{devicesList:this.availableMediaDevices},panelClass:"configDevice-dialog-container",hasBackdrop:!0,width:"23%",height:"auto",backdropClass:"backdropBackground"}).afterClosed().subscribe(t=>{this.resetConfigOptions.emit(!1),this.dialogOpener=null,t.result&&mediaDev.deltaMedia(t.result.label,t.result.id)}))}managePublisher(){console.warn("ManagerPublisher"),mediaDev.on("media",()=>{this.pub=myPubUser=new PubUser(this.param.name,this.param.id,this.param.roomid,"student",null,this.ss.socket,"webcam",mediaDev.mediaStream,"NaN",!0),this.pub.sendSpeakingInfo(),this.pub.on("local",(t,e)=>{this.userStream=e,this.Menu(!1),this.userMediaEmit.emit(e),this.subSession.start(),this.studentsList[this.studentsList.findIndex(t=>t.std_id===this.param.id)].msobj=e}),this.pub.on("remote",(t,e)=>Object(f.b)(this,void 0,void 0,function*(){var t;(null===(t=this.audioview)||void 0===t?void 0:t.nativeElement)?this.audioview.nativeElement.srcObject=yield e:console.error("Audio Element not found")})),this.pub.on("toggleVideo",t=>{this.studentsList[this.studentsList.findIndex(e=>e.std_id===t.from)].video=t.status}),this.pub.on("toggleAudio",t=>{this.audioStatus.emit(t),this.studentsList[this.studentsList.findIndex(e=>e.std_id===t.from)].audio=t.status,t.event||(this.userAudioIcon=t.status?"mic":"mic_off")}),this.pub.on("screen-share-denied",t=>{}),this.pub.sock=this.ss.socket,this.pub.connect()}),mediaDev.on("media-error",t=>{console.log("media-error :",t),this.router.navigate(["/student/login"],{queryParamsHandling:"merge"}).then().catch()}),mediaDev.start()}socketEventListeners(t,e){let n={"user-list":()=>{if(e.users.filter(t=>{var e;return-1===(null===(e=null==t?void 0:t.uuid)||void 0===e?void 0:e.search(this.param.id))}).length>0)for(const t of e.users){const e=new SubUser(t.name,Math.floor(1e5*Math.random()),t.roomid,"dummy",t.serverIP,this.ss.socket,t.uuid);e.on("remote",(e,n,i)=>{this.studentsList.map(e=>{e.std_id===t.uuid&&(e.msobj=i)});const s=this.studentsList.findIndex(t=>"teacher"===t.proctor);this.studentsList.unshift(this.studentsList.splice(s,1)[0]),this.mediaStreamObj=i}),e.sock=this.ss.socket,e.connect()}},"face-data":()=>{e&&(this.studentsList=this.studentsList.map(t=>{var n,i;return t.engagement=Math.floor((null===(n=e[t.std_id])||void 0===n?void 0:n.engagement)||0),t.mood=Math.floor((null===(i=e[t.std_id])||void 0===i?void 0:i.mood_score)||0),t.category_engagement=t.engagement>80?"High":t.engagement>40?"Medium":"Low",t.category_mood=t.mood>80?"High":t.mood>40?"Medium":"Low",t}),this.studentEmit.emit(this.studentsList),this.debounce&&clearTimeout(this.debounce))},"throw-chalk":()=>{this.dialog.open(tt)},leave:()=>{var t,n,i,s,o;(null===(t=null==e?void 0:e.userObj)||void 0===t?void 0:t.uuid)===this.param.id?(0!==Object.keys(this.pub).length&&this.pub.destroy(),mediaDev.stop(),this.ss.disconnectSocket(),this.router.navigate(["student/meeting-end"],{queryParamsHandling:"merge"})):Object.keys(null==e?void 0:e.userObj).length&&(this.studentsList=this.studentsList.filter(t=>{var n;return t.std_id!==(null===(n=null==e?void 0:e.userObj)||void 0===n?void 0:n.uuid)}),!1===(null===(i=null===(n=null==e?void 0:e.userObj)||void 0===n?void 0:n.janus)||void 0===i?void 0:i.screen)&&(null===(s=null==e?void 0:e.userObj)||void 0===s?void 0:s.uuid.includes("___"))&&(this.screenShareStat.emit("Share Screen"),this.collapseList(!1,!0),this.bhvSub.obScreenShare(!1),[this.screen,this.screenshare,this.screenShareId]=[void 0,void 0,void 0]),this.studentEmit.emit(this.studentsList),this.utility.notify(e.userObj.name+((null===(o=null==e?void 0:e.userObj)||void 0===o?void 0:o.uuid.includes("___"))?" stopped sharing screen":" left the call"),""))},limit:()=>{this.utility.notify("The Room is already full. Please Connect with Moderator.",""),this.router.navigate(["auth"])},"screen-share":()=>{this.utility.notify("Screen is already being shared by someone",""),[this.screen,this.screenshare,this.screenShareId]=[void 0,void 0,void 0],this.bhvSub.obScreenShare(!1)},"room-audio":()=>{this.audioStatus.emit({from:this.param.id,status:!e.mute}),this.userAudioIcon=e.mute?"mic_off":"mic",this.studentsList=this.studentsList.map(t=>(t.audio=!e.mute,t)),this.utility.notify(e.mute?"Room muted":"Room  un-muted","")},"":()=>{}};n[t.match(/^(user-list|face-data|throw-chalk|leave|limit|screen-share|room-audio)$/)?t:""]()||n[""]()}getSubscribedUsers(t,e,n,i,s,o){"audio"===t&&null!==e&&(this.scShareAudio.nativeElement.srcObject=e);const a=this.studentsList.find(t=>t.std_id===n.uuid);a?a.msobj=e:(this.studentsList.push({audio:o.janus.audio,engAvg:NaN,msobj:e,screen:o.janus.screen,video:o.janus.video,webcam:o.janus.webcam,name:o.name,proctor:o.proctor,roomid:o.janus.room,serverIP:null,time:null,std_id:n.uuid}),this.utility.notify(o.name+" Joined the call","")),this.studentsList.forEach((t,e)=>{t.std_id.includes("___")&&(this.studentsList=this.studentsList.filter(t=>{var e;return-1===(null===(e=null==t?void 0:t.std_id)||void 0===e?void 0:e.indexOf("___"))}),(null==t?void 0:t.std_id)!==this.param.id+"___"+this.param.id&&this.screenShareMediaEmit.emit(t.msobj),this.bhvSub.obScreenShare(!0),this.param.id+"___"+this.param.id===n.uuid&&([this.screen,this.screenshare,this.screenShareId]=[1,!0,this.param.id+"___"+this.param.id]),[this.screenshare,this.screen]=[!0,1],setTimeout(()=>{document.getElementById("screenShareStreem").srcObject=t.msobj,this.utility.notify(o.name+"Shared his/her screen",""),this.screenShareStat.emit(this.param.id+"___"+this.param.id===n.uuid?{type:"Self",Name:this.param.name}:{type:"Other",Name:o.name})},1e3),this.stopScreenShareButtonStat=!1)})}ngAfterViewInit(){this.route.queryParams.subscribe(t=>{this.param=t,this.getUsers(t.roomid),setInterval(()=>{this.studentID=t.id},2e3),this.ss.generateSocket(),inSession=!0,this.subSession=new StateSubscription(`wss://www.monetlive.com/${this.dynamicLink}/rtc/`,this.param.id,parseInt(this.param.room,10),this.ss.socket),this.managePublisher(),this.ss.socket.onAny((t,e)=>{this.socketEventListeners(t,e)})}),this.subSession.on("remote",({type:t,stream:e,slot:n,mid:i,sub:s,user:o})=>{setTimeout(()=>{this.getSubscribedUsers(t,e,s,n,i,o)},3e3)})}trackByUsers(t,e){return e.std_id}ngOnInit(){this.startTimer(),this.bhvSub.fullScreen$.subscribe(t=>{t&&(this.fullScreen=t,setTimeout(()=>{const t=document.getElementById("webcamvideo");[t.width,t.height,t.muted,t.autoplay,t.srcObject]=[300,300,!1,!0,this.userStream]},500))}),this.bhvSub.screenShare$.subscribe(t=>{""!==t&&(this.opacity=t)}),this.bhvSub.dynamicLink$.subscribe(t=>{this.dynamicLink=t}),this.bhvSub.faceData$.subscribe(t=>{this.faceDataState=t})}getUsers(t){this.as.getApi("user_list?id="+t).subscribe(t=>{if(t){if(t.response.filter(t=>t.std_id===this.param.id&&!t.screen)[0]||t.response&&t.response.push({active:!0,audio:!0,name:this.param.name,proctor:"student",roomid:this.param.roomid,screen:null,serverIP:"54.201.182.38",std_id:this.param.id,time:new Date,video:!0,webcam:!0}),t.response.length>1){const e=t.response.findIndex(t=>"proctor"===t.proctor);t.response.unshift(t.response.splice(e,1)[0])}if(this.selectUser){const e=this.selectUser.std_id;if(t.response.length>1){const n=t.response.findIndex(t=>t.std_id===e);t.response.unshift(t.response.splice(n,1)[0])}}this.studentsList=t.response.map(t=>{t.std_id===this.param.id&&(t.active=!0)}),this.studentsList=t.response.filter(t=>!1!==t.active),this.studentEmit.emit(this.studentsList)}})}scrollList(t){const e=document.getElementById("list");e.scrollTop="top"===t?e.scrollTop-200:e.scrollTop+200}ngOnDestroy(){this.pub={},this.timer&&clearInterval(this.timer),this.debounce&&clearTimeout(this.debounce),mediaDev.stop()}tryAgain(){this.ss.socket.connect(),this.router.navigate(["/student/dashboard"],{queryParamsHandling:"merge"}),this.as.getApiStatic("getRoomIp?roomid="+this.param.roomid).subscribe(t=>{fetchAvailableInstance(t.room.grp,t.room.instance),this.bhvSub.obDynamicLink(t.room.grp)})}}return t.\u0275fac=function(e){return new(e||t)(a.Rb(o.a),a.Rb(r.a),a.Rb(d.a),a.Rb(r.b),a.Rb(v.b),a.Rb(c.a),a.Rb(y.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["app-video-panel"]],viewQuery:function(t,e){if(1&t&&(a.Uc(L,1),a.Uc(M,1),a.Uc(k,1),a.Uc(j,1)),2&t){let t;a.Cc(t=a.gc())&&(e.studentContainer=t.first),a.Cc(t=a.gc())&&(e.screenShareStreem=t.first),a.Cc(t=a.gc())&&(e.audioview=t.first),a.Cc(t=a.gc())&&(e.scShareAudio=t.first)}},inputs:{configMediaSettings:"configMediaSettings",actionObj:"actionObj",module:"module",actions:"actions",selectUser:"selectUser",room:"room",Duration:"Duration"},outputs:{screenShareStat:"screenShareStat",resetConfigOptions:"resetConfigOptions",screenShareMediaEmit:"screenShareMediaEmit",userMediaEmit:"userMediaEmit",audioStatus:"audioStatus",studentEmit:"studentEmit",stopScreenShare:"stopScreenShare"},features:[a.Eb([o.a]),a.Db],decls:2,vars:6,consts:[[3,"room","duration","action","role","toggleMenu","refreshSession"],["fxLayout","row","style","min-height: calc(93vh); position: relative",3,"fxLayoutAlign","ngStyle",4,"ngIf"],["fxLayout","row",2,"min-height","calc(93vh)","position","relative",3,"fxLayoutAlign","ngStyle"],["id","webcamaudio","preload","none","autoplay","",3,"hidden"],["audioview",""],["id","scShareAudio","preload","none","autoplay","",3,"hidden"],["scShareAudio",""],["f-white","","pointer","","style","position: absolute; right: 0px; bottom: 50vh; background: red; z-index: 999;",3,"matTooltip","click",4,"ngIf"],["fxFlex","","class","screenshare-box",3,"fxFlexAlign","fxLayout","fxLayoutAlign","ngStyle",4,"ngIf"],["id","usersList","fxLayout","row","fxFlexAlign","start",3,"fxFlex"],["fxLayout","column","fxFlex","90",2,"height","80vh",3,"fxFlexOrder","ngStyle"],["mat-icon-button","","style","margin: 1% auto;",4,"ngIf"],["id","list","fxLayoutAlign","center start","fxLayoutGap","20px",1,"student-list",3,"fxFlex","fxLayout"],["studentContainer",""],["rowHeight","3:2","full-width","","gutterSize","5px",3,"cols"],["relative","",3,"ngClass","colspan","rowspan",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["f-white","","pointer","",2,"position","absolute","right","0px","bottom","50vh","background","red","z-index","999",3,"matTooltip","click"],["fxFlex","",1,"screenshare-box",3,"fxFlexAlign","fxLayout","fxLayoutAlign","ngStyle"],["id","screenShareStreem","height","100%","width","auto","autoplay","",1,"videocol",3,"fxHide"],["screenShareStreem",""],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","space-around center",2,"border","1px solid black","height","250px","width","350px","border-radius","4px"],["mat-icon-button","",2,"background","#5829A6"],["id","exit_to_app","f-white",""],["xlarge",""],["mat-raised-button","","color","primary",2,"background","#5829A6","border-radius","40px",3,"disabled","click"],[3,"ngModel","ngModelChange","click"],["mat-icon-button","",2,"margin","1% auto"],["id","arrow_up","f-white","",3,"click"],["relative","",3,"ngClass","colspan","rowspan"],["fxFill","","class","no-camera","fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","5px",4,"ngIf"],["fxLayout","column",1,"videodiv"],["id","webcamvideo","height","100%","width","100%","autoplay","",1,"videocol"],["fxLayout","row",4,"ngIf"],["fxFill","","fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","5px",1,"no-camera"],[1,"avatar",3,"ngStyle"],["f-white",""],["title-white14-400",""],["fxLayout","row"],[3,"ngClass"],["f-white","","large","",2,"vertical-align","middle"],[2,"height","100%","width","90%",3,"module","selectUser","std","mediaStreamObj"],["id","arrow_down","f-white","",3,"click"]],template:function(t,e){1&t&&(a.Xb(0,"app-top-bar",0),a.fc("toggleMenu",function(t){return e.Menu(t)})("refreshSession",function(){return e.tryAgain()}),a.Wb(),a.Nc(1,J,16,23,"div",1)),2&t&&(a.qc("room",e.room)("duration",e.duration)("action",a.tc(5,K))("role","student"),a.Fb(1),a.qc("ngIf",e.faceDataState))},directives:[_.a,i.n,l.f,l.e,i.o,u.c,l.a,l.b,l.d,l.g,w.a,i.m,g.a,h.a,u.b,b.a,O.a,C.s,C.v,w.c,i.l,u.a,l.h,P.a],styles:[".student-list[_ngcontent-%COMP%]{height:calc(100vh - 80px);overflow-y:auto;padding:10px}.student-list[_ngcontent-%COMP%]   .student-preview[_ngcontent-%COMP%]{box-sizing:border-box;background:hsla(0,0%,100%,.1)}.student-list-screenShare[_ngcontent-%COMP%]{height:calc(10%);overflow-x:auto;padding:10px}.student-list-screenShare[_ngcontent-%COMP%]   .student-preview[_ngcontent-%COMP%]{box-sizing:border-box;background:hsla(0,0%,100%,.1)}.bubble[_ngcontent-%COMP%]{color:#fff;border-radius:50%;height:30px;width:30px;display:flex;align-items:center;justify-content:center}.Low[_ngcontent-%COMP%]{background-color:#ff275a}.Medium[_ngcontent-%COMP%]{background-color:#ff8b4c}.High[_ngcontent-%COMP%]{background-color:#3ab147}.avatar[_ngcontent-%COMP%]{border:1px solid #eee;height:50px;width:50px;border-radius:50%;display:flex;text-align:center;align-items:center;justify-content:center;z-index:5}.overlay-actions[_ngcontent-%COMP%]{position:absolute;bottom:20px;transform:translateX(-50%);left:50%}.overlay[_ngcontent-%COMP%]{transition:all .3s linear;position:absolute;height:100%;width:100%;background:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.8) 95%);display:none}.student-preview[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{display:block}.student-preview[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff!important}.screenshare-box[_ngcontent-%COMP%]{background-color:#fff;padding:5px;border-radius:4px;height:450px;width:400px}.panel[_ngcontent-%COMP%]{margin:16px;height:auto}.panel[_ngcontent-%COMP%], .panel[_ngcontent-%COMP%]   .panel-head[_ngcontent-%COMP%]{border-radius:10px 10px 0 0}.panel[_ngcontent-%COMP%]   .panel-head[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.1);padding:10px}.panel[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{height:100%!important;width:100%!important}.redDot[_ngcontent-%COMP%]{color:red}.greenDot[_ngcontent-%COMP%]{color:green}mat-grid-tile[_ngcontent-%COMP%]{border:1px solid rgba(86,216,225,.16862745098039217)}mat-grid-list[_ngcontent-%COMP%]{width:100%}.screen-div[_ngcontent-%COMP%]{max-width:70%;height:calc(100vh - 134px);position:relative;margin-right:10px}.screen-div[_ngcontent-%COMP%]   .title-name[_ngcontent-%COMP%]{padding:8px;border-top-right-radius:5px;border-top-left-radius:5px;font-size:16px;text-align:center;position:absolute;bottom:0;background:rgba(0,0,0,.43137254901960786);color:#fff}.single-grid[_ngcontent-%COMP%]{display:block;width:70%;margin:auto}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto;grid-gap:10px;padding:10px}.grid-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center;padding:5px;font-size:30px;grid-row-start:1;grid-row-end:1;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.item1[_ngcontent-%COMP%]{grid-row-start:1!important;grid-row-end:3!important;grid-column-start:1;grid-column-end:3}.engagement[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:12px;font-weight:400;border-radius:50%;height:14px;width:14px;position:absolute;line-height:24px;z-index:10;top:5px;right:5px}.full-screen-div[_ngcontent-%COMP%]{width:70%;margin:0 auto}.single-view[_ngcontent-%COMP%]   .videodiv[_ngcontent-%COMP%]{height:100%;width:99%}mat-grid-tile[_ngcontent-%COMP%]   .video-title[_ngcontent-%COMP%]{position:absolute;top:5px;padding:5px;background-color:rgba(66,63,63,.58);color:#fff}mat-card[_ngcontent-%COMP%]{background-color:#fff!important}#webcamvideo[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}#arrow_down[_ngcontent-%COMP%]{margin:auto;transform:rotate(90deg);-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg)}#arrow_up[_ngcontent-%COMP%], #exit_to_app[_ngcontent-%COMP%]{margin:auto;transform:rotate(270deg);-webkit-transform:rotate(270deg);-moz-transform:rotate(270deg)}#list[_ngcontent-%COMP%]{scroll-behavior:smooth;min-width:inherit!important}"]}),t})(),tt=(()=>{class t{constructor(t,e){this.data=t,this.dialogRef=e}close(t){this.dialogRef.close(),t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)(a.Rb(v.a),a.Rb(v.f))},t.\u0275cmp=a.Lb({type:t,selectors:[["app-bottom-sheet"]],decls:7,vars:0,consts:[["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px","fxFlex","100"],["src","../../../../../assets/throw-chalk.gif","height","350px","width","600px"],["title-black16-400",""],["fxLayout","row","fxLayoutAlign","center center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(a.Xb(0,"div",0),a.Sb(1,"img",1),a.Xb(2,"span",2),a.Pc(3,"Please be attentive in the class"),a.Wb(),a.Xb(4,"div",3),a.Xb(5,"button",4),a.fc("click",function(t){return e.close(t)}),a.Pc(6,"Ok"),a.Wb(),a.Wb(),a.Wb())},directives:[l.f,l.e,l.g,l.b,b.a],encapsulation:2}),t})();var et=n("iQ2w"),nt=n("TU8p");const it=function(t){return{opacity:t}};function st(t,e){if(1&t&&a.Sb(0,"video",21),2&t){const t=a.jc();a.qc("ngStyle",a.uc(1,it,!0===t.fullScreen?0:1))}}const ot=function(){return{background:"#252030"}},at=function(){return{background:"rgba(0,0,0,0.4)"}};function rt(t,e){if(1&t){const t=a.Yb();a.Xb(0,"div",22),a.Xb(1,"app-call-sidenav",23),a.fc("selectUser",function(e){return a.Fc(t),a.jc().selectUser=e}),a.Wb(),a.Wb()}if(2&t){const t=a.jc();a.Fb(1),a.qc("ngStyle",!0===t.fullScreen?a.tc(3,ot):a.tc(4,at))("moduleName","student")("students",t.students)}}const ct=function(){return{left:"18vw",width:"82vw"}},dt=function(){return{left:"0vw",width:"100vw"}};function lt(t,e){if(1&t){const t=a.Yb();a.Xb(0,"app-video-panel",24),a.fc("screenShareStat",function(e){return a.Fc(t),a.jc().getStat(e)})("screenShareMediaEmit",function(e){return a.Fc(t),a.jc().getScreenShare(e)})("resetConfigOptions",function(e){return a.Fc(t),a.jc().configMediaSettings=e})("userMediaEmit",function(e){return a.Fc(t),a.jc().getUserStream(e)})("audioStatus",function(e){return a.Fc(t),a.jc().getAudioStatus(e)})("studentEmit",function(e){return a.Fc(t),a.jc().getStudents(e)})("stopScreenShare",function(){a.Fc(t);const e=a.jc();return e.shareScreen(e.param.roomid,e.actions[1])}),a.Wb()}if(2&t){const t=a.jc();a.qc("ngStyle",!0===t.dispSideNav?a.tc(8,ct):a.tc(9,dt))("configMediaSettings",t.configMediaSettings)("selectUser",t.selectUser)("actions",t.actions)("actionObj",t.actionObj)("room",t.room)("Duration",t.duration)("module","student")}}function ut(t,e){if(1&t){const t=a.Yb();a.Xb(0,"app-chat",25),a.fc("badgeCount",function(e){return a.Fc(t),a.jc().msgCount=e})("messagePanelOpen",function(e){return a.Fc(t),a.jc().messagePanel=e})("messagePanelClose",function(e){a.Fc(t);const n=a.jc();return n.messagePanel=e,n.receivedMessageEvent(e)}),a.Wb()}if(2&t){const t=a.jc();a.qc("param",t.param)("messagePanel",t.messagePanel)("role","student")("students",t.students)}}function ht(t,e){if(1&t&&(a.Xb(0,"mat-icon",28),a.Pc(1),a.Wb()),2&t){const t=a.jc().$implicit,e=a.jc();a.rc("matBadge","Chat"===t.name?e.msgCount:""),a.qc("inline",!0)("matBadgeHidden",e.msgCount<=0||e.messagePanel),a.Fb(1),a.Rc(" ",t.status?t.icon:t.iconop," ")}}function bt(t,e){if(1&t){const t=a.Yb();a.Vb(0),a.Xb(1,"button",26),a.fc("click",function(){a.Fc(t);const n=e.$implicit,i=a.jc();return n.status=!n.status,i.mainActions(n)}),a.Xb(2,"mat-icon",27),a.Pc(3),a.Wb(),a.Nc(4,ht,2,4,"ng-template"),a.Wb(),a.Ub()}if(2&t){const t=e.$implicit,n=a.jc();a.Fb(1),a.qc("ngClass","leave"===t.value?"leave_button":"other_buttons")("matTooltip",t.status?t.name:t.nameop||"")("disabled","screen"===t.value&&!1===t.status),a.Fb(1),a.rc("matBadge","Chat"===t.name?n.msgCount:""),a.qc("ngClass","other_buttons")("inline",!0)("matTooltip","screen"===t.value&&!1===t.status?t.nameop:"")("matBadgeHidden",n.msgCount<=0||n.messagePanel),a.Fb(1),a.Qc(t.status?t.icon:t.iconop)}}const gt=function(){return["message-panel"]};let mt=(()=>{class t{constructor(t,e,n,i,s,o){this.sl=t,this.route=e,this.datePipe=n,this.ss=i,this.api=s,this.bhvSub=o,this.configMediaSettings=!1,this.unfoldAction=!1,this.checkSS=!1,this.fullScreen=!0,this.dispSideNav=!0,this.loaded=!1,this.selectUser=!1,this.colsize=6,this.flexValue="243px",this.duration={time:"00:00:00",duration:0},this.date=new Date,this.students=[],this.msgCount=0,this.actionObj={name:"",value:!1},this.video_spinner={loadstart:!0,buffering:!1,canplay:!1},this.actions=[{name:"Mute",nameop:"Unmute",value:"audio",icon:"mic",status:!0,iconop:"mic_off"},{name:"Stop Camera",nameop:"Share Camera",value:"video",icon:"videocam",status:!0,iconop:"videocam_off"},{name:"Leave Room",value:"leave",status:!0,icon:"call_end",iconop:"call_end"},{name:"Share screen",value:"screen",nameop:"Stop Sharing",icon:"screen_share",status:!0,iconop:"stop_screen_share"},{name:"Put hand down",nameop:"Raise hand",value:"hand",icon:"do_not_touch",status:!1,iconop:"pan_tool"},{name:"Chat",value:"chat",icon:"speaker_notes_off",status:!1,iconop:"message"}],this.messagePanel=!1,this.route.queryParams.subscribe(t=>{t&&(this.param=t,this.getRoom(t.roomid))})}onLoadStart(t){t&&(this.video_spinner.loadstart=!0)}getRoom(t){this.api.getApi("getInviteRoom?roomid="+t).subscribe(t=>{t&&(this.room=t.response)})}ngOnInit(){this.route.queryParams.subscribe(t=>{t&&(this.studentID=t.tid)}),0===this.duration.duration&&setInterval(()=>{this.duration.duration++,this.duration.time=this.datePipe.transform(1e3*this.duration.duration,"H:mm:ss","UTC")||""},1e3),this.bhvSub.screenShare$.subscribe(t=>{""!==t&&(console.warn("Response -> Bhvr Subject -> ScreenShare Val (Call Component) :",t),this.checkSS=!this.fullScreen&&t,this.actions[3].status=!t,this.dispSideNav=t&&!this.fullScreen?!t:!t||!this.fullScreen||t)}),this.bhvSub.fullScreen$.subscribe(t=>{console.warn("Full Screen BHV (call) :",t),""===t&&void 0===t||(this.fullScreen=t)}),this.sl.load("janus").then(t=>{this.sl.load("user").then(e=>{t[0].loaded&&e[0].loaded&&(this.loaded=!0,console.log("MonetConference file loaded !"))})});const t=[{value:30,cat:"low"},{value:50,cat:"average"},{value:70,cat:"high"}];this.students.map(e=>(t.map(t=>{e.value>=t.value&&(e.cat=t.cat)}),e))}getAudioStatus(t){t.from===this.param.id&&(this.actions[0].status=t.status)}getStudents(t){this.students=t}getUserStream(t){const e=document.getElementById("userVideo");[e.width,e.height,e.muted,e.autoplay,e.srcObject]=[300,300,!1,!0,t]}shareScreen(t,e){}mainActions(t){switch([this.actionObj.name,this.actionObj.value]=[t.value,t.status],t.value){case"screen":this.actionObj=Object.assign({},this.actionObj),this.bhvSub.obScreenShare(!0);break;case"video":console.warn("Action triggered :",t.value,t.status),this.actionObj=Object.assign({},this.actionObj);break;case"audio":this.actionObj=Object.assign({},this.actionObj);break;case"hand":this.ss.socket.emit("raise-hand",{from:this.param.id,status:t.status});break;case"leave":console.warn("Leave -> student dashboard",t.value,t.status),this.actionObj=Object.assign({},this.actionObj);break;case"chat":this.check(t.status);break;default:console.log("Unknown")}}toggleView(t){[this.actionObj.name,this.actionObj.value]=["toggle-view",t],this.actionObj=Object.assign({},this.actionObj)}colsizeChange(t){console.log(t),this.colsize=t.wide}setSideNavSize(t){this.flexValue=t}check(t){this.messagePanel=t,console.log(this.messagePanel)}receivedMessageEvent(t){this.actions[5].status=t}ngOnChanges(t){console.warn(t),(null==t?void 0:t.audioStatus)&&console.warn("Sc audio stats :",t.audioStatus.currentValue)}getScreenShare(t){console.warn("ScreenShare Stream Object :",t),setTimeout(()=>{const e=document.getElementById("screenShareVideo");e&&([e.width,e.height,e.muted,e.autoplay,e.srcObject]=[300,300,!1,!0,t])},1e3)}SidePanel(){let t=0;console.log("collapse side-panel : "+this.unfoldAction);let e=this.unfoldAction?18:0,n=this.unfoldAction?18:0,i=this.unfoldAction?82:100;const s=document.getElementById("sideNav"),o=document.getElementById("video_streams");if(this.unfoldAction){const a=setInterval(()=>{s.style.width=e--+"vw",o.style.left=n--+"vw",o.style.width=i+t+++"vw",e<0&&clearInterval(a)},1)}else{const a=setInterval(()=>{s.style.width=e+++"vw",o.style.left=n+++"vw",o.style.width=i-t+++"vw",e>18&&clearInterval(a)},1)}}getStat(t){this.actions[3].nameop="object"==typeof t?"Self"===t.type?"You are sharing your screen":"Screen is being Shared by "+t.Name:t}}return t.\u0275fac=function(e){return new(e||t)(a.Rb(s.a),a.Rb(r.a),a.Rb(i.e),a.Rb(c.a),a.Rb(o.a),a.Rb(d.a))},t.\u0275cmp=a.Lb({type:t,selectors:[["app-student-dashboard"]],features:[a.Eb([s.a,i.e,o.a]),a.Db],decls:39,vars:21,consts:[["full-height","",1,"userVid"],["fxLayoutAlign"," center","fxFill",""],["id","userVideo","height","100%","width","100%","autoplay","",3,"ngClass","ngStyle","loadstart"],["id","screenShareVideo","class","videocol","height","100%","width","100%","autoplay","",3,"ngStyle",4,"ngIf"],["fxLayout","row"],["fxLayout","column","fxFlex","10%",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center end"],["id","video_streams",3,"ngStyle","configMediaSettings","selectUser","actions","actionObj","room","Duration","module","screenShareStat","screenShareMediaEmit","resetConfigOptions","userMediaEmit","audioStatus","studentEmit","stopScreenShare",4,"ngIf"],[3,"ngClass","hidden"],[3,"param","messagePanel","role","students","badgeCount","messagePanelOpen","messagePanelClose",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"float-timer",3,"matTooltip"],["title-white18-200",""],["mat-icon-button","","title-white18-200","","id","unfold",3,"matTooltip","disabled","click"],[2,"font-size","30px",3,"inline"],["fxLayout","row","fxLayoutGap","30px",1,"float-panel"],[4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Settings",2,"line-height","60px",3,"matMenuTriggerFor"],[1,"other_buttons"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["id","screenShareVideo","height","100%","width","100%","autoplay","",1,"videocol",3,"ngStyle"],["fxLayout","column","fxFlex","10%"],["id","sideNav",2,"width","18vw","height","calc(100vh)",3,"ngStyle","moduleName","students","selectUser"],["id","video_streams",3,"ngStyle","configMediaSettings","selectUser","actions","actionObj","room","Duration","module","screenShareStat","screenShareMediaEmit","resetConfigOptions","userMediaEmit","audioStatus","studentEmit","stopScreenShare"],[3,"param","messagePanel","role","students","badgeCount","messagePanelOpen","messagePanelClose"],["mat-icon-button","",3,"ngClass","matTooltip","disabled","click"],["matBadgeColor","accent","matBadgeSize","small",3,"ngClass","inline","matTooltip","matBadgeHidden","matBadge"],["matBadgeColor","accent","matBadgeSize","small",3,"inline","matBadgeHidden","matBadge"]],template:function(t,e){if(1&t&&(a.Xb(0,"div",0),a.Xb(1,"div",1),a.Xb(2,"video",2),a.fc("loadstart",function(t){return e.onLoadStart(t)}),a.Wb(),a.Nc(3,st,1,3,"video",3),a.Wb(),a.Xb(4,"div",4),a.Nc(5,rt,2,5,"div",5),a.Xb(6,"div",6),a.Nc(7,lt,1,10,"app-video-panel",7),a.Wb(),a.Wb(),a.Xb(8,"div",8),a.Nc(9,ut,1,4,"app-chat",9),a.Wb(),a.Vb(10),a.Xb(11,"div",10),a.Xb(12,"span",11),a.Pc(13),a.Wb(),a.Xb(14,"button",12),a.fc("click",function(){return e.unfoldAction=!e.unfoldAction,e.SidePanel()}),a.Xb(15,"mat-icon",13),a.Pc(16),a.Wb(),a.Wb(),a.Wb(),a.Xb(17,"div",14),a.Nc(18,bt,5,9,"ng-container",15),a.Xb(19,"button",16),a.Xb(20,"mat-icon",17),a.Pc(21,"settings"),a.Wb(),a.Wb(),a.Wb(),a.Xb(22,"mat-menu",null,18),a.Xb(24,"button",19),a.fc("click",function(){return e.toggleView(!1)}),a.Xb(25,"mat-icon"),a.Pc(26,"grid_on"),a.Wb(),a.Xb(27,"span"),a.Pc(28,"Grid View"),a.Wb(),a.Wb(),a.Xb(29,"button",19),a.fc("click",function(){return e.toggleView(!0)}),a.Xb(30,"mat-icon"),a.Pc(31,"fullscreen"),a.Wb(),a.Xb(32,"span"),a.Pc(33,"Fullscreen"),a.Wb(),a.Wb(),a.Xb(34,"button",20),a.fc("click",function(){return e.configMediaSettings=!0}),a.Xb(35,"mat-icon"),a.Pc(36,"build"),a.Wb(),a.Xb(37,"span"),a.Pc(38,"Configure"),a.Wb(),a.Wb(),a.Wb(),a.Ub(),a.Wb()),2&t){const t=a.Dc(23);a.Fb(2),a.qc("ngClass",!0===e.dispSideNav?"videocol":"screenShare")("ngStyle",a.uc(18,it,!0===e.fullScreen?0:1)),a.Fb(1),a.qc("ngIf",e.checkSS),a.Fb(2),a.qc("ngIf",e.dispSideNav),a.Fb(2),a.qc("ngIf",e.loaded),a.Fb(1),a.qc("ngClass",a.tc(20,gt))("hidden",!e.messagePanel),a.Fb(1),a.qc("ngIf",e.param),a.Fb(2),a.qc("matTooltip","Call duration"),a.Fb(2),a.Qc(null==e.duration?null:e.duration.time),a.Fb(1),a.qc("matTooltip",e.unfoldAction?"Expand":"Collapse")("disabled",!e.fullScreen),a.Fb(1),a.qc("inline",!0),a.Fb(1),a.Qc(e.unfoldAction?"unfold_less":"unfold_more"),a.Fb(2),a.qc("ngForOf",e.actions),a.Fb(1),a.qc("matMenuTriggerFor",t),a.Fb(5),a.qc("disabled",e.checkSS||!e.actions[3].status),a.Fb(5),a.qc("disabled",e.checkSS||!e.actions[3].status)}},directives:[l.e,l.h,i.l,u.a,i.o,u.c,i.n,l.f,l.g,h.a,b.a,g.a,i.m,m.d,m.a,m.b,l.b,p.a,Z,et.a,nt.a],styles:[".side-nav[_ngcontent-%COMP%]{height:calc(100vh - 43px);overflow-y:auto}.message-btn[_ngcontent-%COMP%]{position:absolute;right:20px;bottom:20px}.message-panel[_ngcontent-%COMP%]{position:fixed;right:10px;bottom:0;height:500px;width:300px;background:#fff;z-index:20}.leave_button[_ngcontent-%COMP%]{background:#e71c31;height:60px;width:60px;border-radius:50px;font-size:35px;line-height:55px}.other_buttons[_ngcontent-%COMP%]{height:50px;width:50px;font-size:40px;line-height:55px}.userVid[_ngcontent-%COMP%]{position:relative;overflow:hidden}#sideNav[_ngcontent-%COMP%]{position:absolute;top:0;left:0}#userVideo[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}#video_streams[_ngcontent-%COMP%]{position:absolute;top:0}.screenShare[_ngcontent-%COMP%]{display:none}#screenShareVideo[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:-1}#unfold[_ngcontent-%COMP%]{transform:rotate(270deg);-webkit-transform:rotate(270deg);-moz-transform:rotate(270deg)}"]}),t})();var pt=n("FpXt"),ft=n("kmnG"),vt=n("qFsG"),St=n("f0Cb"),xt=n("sOF7"),yt=n("4GZO"),_t=n("ioy8"),wt=n("tk/3"),Ot=n("dNgK"),Ct=n("2ChS"),Pt=n("pMjG"),Lt=n("rjSt"),Mt=n("XEBg");let kt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Pb({type:t}),t.\u0275inj=a.Ob({imports:[[pt.a,g.b,b.b,h.b,wt.c,Ot.c,Ct.a,w.b,v.e,m.c,Pt.a,Lt.a,Mt.a,C.m,O.b]]}),t})();var jt=n("folJ"),Ft=n("Xa2L");const It=[{path:"",component:mt}];let At=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Pb({type:t}),t.\u0275inj=a.Ob({imports:[[r.d.forChild(It),i.c,pt.a,ft.e,vt.c,b.b,St.b,C.x,xt.a,h.b,g.b,nt.b,yt.a,_t.a,kt,jt.a,Lt.a,g.b,Ft.b,m.c]]}),t})()}}]);