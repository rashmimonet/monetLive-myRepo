(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{UXJo:function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return l});var o=n("ofXK"),i=n("fXoL");class r{constructor(t,e){this._document=e;const n=this._textarea=this._document.createElement("textarea"),o=n.style;o.position="fixed",o.top=o.opacity="0",o.left="-999em",n.setAttribute("aria-hidden","true"),n.value=t,this._document.body.appendChild(n)}copy(){const t=this._textarea;let e=!1;try{if(t){const n=this._document.activeElement;t.select(),t.setSelectionRange(0,t.value.length),e=this._document.execCommand("copy"),n&&n.focus()}}catch(n){}return e}destroy(){const t=this._textarea;t&&(t.parentNode&&t.parentNode.removeChild(t),this._textarea=void 0)}}let s=(()=>{class t{constructor(t){this._document=t}copy(t){const e=this.beginCopy(t),n=e.copy();return e.destroy(),n}beginCopy(t){return new r(t,this._document)}}return t.\u0275fac=function(e){return new(e||t)(i.bc(o.d))},t.\u0275prov=Object(i.Nb)({factory:function(){return new t(Object(i.bc)(o.d))},token:t,providedIn:"root"}),t})();const a=new i.s("CDK_COPY_TO_CLIPBOARD_CONFIG");let c=(()=>{class t{constructor(t,e,n){this._clipboard=t,this._ngZone=e,this.text="",this.attempts=1,this.copied=new i.o,this._pending=new Set,n&&null!=n.attempts&&(this.attempts=n.attempts)}copy(t=this.attempts){if(t>1){let e=t;const n=this._clipboard.beginCopy(this.text);this._pending.add(n);const o=()=>{const t=n.copy();t||!--e||this._destroyed?(this._currentTimeout=null,this._pending.delete(n),n.destroy(),this.copied.emit(t)):this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(o,1))};o()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(t=>t.destroy()),this._pending.clear(),this._destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(s),i.Rb(i.B),i.Rb(a,8))},t.\u0275dir=i.Mb({type:t,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(t,e){1&t&&i.fc("click",function(){return e.copy()})},inputs:{text:["cdkCopyToClipboard","text"],attempts:["cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"}}),t})(),l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Pb({type:t}),t.\u0275inj=i.Ob({}),t})()},folJ:function(t,e,n){"use strict";n.d(e,"a",function(){return g});var o=n("FpXt"),i=n("qFsG"),r=n("kmnG"),s=n("bTqV"),a=n("Wp6s"),c=n("3Pt+"),l=n("wZkO"),u=n("STbY"),d=n("d3UM"),b=n("fXoL");let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=b.Pb({type:t}),t.\u0275inj=b.Ob({imports:[[o.a,i.c,r.e,s.b,a.b,c.m,l.d,u.c,d.b]]}),t})()},pMjG:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var o=n("ofXK"),i=n("FpXt"),r=n("Xa2L"),s=n("Qu3c"),a=n("NFeN"),c=n("bTqV"),l=n("fXoL");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Pb({type:t}),t.\u0275inj=l.Ob({imports:[[o.c,i.a,r.b,s.b,a.b,c.b]]}),t})()},q1A0:function(t,e,n){"use strict";n.d(e,"a",function(){return S});var o=n("fXoL"),i=n("v0EB");let r=(()=>{class t{transform(t,e){const n=JSON.parse(t).filter(t=>t.action).length;return"approve"===e?n<1:"selectAllButton"===e?n<JSON.parse(t).length:void 0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Qb({name:"selectionStatus",type:t,pure:!0}),t})();var s=n("0IaG"),a=n("3Pt+"),c=n("kYN2"),l=n("LUsR"),u=n("XiUz"),d=n("bTqV"),b=n("NFeN"),g=n("ofXK"),h=n("znSr"),f=n("bSwM"),p=n("Qu3c");function m(t,e){if(1&t){const t=o.Yb();o.Xb(0,"mat-checkbox",18),o.fc("click",function(){o.Fc(t);const e=o.jc(),n=e.$implicit,i=e.index,r=o.jc();return n.value.action=!n.value.action,r.action(i)}),o.Wb()}if(2&t){const t=o.jc().$implicit;o.qc("checked",t.value.action)}}function v(t,e){if(1&t){const t=o.Yb();o.Xb(0,"div",12),o.Xb(1,"div",13),o.Nc(2,m,1,1,"mat-checkbox",14),o.Sb(3,"input",15),o.Xb(4,"button",16),o.fc("click",function(){o.Fc(t);const n=e.index,i=e.$implicit;return o.jc().approveUser(n,i.value)}),o.Pc(5,"Approve"),o.Wb(),o.Xb(6,"button",17),o.fc("click",function(){o.Fc(t);const n=e.index,i=e.$implicit;return o.jc().removeUser(n,i.value)}),o.Pc(7,"Reject"),o.Wb(),o.Wb(),o.Wb()}if(2&t){const t=e.index,n=o.jc();o.Fb(1),o.qc("formGroupName",t),o.Fb(1),o.qc("ngIf",n.users.controls.length>1)}}function y(t,e){if(1&t){const t=o.Yb();o.Xb(0,"button",19),o.fc("click",function(){return o.Fc(t),o.jc().onSubmit()}),o.kc(1,"selectionStatus"),o.Pc(2,"Approve"),o.Wb()}if(2&t){const t=o.jc();o.qc("disabled",o.mc(1,1,t.myjson.stringify(t.usersListForm.value.users),"approve"))}}const w=function(t,e){return{color:t,border:e}};function x(t,e){if(1&t){const t=o.Yb();o.Xb(0,"button",20),o.fc("click",function(){return o.Fc(t),o.jc().selectAll()}),o.kc(1,"selectionStatus"),o.kc(2,"selectionStatus"),o.kc(3,"selectionStatus"),o.Xb(4,"mat-icon"),o.Pc(5,"grading"),o.Wb(),o.Wb()}if(2&t){const t=o.jc();o.qc("ngStyle",o.vc(11,w,o.mc(1,2,t.myjson.stringify(t.usersListForm.value.users),"selectAllButton")?"#00000042":"#3f51b5",o.mc(2,5,t.myjson.stringify(t.usersListForm.value.users),"selectAllButton")?"1px solid #00000042":"1px solid #3f51b5"))("matTooltip",o.mc(3,8,t.myjson.stringify(t.usersListForm.value.users),"selectAllButton")?"Select All":"Unselect All")}}const C=function(t){return{overflowY:t}};let k=(()=>{class t{constructor(t,e,n,o){this.dialogRef=t,this.fb=e,this.ss=n,this.bhvSub=o,this.responseArr=[],this.selectAllCheck=!1,this.myjson=JSON,this.usersListForm=e.group({users:e.array([])})}get users(){return this.usersListForm.get("users")}newUser(t,e,n,o){return this.fb.group({name:t,id:e,action:n,socketId:o})}addUser(t,e,n,o){this.users.push(this.newUser(t,e,n,o))}approveUser(t,e){this.users.removeAt(t),null!==e&&(this.ss.socket.emit("join-response",{join:[{uuid:e.id,sid:e.socketId,confirmed:!0}]}),this.bhvSub.obRemoveFromWaitingList({userName:e.name,userId:e.id,socketId:null})),this.users.length<1&&this.dialogRef.close()}removeUser(t,e){this.users.removeAt(t),null!==e&&(this.ss.socket.emit("join-response",{join:[{uuid:e.id,sid:e.socketId,confirmed:e.action}]}),this.bhvSub.obRemoveFromWaitingList({userName:e.name,userId:e.id,socketId:null})),this.users.length<1&&this.dialogRef.close()}action(t){const e=this.usersListForm.get("users");e.at(t).value.action=!e.at(t).value.action}onSubmit(){this.usersListForm.value.users.forEach((t,e)=>{!0===t.action&&(this.responseArr=[],this.removeUser(e,t),this.responseArr.push({uuid:t.id,sid:t.socketId,confirmed:t.action}))}),this.ss.socket.emit("join-response",{join:this.responseArr}),this.dialogRef.close()}ngOnInit(){this.bhvSub.waitingList$.subscribe(t=>{t.forEach(t=>{this.usersListForm.value.users.some(e=>e.id===t.userId)||this.addUser(null==t?void 0:t.userName,null==t?void 0:t.userId,!1,null==t?void 0:t.socketId)})})}checkSelectAllEqual(){return this.usersListForm.value.users.filter(t=>t.action).length!==this.usersListForm.value.users.length}getFlexVal(){return`calc(${4*this.usersListForm.value.users.length}vh)`}selectAll(){this.selectAllCheck=!!this.checkSelectAllEqual()&&!this.selectAllCheck,this.usersListForm.value.users.forEach(t=>t.action=this.selectAllCheck)}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(s.f),o.Rb(a.g),o.Rb(c.a),o.Rb(l.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-waiting-list"]],features:[o.Eb([r])],decls:14,vars:8,consts:[["fxFlex","100","fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px",2,"position","relative","height","100%","max-height","45vh"],["mat-mini-fab","",1,"close-button",2,"background","black",3,"click"],["color","warn",1,"close-icon"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","20",2,"background","#A9A9A9","width","100%","padding","2% 0","width","100%"],[2,"color","white","font-size","24px","font-weight","400"],[2,"width","80%","position","relative",3,"formGroup"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","10px",2,"width","100%"],["fxLayout","column","fxLayoutGap","10px","formArrayName","users",2,"width","100%","max-height","30vh !important",3,"fxFlex","ngStyle"],["style","width: 100%",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px"],["mat-raised-button","","type","submit","approveBtn","",3,"disabled","click",4,"ngIf"],["mat-mini-fab","","approveBtn","","style","background-color: transparent; box-shadow: none;",3,"ngStyle","matTooltip","click",4,"ngIf"],[2,"width","100%"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px","arrayInput","",3,"formGroupName"],["formControlName","action",3,"checked","click",4,"ngIf"],["type","text","formControlName","name","readonly","",2,"border","0","outline","none"],["mat-raised-button","","pointer","",2,"background","#52A136","color","white","border-radius","20px",3,"click"],["mat-raised-button","","pointer","",2,"background","#D61A3C","color","white","border-radius","20px",3,"click"],["formControlName","action",3,"checked","click"],["mat-raised-button","","type","submit","approveBtn","",3,"disabled","click"],["mat-mini-fab","","approveBtn","",2,"background-color","transparent","box-shadow","none",3,"ngStyle","matTooltip","click"]],template:function(t,e){1&t&&(o.Xb(0,"div",0),o.Xb(1,"button",1),o.fc("click",function(){return e.dialogRef.close({result:e.responseArr})}),o.Xb(2,"mat-icon",2),o.Pc(3,"close"),o.Wb(),o.Wb(),o.Xb(4,"div",3),o.Xb(5,"span",4),o.Pc(6,"Waiting Room"),o.Wb(),o.Wb(),o.Xb(7,"form",5),o.Xb(8,"div",6),o.Xb(9,"div",7),o.Nc(10,v,8,2,"div",8),o.Wb(),o.Xb(11,"div",9),o.Nc(12,y,3,4,"button",10),o.Nc(13,x,6,14,"button",11),o.Wb(),o.Wb(),o.Wb(),o.Wb()),2&t&&(o.Fb(7),o.qc("formGroup",e.usersListForm),o.Fb(2),o.qc("fxFlex",e.getFlexVal())("ngStyle",o.uc(6,C,e.users.controls.length>4?"scroll":"")),o.Fb(1),o.qc("ngForOf",e.users.controls),o.Fb(2),o.qc("ngIf",e.users.controls.length>1),o.Fb(1),o.qc("ngIf",e.users.controls.length>1))},directives:[u.b,u.f,u.e,u.g,d.a,b.a,a.A,a.t,a.k,a.f,g.o,h.c,g.m,g.n,a.l,a.d,a.s,a.i,f.a,p.a],pipes:[r],styles:[".example-section[_ngcontent-%COMP%]{margin:12px 0}.close-button[_ngcontent-%COMP%]{background:#000;position:absolute;z-index:99}.close-icon[_ngcontent-%COMP%]{transition:1s ease-in-out;color:#fff;display:flex}  .icon-outside .close-button{float:right;top:-24px;right:-19px;border:1px solid #fff}  .icon-outside .mat-dialog-container{overflow:unset}[approveBtn][_ngcontent-%COMP%]{color:#fff;margin:15% 0;background:rgba(113,9,139,.87)}[arrayInput][_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;text-transform:capitalize}#checkList[_ngcontent-%COMP%]{position:absolute;color:#1e90ff;top:10px;right:10px}"]}),t})();var _=n("tyNb"),O=n("0Lug"),P=n("iiAa"),L=n("UXJo"),F=n("TU8p");const M=["waitingRoomAudio"];function X(t,e){if(1&t&&(o.Xb(0,"button",12),o.Xb(1,"mat-icon",13),o.Pc(2,"person_add"),o.Wb(),o.Wb()),2&t){const t=o.jc();o.qc("cdkCopyToClipboard",t.link)("matTooltip","Copy meeting link")}}function A(t,e){if(1&t){const t=o.Yb();o.Vb(0),o.Xb(1,"button",14),o.fc("click",function(){return o.Fc(t),o.jc().viewWaitingUsers()}),o.Xb(2,"mat-icon",13),o.Pc(3,"people"),o.Wb(),o.Wb(),o.Ub()}if(2&t){const t=o.jc();o.Fb(1),o.rc("matBadge",t.waitingUsersList.length),o.qc("matTooltip","Click to view users in Waiting Room")}}let S=(()=>{class t{constructor(t,e,n,i,r,s){this.route=t,this.api=e,this.bhvSub=n,this.dialog=i,this.sl=r,this.utility=s,this.toggleMenu=new o.o,this.refreshSession=new o.o,this.waitingUsersList=[],t.queryParams.subscribe(t=>{var e,n,o;this.name=(null===(n=null===(e=null==t?void 0:t.name)||void 0===e?void 0:e.slice(0,1))||void 0===n?void 0:n.toUpperCase())||"T",this.link=(null===(o=null===window||void 0===window?void 0:window.location)||void 0===o?void 0:o.origin)+"/student/login?roomid="+(null==t?void 0:t.roomid)+"&room="+(null==t?void 0:t.room)+"&matrixScore="+JSON.parse(localStorage.getItem("userPlanDetails")||"{}").realTimeScores})}ngOnInit(){this.sl.load("janus").then(()=>this.sl.load("user").then(()=>{})),this.bhvSub.fullScreen$.subscribe(t=>{this.changeBackground(t)}),this.bhvSub.waitingList$.subscribe(t=>{this.waitingUsersList=t,t.length&&(this.waitingRoomAudio.nativeElement.play(),this.utility.notify("New user entered in waiting room",""))})}ngAfterViewInit(){this.waitingRoomAudio.nativeElement.src="../../../assets/waitingRoom.ogg"}changeBackground(t){document.getElementById("topbar").style.background=t?"black":"rgba(0,0,0,0.4)"}Menu(t){this.toggleMenu.emit(t)}viewWaitingUsers(){this.dialogOpener=this.dialog.open(k,{panelClass:["test-media-container","icon-outside"],hasBackdrop:!0,width:"40%",height:"auto",backdropClass:"backdropBackground"}).afterClosed().subscribe(t=>{this.dialogOpener=null})}refresh(){confirm("Are you sure you want to refresh ? \nRefreshing this call will restart the session again.")&&this.refreshSession.emit(!0)}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(_.a),o.Rb(i.a),o.Rb(l.a),o.Rb(s.b),o.Rb(O.a),o.Rb(P.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-top-bar"]],viewQuery:function(t,e){if(1&t&&o.Uc(M,1),2&t){let t;o.Cc(t=o.gc())&&(e.waitingRoomAudio=t.first)}},inputs:{waitingList:"waitingList",room:"room",action:"action",duration:"duration",role:"role"},outputs:{toggleMenu:"toggleMenu",refreshSession:"refreshSession"},features:[o.Eb([i.a])],decls:16,vars:9,consts:[["fxLayout","row","id","topbar","fxLayoutAlign","space-between start","fxLayoutGap","28px",2,"padding","8px 12px 0px 8px","border-bottom","0.5px solid #333","height","7vh","width","99%"],[3,"hidden"],["waitingRoomAudio",""],["fxLayout","column"],["title-white18-300",""],["title-white12-300",""],["fxLayoutAlign","end center","fxLayoutGap","10px",1,"row",2,"place-self","center"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","10px"],["mat-icon-button","","style","background-image: linear-gradient(to right, #77246C , #1E5AA1); color: white",3,"cdkCopyToClipboard","matTooltip",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"user-avatar",2,"background-image","linear-gradient(to right, #77246C , #1E5AA1)","color","white"],["title-white16-300",""],[4,"ngIf"],["mat-icon-button","",2,"background-image","linear-gradient(to right, #77246C , #1E5AA1)","color","white",3,"cdkCopyToClipboard","matTooltip"],["f-white",""],["id","waitingUsers","mat-icon-button","","matBadgeColor","warn",2,"background-image","linear-gradient(to right, #77246C , #1E5AA1)","color","white",3,"matBadge","matTooltip","click"]],template:function(t,e){1&t&&(o.Xb(0,"div",0),o.Sb(1,"audio",1,2),o.Xb(3,"div",3),o.Xb(4,"span",4),o.Pc(5),o.Wb(),o.Xb(6,"span",5),o.Pc(7),o.kc(8,"date"),o.Wb(),o.Wb(),o.Xb(9,"div",6),o.Xb(10,"div",7),o.Nc(11,X,3,2,"button",8),o.Xb(12,"div",9),o.Xb(13,"span",10),o.Pc(14),o.Wb(),o.Wb(),o.Wb(),o.Nc(15,A,4,2,"ng-container",11),o.Wb(),o.Wb()),2&t&&(o.Fb(1),o.qc("hidden",!0),o.Fb(4),o.Qc(null==e.room?null:e.room.summary),o.Fb(2),o.Qc(o.mc(8,6,null==e.room||null==e.room.start?null:e.room.start.dateTime,"medium")),o.Fb(4),o.qc("ngIf",null==e.action?null:e.action.includes("link")),o.Fb(3),o.Qc(e.name),o.Fb(1),o.qc("ngIf","moderator"===e.role&&e.waitingUsersList.length))},directives:[u.f,u.e,u.g,g.n,d.a,L.a,p.a,b.a,F.a],pipes:[g.e],styles:[".user-avatar[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:50%;background-color:hsla(0,0%,100%,.1)}#id[_ngcontent-%COMP%]{position:relative}"]}),t})()},rjSt:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var o=n("ofXK"),i=n("FpXt"),r=n("Qu3c"),s=n("NFeN"),a=n("bTqV"),c=n("UXJo"),l=n("zkoq"),u=n("STbY"),d=n("MutI"),b=n("fXoL");let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=b.Pb({type:t}),t.\u0275inj=b.Ob({imports:[[o.c,i.a,d.a,r.b]]}),t})();var h=n("TU8p");let f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=b.Pb({type:t}),t.\u0275inj=b.Ob({imports:[[o.c,i.a,r.b,s.b,a.b,c.b,l.b,u.c,g,h.b]]}),t})()},sOF7:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var o=n("ofXK"),i=n("MutI"),r=n("NFeN"),s=n("FpXt"),a=n("Qu3c"),c=n("fXoL");let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({imports:[[s.a,o.c,i.a,r.b,a.b]]}),t})()},sjQA:function(t,e,n){"use strict";n.d(e,"a",function(){return F});var o=n("fXoL"),i=n("XNiG"),r=n("Kj3r"),s=n("v0EB"),a=n("tyNb"),c=n("kYN2"),l=n("LUsR"),u=n("ofXK"),d=n("XiUz"),b=n("znSr"),g=n("Xa2L"),h=n("NFeN"),f=n("bTqV"),p=n("Qu3c");const m=["videoview"];function v(t,e){1&t&&(o.Xb(0,"div",9),o.Sb(1,"mat-spinner",10),o.Wb()),2&t&&(o.Fb(1),o.qc("diameter",30))}const y=function(t){return{backgroundColor:t}};function w(t,e){if(1&t&&(o.Xb(0,"div",11),o.Xb(1,"div",12),o.Xb(2,"mat-icon",13),o.Pc(3,"person"),o.Wb(),o.Wb(),o.Xb(4,"span",14),o.Pc(5),o.Wb(),o.Wb()),2&t){const t=o.jc();o.Fb(1),o.qc("ngStyle",o.uc(2,y,"rgba("+t.randomColor.join(", ")+")")),o.Fb(4),o.Qc(null==t.student?null:t.student.name)}}function x(t,e){1&t&&(o.Xb(0,"mat-icon",19),o.Pc(1,"pan_tool "),o.Wb())}const C=function(){return["video-title"]};function k(t,e){if(1&t&&(o.Xb(0,"div",15),o.Xb(1,"div",16),o.Pc(2),o.Xb(3,"mat-icon",17),o.Pc(4),o.Wb(),o.Nc(5,x,2,0,"mat-icon",18),o.Wb(),o.Wb()),2&t){const t=o.jc();o.Fb(1),o.qc("ngClass",o.tc(5,C)),o.Fb(1),o.Rc("",null==t.student?null:t.student.name," \xa0 \xa0"),o.Fb(1),o.qc("id",(null==t.student?null:t.student.std_id)+"mic"),o.Fb(1),o.Qc(null!=t.student&&t.student.audio?"mic":"mic_off"),o.Fb(1),o.qc("ngIf","proctor"===t.module&&!0===(null==t.student?null:t.student.raiseHand))}}function _(t,e){if(1&t&&(o.Xb(0,"mat-icon",26),o.Pc(1),o.Wb()),2&t){const t=o.jc().$implicit,e=o.jc(2);o.Fb(1),o.Qc("mic"===t.value?null!=e.student&&e.student.audio?"mic":"mic_off":t.icon)}}function O(t,e){1&t&&o.Sb(0,"img",27)}function P(t,e){if(1&t){const t=o.Yb();o.Xb(0,"div"),o.Xb(1,"button",23),o.fc("click",function(){o.Fc(t);const n=e.$implicit,i=o.jc(2);return n.action(null==i.student?null:i.student.std_id),i.actionEmitter.emit(n)}),o.Nc(2,_,2,1,"mat-icon",24),o.Nc(3,O,1,0,"img",25),o.Wb(),o.Wb()}if(2&t){const t=e.$implicit;o.Fb(1),o.qc("matTooltip",t.name),o.Fb(1),o.qc("ngIf","throwChalk"!==t.icon),o.Fb(1),o.qc("ngIf","throwChalk"===t.icon)}}function L(t,e){if(1&t&&(o.Xb(0,"div",20),o.Xb(1,"div",21),o.Nc(2,P,4,3,"div",22),o.Wb(),o.Wb()),2&t){const t=o.jc();o.Fb(2),o.qc("ngForOf",t.actions)}}let F=(()=>{class t{constructor(t,e,n,r){this.route=t,this.api=e,this.ss=n,this.bhvSub=r,this.randomColor=[0,0,0],this.video={loadstart:!0,buffering:!1,canplay:!1},this.buffer=new i.a,this.time=new i.a,this.actionEmitter=new o.o,this.actions=[{name:"Throw chalk",icon:"throwChalk",enable:!0,value:"throwChalk",action:function(){}},{name:"Mute",icon:"mic",value:"mic",enable:!0,action:function(t){this.enable=!this.enable,this.icon=this.enable?"mic":"mic_off",this.name=this.enable?"Mute":"Unmute",console.log("togle Mute :",this.enable)}},{name:"Remove",icon:"exit_to_app",value:"exit",enable:!0,action:function(){console.log(this.name)}}],this.randomColor=this.generateRandomColor()}set std(t){this.student=JSON.parse(t)}getCssClass(){return this.bhvSub.engOrMood$.subscribe(t=>{this.engOrMood=t}),0===this.engOrMood?this.student.category_engagement:this.student.category_mood}generateRandomColor(){return[0,0,0].map(t=>Math.floor(128*Math.random()))}ngAfterViewInit(){this.videoview.nativeElement.srcObject=this.mediaStreamObj,this.videoview.nativeElement.play()}ngOnChanges(t){t.mediaStreamObj&&this.videoview&&(t.mediaStreamObj&&this.studentID===this.student.std_id&&(this.videoview.nativeElement.muted=!0),this.videoview.nativeElement.srcObject=this.mediaStreamObj,this.videoview.nativeElement.play())}ngOnInit(){this.route.queryParams.subscribe(t=>{t&&(this.params=t,this.studentID=t.id)}),this.buffer.pipe(Object(r.a)(3e3)).subscribe(t=>{t&&(this.video.buffering=!0)})}videoProgress(t){this.buffer.next(t)}onLoadStart(t){t&&(this.video.loadstart=!0)}canPlay(t){this.video.canplay=!0,this.video.loadstart=!1}playVideo(t){}playingVideo(t){t&&(this.video.buffering=!1)}paused(t){}waiting(t){}error(t){}canplaythrough(t){this.video.loadstart=!1}timeupdate(t){}loadedMetaData(t){}abort(t){}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(a.a),o.Rb(s.a),o.Rb(c.a),o.Rb(l.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-video-stream"]],viewQuery:function(t,e){if(1&t&&o.Uc(m,1),2&t){let t;o.Cc(t=o.gc())&&(e.videoview=t.first)}},inputs:{std:"std",module:"module",selectUser:"selectUser",action:"action",mediaStreamObj:"mediaStreamObj"},outputs:{actionEmitter:"actionEmitter"},features:[o.Eb([s.a]),o.Db],decls:9,vars:8,consts:[["relative","",1,"preview-video"],["fxLayout","row","fxLayoutAlign","center center","style","min-height: 100%; height: 100%; position: absolute; width: 100%",4,"ngIf"],["fxFill","","class","no-camera","fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","5px",4,"ngIf"],["fxLayout","column","fxFlex","100",3,"ngClass","hidden"],["height","100%","width","100%","autoplay","","muted","",1,"videocol",3,"id","progress","loadstart","canplay","play","playing","pause","waiting","canplaythrough","timeupdate","loadedmetadata","abort","cancel"],["videoview",""],["fxLayout","row",4,"ngIf"],[1,"engagement",3,"ngClass"],["class","overlay",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",2,"min-height","100%","height","100%","position","absolute","width","100%"],[3,"diameter"],["fxFill","","fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","5px",1,"no-camera"],[1,"avatar",3,"ngStyle"],["f-white",""],["title-white14-400",""],["fxLayout","row"],[3,"ngClass"],["f-white","","large","",2,"vertical-align","middle",3,"id"],["style","font-size: 17px",4,"ngIf"],[2,"font-size","17px"],[1,"overlay"],["fxLayout","row","fxLayoutGap","10px",1,"overlay-actions"],[4,"ngFor","ngForOf"],["mat-icon-button","",3,"matTooltip","click"],["f-grey","","large","",4,"ngIf"],["src","../../../../../assets/throwChalk.svg","height","30px","width","30px","pointer","",4,"ngIf"],["f-grey","","large",""],["src","../../../../../assets/throwChalk.svg","height","30px","width","30px","pointer",""]],template:function(t,e){1&t&&(o.Xb(0,"div",0),o.Nc(1,v,2,1,"div",1),o.Nc(2,w,6,4,"div",2),o.Xb(3,"div",3),o.Xb(4,"video",4,5),o.fc("progress",function(t){return e.videoProgress(t)})("loadstart",function(t){return e.onLoadStart(t)})("canplay",function(t){return e.canPlay(t)})("play",function(t){return e.playVideo(t)})("playing",function(t){return e.playingVideo(t)})("pause",function(t){return e.paused(t)})("waiting",function(t){return e.waiting(t)})("canplaythrough",function(t){return e.canplaythrough(t)})("timeupdate",function(t){return e.timeupdate(t)})("loadedmetadata",function(t){return e.loadedMetaData(t)})("abort",function(t){return e.abort(t)})("cancel",function(t){return e.abort(t)}),o.Wb(),o.Nc(6,k,6,6,"div",6),o.Wb(),o.Sb(7,"span",7),o.Nc(8,L,3,1,"div",8),o.Wb()),2&t&&(o.Fb(1),o.qc("ngIf",(null==e.video?null:e.video.loadstart)||(null==e.video?null:e.video.buffering)&&(null==e.student?null:e.student.video)),o.Fb(1),o.qc("ngIf",!(null!=e.student&&e.student.video)),o.Fb(1),o.qc("ngClass","screenShare")("hidden",!(null!=e.student&&e.student.webcam)),o.Fb(1),o.qc("id",null==e.student?null:e.student.std_id),o.Fb(2),o.qc("ngIf",null==e.student?null:e.student.video),o.Fb(1),o.qc("ngClass",e.getCssClass()),o.Fb(1),o.qc("ngIf","proctor"===e.module))},directives:[u.n,d.f,d.b,u.l,b.a,d.e,g.c,d.h,d.g,u.o,b.c,h.a,u.m,f.a,p.a],styles:[".preview-video[_ngcontent-%COMP%]{box-sizing:border-box;position:relative;height:100%;width:100%;background:rgba(23,22,22,.74)}.overlay[_ngcontent-%COMP%]{transition:all .3s linear;position:absolute;height:100%;width:100%;background:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.8) 95%);display:none}.overlay[_ngcontent-%COMP%]   .overlay-actions[_ngcontent-%COMP%]{position:absolute;bottom:20px;transform:translateX(-50%);left:50%}.avatar[_ngcontent-%COMP%]{height:60px;width:60px;border-radius:50%;display:flex;text-align:center;align-items:center;justify-content:center}.preview-video[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{display:block}.preview-video[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff!important}.Low[_ngcontent-%COMP%]{background-color:#ff275a}.Medium[_ngcontent-%COMP%]{background-color:#ff8b4c}.High[_ngcontent-%COMP%]{background-color:#3ab147}.engagement[_ngcontent-%COMP%]{border-radius:50%;height:14px;width:14px;position:absolute;z-index:10;top:5px;right:5px}.video-title[_ngcontent-%COMP%]{position:absolute;top:0;padding:5px;background-color:rgba(66,63,63,.58);color:#fff}.equilizer[_ngcontent-%COMP%]{width:100%;position:absolute;background:linear-gradient(180deg,#000,transparent);height:40px;z-index:999;bottom:0;right:0;transform:rotate(180deg);visibility:hidden}.videocol[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}.check[_ngcontent-%COMP%]{width:100%;position:absolute;height:20px;z-index:999;bottom:0;right:0}.pid[_ngcontent-%COMP%]{width:calc(10% - 10px);height:10px;display:inline-block;margin:5px}*[_ngcontent-%COMP%]{box-sizing:border-box}.sizing-box[_ngcontent-%COMP%]{height:30px;width:50px}.signal-bars[_ngcontent-%COMP%], .signal-bars[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{display:inline-block}.signal-bars[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:14%;margin-left:1%;min-height:20%}.signal-bars[_ngcontent-%COMP%]   .bar.first-bar[_ngcontent-%COMP%]{height:20%}.signal-bars[_ngcontent-%COMP%]   .bar.second-bar[_ngcontent-%COMP%]{height:40%}.signal-bars[_ngcontent-%COMP%]   .bar.third-bar[_ngcontent-%COMP%]{height:60%}.signal-bars[_ngcontent-%COMP%]   .bar.fourth-bar[_ngcontent-%COMP%]{height:80%}.signal-bars[_ngcontent-%COMP%]   .bar.fifth-bar[_ngcontent-%COMP%]{height:99%}.good[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{background-color:#16a085;border:thin solid #12816b}.four-bars[_ngcontent-%COMP%]   .bar.fifth-bar[_ngcontent-%COMP%], .one-bar[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:not(.first-bar), .three-bars[_ngcontent-%COMP%]   .bar.fifth-bar[_ngcontent-%COMP%], .three-bars[_ngcontent-%COMP%]   .bar.fourth-bar[_ngcontent-%COMP%], .two-bars[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:not(.first-bar):not(.second-bar){background-color:#fafafa;border:thin solid #f3f3f3}"]}),t})()}}]);