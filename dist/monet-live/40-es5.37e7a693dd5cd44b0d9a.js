!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{oj0J:function(e,i,o){"use strict";o.r(i),o.d(i,"StudentLoginModule",function(){return A});var a=o("ofXK"),r=o("mrSG"),s=o("v0EB"),c=o("0Lug"),u=o("kYN2"),d=o("3Pt+"),m=o("9Lv8"),l=o("fXoL"),p=o("LUsR"),g=o("tyNb"),b=o("iiAa"),h=o("0IaG"),f=o("znSr"),v=o("bTqV"),w=o("NFeN"),y=["studentStream"],x=["myCanvas"];function k(t,e){1&t&&(l.Xb(0,"div",6),l.Xb(1,"div",7),l.Sb(2,"img",8),l.Wb(),l.Xb(3,"h2",9),l.Pc(4,"Allow Monet Live to use your camera and microphone"),l.Wb(),l.Xb(5,"p",10),l.Pc(6,"Monet Live needs access to your camera and microphone so that other participants can see and hear you. Monet Live require your camera and microphone access to capture your realtime Engagement during this call."),l.Wb(),l.Wb())}function C(t,e){if(1&t&&(l.Xb(0,"div",11),l.Xb(1,"h2",12),l.Pc(2,"Your camera and microphone are blocked"),l.Wb(),l.Xb(3,"p"),l.Pc(4,"Monet Live require access to your camera and microphone. Please make sure your browser setting allow camera and microphone permission to this website."),l.Wb(),l.Xb(5,"p",13),l.Pc(6,"Hint: Click the camera blocked icon in your browser address bar to change your settings and then refresh this page"),l.Wb(),l.Wb()),2&t){var n=l.jc();l.qc("ngSwitch",n.case)}}function P(t,e){if(1&t){var n=l.Yb();l.Vb(0),l.Xb(1,"button",29),l.fc("click",function(){l.Fc(n);var t=e.$implicit,i=l.jc(2);return t.status=!t.status,i.mainActions(t)}),l.Xb(2,"mat-icon",30),l.Pc(3),l.Wb(),l.Wb(),l.Ub()}if(2&t){var i=e.$implicit;l.Fb(2),l.qc("id",i.icon)("inline",!0),l.Fb(1),l.Qc(i.status?i.icon:i.iconop)}}function S(t,e){if(1&t){var n=l.Yb();l.Xb(0,"div",14),l.Xb(1,"div",15),l.Xb(2,"div",16),l.Xb(3,"video",17,18),l.fc("loadedmetadata",function(t){return l.Fc(n),l.jc().loadedMetaData(t)})("loadstart",function(t){return l.Fc(n),l.jc().onLoadStart(t)}),l.Wb(),l.Wb(),l.Xb(5,"div",19),l.Sb(6,"canvas",20,21),l.Nc(8,P,4,3,"ng-container",22),l.Wb(),l.Xb(9,"form",23),l.Xb(10,"div",24),l.Xb(11,"label",25),l.Pc(12,"Enter your name"),l.Wb(),l.Sb(13,"input",26),l.Wb(),l.Xb(14,"div",27),l.Xb(15,"button",28),l.fc("click",function(){return l.Fc(n),l.jc().askToJoin()}),l.Pc(16," Ask to Join "),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&t){var i=l.jc();l.Fb(3),l.qc("muted","muted"),l.Fb(5),l.qc("ngForOf",i.actions),l.Fb(1),l.qc("formGroup",i.studentLoginForm),l.Fb(6),l.qc("ngClass","INVALID"===i.studentLoginForm.status?"ask-to-join-inactive":"ask-to-join-active")}}function M(t,e){1&t&&(l.Xb(0,"div",6),l.Xb(1,"h2",31),l.Pc(2,"Meeting has not started"),l.Wb(),l.Xb(3,"p",32),l.Pc(4,"The moderator has not started the meeting yet. You will be redirected to login page once meeting is started"),l.Wb(),l.Wb())}var O,j,_,F=((O=function(){function e(n,i,o,a,r,s,c,u,d,m,l,p){t(this,e),this.sl=n,this.changeDetectorRef=i,this.bhvSub=o,this.route=a,this.apiService=r,this.socketService=s,this.utility=c,this.formBuilder=u,this.zone=d,this.dialog=m,this.datePipe=l,this.router=p,this.scheduled=void 0,this.case=0,this.spinnerMode="determinate",this.permission=!1,this.rejected=!1,this.action=!0,this.id=this.utility.create_UUID().replaceAll("-",""),this.permissions={audio:!0,video:!0,screen:!1},this.video={loadstart:!0,buffering:!1,canplay:!1},this.startMeet=!0,this.actions=[{name:"Mute",nameop:"Unmute",value:"audio",icon:"mic",status:!0,iconop:"mic_off"},{name:"Stop Camera",value:"video",icon:"videocam",nameop:"Share Camera",status:!0,iconop:"videocam_off"}],localStorage.setItem("student_uuid",this.id)}return n(e,[{key:"ngAfterViewInit",value:function(){}},{key:"ngOnInit",value:function(){var t=this;this.studentLoginForm=this.formBuilder.group({name:["",d.z.required],roomid:["",d.z.required],room:["",d.z.required],id:["",d.z.required]}),this.queryParamsSubscription=this.route.queryParams.subscribe(function(e){t.urlParams=e,t.studentLoginForm.setValue({name:"",roomid:t.urlParams.room,room:t.urlParams.room,id:t.id})},function(t){console.error(t)},function(){console.log("completed")}),this.sl.load("janus").then(function(){t.sl.load("user").then(function(){t.getRoomIp(t.urlParams.roomid)})}),this.interval=setInterval(function(){t.getRoomIp(t.urlParams.roomid)},3e3)}},{key:"ngOnDestroy",value:function(){this.queryParamsSubscription.unsubscribe(),mediaDev.stop()}},{key:"getRoomIp",value:function(t){var e=this;this.apiService.getApiStatic("getRoomIp?roomid="+t).subscribe(function(t){if(!t.error){if(e.scheduled=t.room.scheduled,""===t.room.grp&&""===t.room.instance)return void(e.case=3);void 0!==t.room.grp&&void 0!==t.room.instance&&(clearInterval(e.interval),e.serverGrp=t.room.grp,e.serverIp=t.room.instance,e.bhvSub.obDynamicLink(t.room.grp),fetchAvailableInstance(e.serverGrp,e.serverIp),e.socketService.generateSocket(),e.socketService.socket.on("join-response",function(t){!1===t.confirmed&&e.zone.run(function(){e.router.navigate(["student/rejected"],{queryParams:e.studentLoginForm.value}).then().catch()}),t.confirmed&&e.zone.run(function(){e.router.navigate(["student/dashboard"],{queryParams:e.studentLoginForm.value}).then().catch()})}),e.socketService.socket.on("call-not-started",function(t){e.case=3}),e.socketService.socket.on("meeting-initiated",function(t){e.case=2,e.socketService.socket.emit("join-request",{roomid:e.studentLoginForm.value.roomid,uuid:e.studentLoginForm.value.id,name:e.studentLoginForm.value.name}),e.router.navigate(["student/waiting-room"],{queryParamsHandling:"merge"}).then().catch()}),e.socketService.socket.on("assignment-broadcast",function(t){e.assignmentData=t,localStorage.setItem("assignment",JSON.stringify(t)),e.openDialogBox()}),mediaDev.on("media",function(t){return Object(r.b)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:studentStream=t,this.case=2,this.changeDetectorRef.detectChanges(),n=document.getElementById("studentStream"),console.log("Native Canvas Element",this.myCanvas.nativeElement),this.context=this.myCanvas.nativeElement.getContext("2d"),n&&(n.srcObject=t);case 3:case"end":return e.stop()}},e,this)}))}),mediaDev.on("media-error",function(t){console.error("media-error",t),e.case=1}),mediaDev.start())}})}},{key:"loadedMetaData",value:function(t){this.startMeet=!1}},{key:"onLoadStart",value:function(t){t&&(this.video.loadstart=!1)}},{key:"openDialogBox",value:function(){this.dialog.open(m.a,{disableClose:!0,width:"auto",height:"auto",data:this.assignmentData}).afterClosed().subscribe(function(t){})}},{key:"askToJoin",value:function(){"VALID"===this.studentLoginForm.status&&(this.getUser(this.studentLoginForm.value.roomid),this.socketService.socket.emit("join-request",{roomid:this.studentLoginForm.value.roomid,uuid:this.studentLoginForm.value.id,name:this.studentLoginForm.value.name}),this.router.navigate(["student/waiting-room"],{queryParamsHandling:"merge"}).then().catch())}},{key:"getUser",value:function(t){var e=this;this.apiService.getApi("user_list?id="+t).subscribe(function(t){return Object(r.b)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.response&&t.response.length>0&&(this.userList=t.response);case 1:case"end":return e.stop()}},e,this)}))})}},{key:"checkRoom",value:function(){this.getRoomIp(this.urlParams.roomid)}},{key:"mainActions",value:function(t){switch(t.value){case"video":this.permissions.video=t.status,mediaDev.toggleVideo(t.status),this.socketService.socket.emit("preview-toggle-video",{status:t.status});break;case"audio":this.permissions.audio=t.status,mediaDev.toggleAudio(t.status),this.socketService.socket.emit("preview-toggle-audio",{status:t.status})}}}]),e}()).\u0275fac=function(t){return new(t||O)(l.Rb(c.a),l.Rb(l.h),l.Rb(p.a),l.Rb(g.a),l.Rb(s.a),l.Rb(u.a),l.Rb(b.a),l.Rb(d.g),l.Rb(l.B),l.Rb(h.b),l.Rb(a.e),l.Rb(g.b))},O.\u0275cmp=l.Lb({type:O,selectors:[["app-student-login"]],viewQuery:function(t,e){var n;1&t&&(l.Uc(y,1),l.Uc(x,1)),2&t&&(l.Cc(n=l.gc())&&(e.studentStream=n.first),l.Cc(n=l.gc())&&(e.myCanvas=n.first))},features:[l.Eb([s.a,c.a,u.a])],decls:7,vars:5,consts:[["src","/assets/MonetLiveWhite.png","monetLogo",""],[1,"main-container"],[3,"ngSwitch"],["class","permission-request-container",4,"ngSwitchCase"],["class","permission-rejected-container",3,"ngSwitch",4,"ngSwitchCase"],["class","user-preview-screen",4,"ngSwitchCase"],[1,"permission-request-container"],[2,"width","100%","display","flex","justify-content","center"],["src","https://www.monetlive.com/assets/MonetLiveBlack.png","alt","monet live logo",2,"height","64px","width","220px","margin-bottom","48px"],[2,"color","black","margin-bottom","32px"],[2,"text-align","start","font-size","medium"],[1,"permission-rejected-container",3,"ngSwitch"],[2,"color","#f12020"],[2,"color","orange","font-weight","bold"],[1,"user-preview-screen"],[1,"previewContainer"],[1,"webcam-stream-container"],["autoplay","","id","studentStream","height","330px","width","450px",2,"position","absolute","top","0",3,"muted","loadedmetadata","loadstart"],["studentStream",""],[1,"button-controls"],["width","30px","height","100px"],["myCanvas",""],[4,"ngFor","ngForOf"],[1,"student-form",3,"formGroup"],[1,"name-input-container"],[1,"name-label"],["type","text","id","name","formControlName","name",1,"student-name"],[1,"ask-to-join-button-container"],["type","submit",1,"ask-to-join-active",3,"ngClass","click"],["mat-fab","","color","primary",2,"margin-bottom","8%",3,"click"],[3,"id","inline"],[2,"color","black","text-align","center"],[2,"text-align","center"]],template:function(t,e){1&t&&(l.Sb(0,"img",0),l.Xb(1,"div",1),l.Vb(2,2),l.Nc(3,k,7,0,"div",3),l.Nc(4,C,7,1,"div",4),l.Nc(5,S,17,4,"div",5),l.Nc(6,M,5,0,"div",3),l.Ub(),l.Wb()),2&t&&(l.Fb(2),l.qc("ngSwitch",e.case),l.Fb(1),l.qc("ngSwitchCase",0),l.Fb(1),l.qc("ngSwitchCase",1),l.Fb(1),l.qc("ngSwitchCase",2),l.Fb(1),l.qc("ngSwitchCase",3))},directives:[a.p,a.q,a.m,d.A,d.t,d.k,d.d,d.s,d.i,a.l,f.a,v.a,w.a],styles:["[monetLogo][_ngcontent-%COMP%]{height:50px;position:fixed;top:20px;left:20px}.main-container[_ngcontent-%COMP%]{font-family:CircularStd-book!important;background-color:#000;width:100%;min-width:100%;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center}.permission-request-container[_ngcontent-%COMP%]{width:35%;min-width:35%;max-width:35%;padding:48px;justify-content:center}.permission-rejected-container[_ngcontent-%COMP%], .permission-request-container[_ngcontent-%COMP%]{font-family:CircularStd-book!important;border-radius:8px;height:auto;background-color:#fff;display:flex;flex-direction:column}.permission-rejected-container[_ngcontent-%COMP%]{width:45%;min-width:45%;max-width:45%;padding:24px}.user-preview-screen[_ngcontent-%COMP%]{border-radius:8px;background-color:#fff;width:400px;height:500px;display:flex;flex-direction:column}h2[_ngcontent-%COMP%]{font-weight:700;color:#000}h2[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-family:CircularStd-book!important;text-align:center}p[_ngcontent-%COMP%]{color:#4e4c4c}.previewContainer[_ngcontent-%COMP%]{position:relative;background-color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;width:auto;height:auto}.webcam-stream-container[_ngcontent-%COMP%]{top:0;position:absolute;display:flex;align-items:center;justify-content:center;background-color:#000;width:450px;height:330px;-webkit-clip-path:polygon(10% 10%,90% 10%,90% 90%,10% 90%);clip-path:polygon(10% 10%,90% 10%,90% 90%,10% 90%)}section[_ngcontent-%COMP%]{display:table}.example-button-row[_ngcontent-%COMP%]{display:table-cell;width:490px}.example-button-row[_ngcontent-%COMP%]   .mat-button-base[_ngcontent-%COMP%]{margin:15px}.example-flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.mat-icon-button[_ngcontent-%COMP%]{background:#5829a6;border-radius:50%;color:#fff;font-size:60px;padding:5%;display:flex;justify-content:center;align-items:center;bottom:40px}.mat-icon.mat-icon-inline[_ngcontent-%COMP%]{font-size:25px}#btn[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(90deg,#77246c,#1e5aa1);border-radius:18px;margin-left:30%;padding:10px;width:45%;border:none}#studentStream[_ngcontent-%COMP%]{transform:rotateY(180deg)!important;-webkit-transform:rotateY(180deg)!important;-moz-transform:rotateY(180deg)!important}.student-form[_ngcontent-%COMP%]{position:absolute;padding-top:450px;flex-direction:column;height:30%}.name-input-container[_ngcontent-%COMP%], .student-form[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%}.name-label[_ngcontent-%COMP%]{padding-right:32px;width:150px;display:flex;justify-content:flex-end}.ask-to-join-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;padding:32px 0 46px}.ask-to-join-active[_ngcontent-%COMP%]{color:#fff}.ask-to-join-active[_ngcontent-%COMP%], .ask-to-join-inactive[_ngcontent-%COMP%]{cursor:pointer;border-radius:40px;min-width:180px;font-weight:400;font-size:medium;background:linear-gradient(135deg,#77246c,#1e5aa1);padding:12px 16px;border-style:none;outline:none}.ask-to-join-inactive[_ngcontent-%COMP%]{opacity:.7;color:#dcdcdc}.student-name[_ngcontent-%COMP%]{padding:8px 12px;outline:none;border:1px solid #000;width:150px}.button-controls[_ngcontent-%COMP%]{z-index:100;position:absolute;padding-top:265px;display:flex;justify-content:flex-end;align-items:center;width:100%;gap:24px;padding-right:75px}"]}),O),L=o("FpXt"),q=o("kmnG"),X=o("qFsG"),R=o("f0Cb"),W=o("wZkO"),I=o("d3UM"),D=((j=n(function e(){t(this,e)})).\u0275fac=function(t){return new(t||j)},j.\u0275mod=l.Pb({type:j}),j.\u0275inj=l.Ob({imports:[[a.c,L.a,W.d,q.e,I.b,h.e,I.b,R.b,v.b]]}),j),z=[{path:"",component:F}],A=((_=n(function e(){t(this,e)})).\u0275fac=function(t){return new(t||_)},_.\u0275mod=l.Pb({type:_}),_.\u0275inj=l.Ob({imports:[[g.d.forChild(z),a.c,L.a,q.e,X.c,v.b,R.b,d.x,D,h.e]]}),_)}}])}();