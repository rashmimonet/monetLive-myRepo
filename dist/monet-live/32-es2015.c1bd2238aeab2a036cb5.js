(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"1jcm":function(t,e,i){"use strict";i.d(e,"a",function(){return y}),i.d(e,"b",function(){return w});var n=i("GU7r"),o=i("fXoL"),s=i("FKr1"),a=i("8LU1"),r=i("3Pt+"),c=i("R1ws"),l=i("u47x");const d=["thumbContainer"],u=["toggleBar"],h=["input"],m=function(){return{enterDuration:150}},g=["*"],b=new o.s("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let p=0;const f={provide:r.q,useExisting:Object(o.X)(()=>y),multi:!0};class v{constructor(t,e){this.source=t,this.checked=e}}class S{constructor(t){this._elementRef=t}}const x=Object(s.C)(Object(s.x)(Object(s.y)(Object(s.z)(S)),"accent"));let y=(()=>{class t extends x{constructor(t,e,i,n,s,a){super(t),this._focusMonitor=e,this._changeDetectorRef=i,this.defaults=s,this._animationMode=a,this._onChange=t=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++p,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new o.o,this.toggleChange=new o.o,this.tabIndex=parseInt(n)||0}get required(){return this._required}set required(t){this._required=Object(a.c)(t)}get checked(){return this._checked}set checked(t){this._checked=Object(a.c)(t),this._changeDetectorRef.markForCheck()}get inputId(){return(this.id||this._uniqueId)+"-input"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._inputElement.nativeElement.focus():t||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}focus(t,e){e?this._focusMonitor.focusVia(this._inputElement,e,t):this._inputElement.nativeElement.focus(t)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new v(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(o.l),o.Rb(l.h),o.Rb(o.h),o.cc("tabindex"),o.Rb(b),o.Rb(c.a,8))},t.\u0275cmp=o.Lb({type:t,selectors:[["mat-slide-toggle"]],viewQuery:function(t,e){if(1&t&&(o.Uc(d,1),o.Uc(u,1),o.Uc(h,1)),2&t){let t;o.Cc(t=o.gc())&&(e._thumbEl=t.first),o.Cc(t=o.gc())&&(e._thumbBarEl=t.first),o.Cc(t=o.gc())&&(e._inputElement=t.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(t,e){2&t&&(o.ac("id",e.id),o.Gb("tabindex",e.disabled?null:-1)("aria-label",null)("aria-labelledby",null),o.Jb("mat-checked",e.checked)("mat-disabled",e.disabled)("mat-slide-toggle-label-before","before"==e.labelPosition)("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[o.Eb([f]),o.Cb],ngContentSelectors:g,decls:16,vars:18,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,e){if(1&t&&(o.pc(),o.Xb(0,"label",0,1),o.Xb(2,"div",2,3),o.Xb(4,"input",4,5),o.fc("change",function(t){return e._onChangeEvent(t)})("click",function(t){return e._onInputClick(t)}),o.Wb(),o.Xb(6,"div",6,7),o.Sb(8,"div",8),o.Xb(9,"div",9),o.Sb(10,"div",10),o.Wb(),o.Wb(),o.Wb(),o.Xb(11,"span",11,12),o.fc("cdkObserveContent",function(){return e._onLabelTextChange()}),o.Xb(13,"span",13),o.Pc(14,"\xa0"),o.Wb(),o.oc(15),o.Wb(),o.Wb()),2&t){const t=o.Dc(1),i=o.Dc(12);o.Gb("for",e.inputId),o.Fb(2),o.Jb("mat-slide-toggle-bar-no-side-margin",!i.textContent||!i.textContent.trim()),o.Fb(2),o.qc("id",e.inputId)("required",e.required)("tabIndex",e.tabIndex)("checked",e.checked)("disabled",e.disabled),o.Gb("name",e.name)("aria-checked",e.checked.toString())("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledby),o.Fb(5),o.qc("matRippleTrigger",t)("matRippleDisabled",e.disableRipple||e.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",o.tc(17,m))}},directives:[s.s,n.a],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),t})(),_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Pb({type:t}),t.\u0275inj=o.Ob({}),t})(),w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Pb({type:t}),t.\u0275inj=o.Ob({imports:[[_,s.t,s.j,n.c],_,s.j]}),t})()},"5BGd":function(t,e,i){"use strict";i.r(e),i.d(e,"CallModule",function(){return ee});var n=i("3Pt+"),o=i("v0EB"),s=i("0IaG"),a=i("0Lug"),r=i("ofXK"),c=i("fXoL"),l=i("tyNb"),d=i("tk/3"),u=i("kYN2"),h=i("LUsR"),m=i("iiAa"),g=i("dNgK"),b=i("STbY"),p=i("NFeN"),f=i("XiUz"),v=i("znSr"),S=i("mrSG"),x=i("R0Ic"),y=i("cclQ"),_=i("rjXu"),w=i("xk+7"),k=i("q1A0"),O=i("Qu3c"),C=i("bTqV"),M=i("bSwM"),P=i("zkoq"),L=i("sjQA");const j=["studentContainer"],F=["screenShareStreem"],I=["audioNotification"],A=["audioview"],X=["scShareAudio"];function W(t,e){if(1&t){const t=c.Yb();c.Xb(0,"mat-icon",9),c.fc("click",function(){c.Fc(t);const e=c.jc(2);return e.collapseUsersList.action=!e.collapseUsersList.action,e.collapseList(e.collapseUsersList.action,null)}),c.Pc(1),c.Wb()}if(2&t){const t=c.jc(2);c.qc("matTooltip",t.collapseUsersList.action?"Expand Users List":"Collapse Users List"),c.Fb(1),c.Rc(" ",t.collapseUsersList.action?"keyboard_double_arrow_left":"keyboard_double_arrow_right"," ")}}function q(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"div",14),c.Xb(2,"button",15),c.Xb(3,"mat-icon",16),c.Pc(4,"exit_to_app"),c.Wb(),c.Wb(),c.Xb(5,"span",17),c.Pc(6,"You are sharing your screen"),c.Wb(),c.Xb(7,"button",18),c.fc("click",function(){return c.Fc(t),c.jc(3).stopScreen()}),c.Pc(8,"Stop sharing"),c.Wb(),c.Xb(9,"mat-checkbox",19),c.fc("ngModelChange",function(e){return c.Fc(t),c.jc(3).screenShareAudio=e})("click",function(){c.Fc(t);const e=c.jc(3);return e.publisherScreenShare.toggleAudio("screen",e.screenShareAudio)}),c.Pc(10," Screen Share Audio "),c.Wb(),c.Wb(),c.Ub()}if(2&t){const t=c.jc(3);c.Fb(7),c.qc("disabled",t.stopScreenShareButtonStat),c.Fb(2),c.qc("ngModel",t.screenShareAudio)}}const R=function(){return{opacity:"1",margin:"0 15%"}},D=function(){return{opacity:"0"}},E=function(){return{opacity:"1",marginTop:"10px",height:"80vh"}},N=function(){return{opacity:"1"}};function U(t,e){if(1&t&&(c.Xb(0,"div",10),c.Sb(1,"video",11,12),c.Nc(3,q,11,2,"ng-container",13),c.Wb()),2&t){const t=c.jc(2);c.qc("fxFlexAlign",t.screenShareId&&t.screenShareId===t.param.id.toString()+"___"+t.param.id.toString()?"center":"stretch")("fxLayout",t.screenShareId&&t.screenShareId===(null==t.param||null==t.param.id?null:t.param.id.toString())+"___"+(null==t.param||null==t.param.id?null:t.param.id.toString())?"column":"")("fxLayoutAlign",t.screenShareId&&t.screenShareId===t.param.id.toString()+"___"+t.param.id.toString()?"center center":"")("ngStyle",t.screenshare?t.screenShareId===t.param.id.toString()+"___"+t.param.id.toString()?c.tc(6,R):t.fullScreen?t.opacity?c.tc(8,E):c.tc(9,D):c.tc(7,D):c.tc(10,N)),c.Fb(1),c.qc("fxHide",t.screenShareId===t.param.id.toString()+"___"+t.param.id.toString()),c.Fb(2),c.qc("ngIf",t.screenShareId&&t.screenShareId===(null==t.param||null==t.param.id?null:t.param.id.toString())+"___"+(null==t.param||null==t.param.id?null:t.param.id.toString()))}}function T(t,e){if(1&t){const t=c.Yb();c.Xb(0,"button",27),c.Xb(1,"mat-icon",28),c.fc("click",function(){return c.Fc(t),c.jc(3).scrollList("top")}),c.Pc(2,"double_arrow"),c.Wb(),c.Wb()}}const B=function(t){return{backgroundColor:t}};function V(t,e){if(1&t&&(c.Xb(0,"div",33),c.Xb(1,"div",34),c.Xb(2,"mat-icon",35),c.Pc(3,"person"),c.Wb(),c.Wb(),c.Xb(4,"span",36),c.Pc(5,"You"),c.Wb(),c.Wb()),2&t){const t=c.jc(4);c.Fb(1),c.qc("ngStyle",c.uc(1,B,"rgba("+t.randomColor.join(", ")+")"))}}const z=function(){return["video-title"]};function Y(t,e){if(1&t&&(c.Xb(0,"div"),c.Xb(1,"div",37),c.Pc(2),c.Xb(3,"mat-icon",38),c.Pc(4),c.Wb(),c.Wb(),c.Wb()),2&t){const t=c.jc(4);c.Fb(1),c.qc("ngClass",c.tc(3,z)),c.Fb(1),c.Rc(" ",null==t.param?null:t.param.name," (You) \xa0 "),c.Fb(2),c.Rc("",t.userAudioIcon," ")}}const G=function(t){return["student-preview",t]};function $(t,e){if(1&t&&(c.Xb(0,"mat-grid-tile",29),c.Nc(1,V,6,3,"div",30),c.Xb(2,"div",31),c.Sb(3,"video",32),c.Nc(4,Y,5,4,"div",13),c.Wb(),c.Wb()),2&t){const t=c.jc(3);c.qc("ngClass",c.uc(5,G,(null==t.studentsList?null:t.studentsList.length)<2&&!t.screenshare&&!t.screen?"single-view":""))("colspan",t.screenshare?1:t.fullScreen?2:1)("rowspan",t.screenshare?1:t.fullScreen?2:1),c.Fb(1),c.qc("ngIf",!t.publisherAvatar),c.Fb(3),c.qc("ngIf",t.moderatorStream)}}const H=function(t,e){return["student-preview",t,e]};function J(t,e){if(1&t){const t=c.Yb();c.Xb(0,"mat-grid-tile",29),c.Xb(1,"app-video-stream",39),c.fc("actionEmitter",function(e){c.Fc(t);const i=c.jc().$implicit;return c.jc(3).mainActions(e,i)}),c.Wb(),c.Wb()}if(2&t){const t=c.jc().$implicit,e=c.jc(3);c.qc("ngClass",c.vc(7,H,(null==e.studentsList?null:e.studentsList.length)<2&&!e.screenshare&&!e.screen?"single-view":"",(null==t?null:t.std_id)===e.selectedUserID&&e.selectStu?"select-list":""))("colspan",1)("rowspan",1),c.Fb(1),c.qc("module","proctor")("selectUser",e.selectUser)("std",e.json.stringify(t))("mediaStreamObj",null==t?null:t.msobj)}}function Q(t,e){if(1&t&&(c.Vb(0),c.Nc(1,J,2,10,"mat-grid-tile",25),c.Ub()),2&t){const t=e.$implicit,i=c.jc(3);c.Fb(1),c.qc("ngIf",!(null!=t&&t.screen)&&(null==t?null:t.std_id)!==(null==i.param?null:i.param.id))}}function K(t,e){if(1&t){const t=c.Yb();c.Xb(0,"button",27),c.Xb(1,"mat-icon",40),c.fc("click",function(){return c.Fc(t),c.jc(3).scrollList("bottom")}),c.Pc(2,"double_arrow"),c.Wb(),c.Wb()}}const Z=function(t,e){return{marginLeft:t,minHeight:e}};function tt(t,e){if(1&t&&(c.Xb(0,"div",20),c.Nc(1,T,3,0,"button",21),c.Xb(2,"div",22,23),c.Xb(4,"mat-grid-list",24),c.Nc(5,$,5,7,"mat-grid-tile",25),c.Nc(6,Q,2,1,"ng-container",26),c.Wb(),c.Wb(),c.Nc(7,K,3,0,"button",21),c.Wb()),2&t){const t=c.jc(2);c.qc("fxFlexOrder",t.screenshare?2:t.fullScreen?1:2)("ngStyle",c.vc(10,Z,t.screenshare?"5vh":t.fullScreen?"":"5vh",t.screenshare?"93vh":t.fullScreen?"":"93vh")),c.Fb(1),c.qc("ngIf",(null==t.studentsList?null:t.studentsList.length)>3&&!t.fullScreen),c.Fb(1),c.qc("fxFlex","calc(70vh - 10px)")("fxLayout",t.screenshare||t.fullScreen?"row wrap":"row"),c.Fb(2),c.qc("cols",t.screenshare?1:t.fullScreen?5:1),c.Fb(1),c.qc("ngIf",t.fullScreen),c.Fb(1),c.qc("ngForOf",t.studentsList)("ngForTrackBy",t.trackByUsers),c.Fb(1),c.qc("ngIf",(null==t.studentsList?null:t.studentsList.length)>3&&!t.fullScreen)}}const et=function(t,e){return{background:t,minHeight:e}};function it(t,e){if(1&t&&(c.Xb(0,"div",2),c.Sb(1,"audio",3,4),c.Nc(3,W,2,2,"mat-icon",5),c.Nc(4,U,4,11,"div",6),c.Xb(5,"div",7),c.Nc(6,tt,8,13,"div",8),c.Wb(),c.Wb()),2&t){const t=c.jc();c.qc("fxLayoutAlign",(t.screenshare||t.screen)&&t.param?"center center":"end start")("ngStyle",c.vc(7,et,t.fullScreen?"black":"",t.screenshare||t.screen?"100vh":"93vh")),c.Fb(1),c.qc("hidden",!0),c.Fb(2),c.qc("ngIf",t.screenshare&&!(t.screenShareId===t.param.id.toString()+"___"+t.param.id.toString())),c.Fb(1),c.qc("ngIf",(t.screenshare||t.screen)&&t.param),c.Fb(1),c.qc("fxFlex",t.fullScreen?t.screenshare?"25%":"100%":(null==t.studentsList?null:t.studentsList.length)<2?"2%":"25%"),c.Fb(1),c.qc("ngIf",!0===t.fullScreen||(null==t.studentsList?null:t.studentsList.length)>1)}}const nt=function(){return["invite","link"]};Object(x.m)("listAnimation",[Object(x.l)(":enter",[Object(x.k)({opacity:0}),Object(x.e)("300ms",Object(x.k)({opacity:1}))]),Object(x.l)(":leave",[Object(x.k)({opacity:1}),Object(x.e)("300ms",Object(x.k)({opacity:0}))])]);let ot=(()=>{class t{constructor(t,e,i,n,o,s,a,r,l,d,u,h){this.as=t,this.route=e,this.ss=i,this.bhvSub=n,this.sl=o,this.router=s,this.snackBar=a,this.datePipe=r,this.dialog=l,this.http=d,this.utility=u,this.cdref=h,this.faceDataState=!0,this.userAudioIcon="mic",this.stopScreenShareButtonStat=!0,this.screenShareAudio=!0,this.publisherAvatar=!0,this.muteAll=!1,this.opacity=!1,this.fullScreen=!1,this.index=0,this.avg=[],this.duration={duration:0},this.collapseUsersList={action:!1,icon:"keyboard_double_arrow_right",iconOp:"keyboard_double_arrow_left"},this.randomColor=[0,0,0],this.json=JSON,this.size={col:5,row:3},this.screenShareStat=new c.o,this.resetConfigOptions=new c.o,this.screenShareMediaEmit=new c.o,this.moderatorMediaEmit=new c.o,this.studentEmit=new c.o,this.sideNavSize=new c.o,this.stopScreenShare=new c.o,this.toggleSideNav=new c.o,this.randomColor=this.generateRandomColor(),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}generateRandomColor(){return[0,0,0].map(()=>Math.floor(128*Math.random()))}collapseList(t,e){const i=document.getElementById("usersList");if(i)if(t){let t=25;const e=setInterval(()=>{i.style.maxWidth=t--+"%",t<1&&(i.style.opacity="0",i.style.visibility="hidden",clearInterval(e))},1)}else{let t=25,n=0;null!==e&&(t=this.fullScreen?100:25);const o=setInterval(()=>{i.style.maxWidth=n+++"%",n>=t&&(i.style.opacity="1",i.style.visibility="visible",clearInterval(o))},1)}}mainActions(t,e){const i={throwChalk:()=>this.ss.socket.emit("throw-chalk",{sender:this.param.id,receiver:e.std_id}),exit:()=>this.ss.socket.emit("leave",{uuid:e.std_id,type:"webcam"}),mic:()=>{this.ss.socket.emit("toggle-audio",{roomid:this.param.roomid,from:e.std_id,status:t.enable}),this.studentsList.map(i=>{i.std_id===e.std_id&&(i.audio=t.enable)})},"":()=>{}};i[t.value]()||i[""]()}Menu(t){this.bhvSub.obFullScreen(t),this.fullScreen=t,t?setTimeout(()=>{const t=document.getElementById("webcamvideo");[t.width,t.height,t.muted,t.autoplay,t.srcObject]=[300,300,!0,!0,this.moderatorStream]},500):this.moderatorMediaEmit.emit(this.moderatorStream)}stopScreen(){this.stopScreenShareButtonStat=!0,this.stopScreenShare.emit(!0),this.screenShareStat.emit("Share Screen"),this.ss.socket.emit("stopScreen",{uuid:this.param.id+"___"+this.param.id}),this.screenshare&&this.publisherScreenShare.destroy("screen"),[this.screen,this.screenshare,this.screenShareId]=[void 0,void 0,void 0],this.toggleSideNav.emit(!0),this.bhvSub.obScreenShare(!1)}showSelectUser(t,e){[this.selectedUserID,this.selectStu]=[t,e]}startTimer(){0===this.duration.duration&&(this.timer=setInterval(()=>{this.duration.duration++,this.avg.map(t=>{this.showSelectUser(t.id,t.score>30)})},2e3))}ngOnChanges(t){var e,i,n,o,s,a,r,c,l;(null==t?void 0:t.selectUser)&&(null===(e=t.selectUser)||void 0===e?void 0:e.currentValue)&&this.studentsList&&this.studentsList.lenght>1&&this.showSelectUser(t.selectUser.currentValue.std_id,t.selectUser.currentValue.fromSidenav),t.screenshare&&!1===(null===(i=t.screenshare)||void 0===i?void 0:i.currentValue)&&(this.screen=void 0),t.actionObj&&(null===(n=null==t?void 0:t.actionObj)||void 0===n?void 0:n.currentValue)&&this.actionsHandler(null===(s=null===(o=null==t?void 0:t.actionObj)||void 0===o?void 0:o.currentValue)||void 0===s?void 0:s.name,null===(r=null===(a=null==t?void 0:t.actionObj)||void 0===a?void 0:a.currentValue)||void 0===r?void 0:r.value),void 0!==(null===(c=null==t?void 0:t.configMediaSettings)||void 0===c?void 0:c.currentValue)&&!0===(null===(l=null==t?void 0:t.configMediaSettings)||void 0===l?void 0:l.currentValue)&&(this.availableMediaDevices=mediaDev.availableDevices,this.configMediaoptions())}actionsHandler(t,e){const i={video:()=>{this.pub.toggleVideo("webcam",e),this.studentsList.map(t=>{t.std_id===this.param.id&&(t.video=this.publisherAvatar=e)})},audio:()=>{this.userAudioIcon=e?"mic":"mic_off",this.pub.toggleAudio("webcam",e)},screen:()=>{e?(this.publisherScreenShare=new PubUser(this.param.name+"(screen)",this.param.id+"___"+this.param.id,this.param.roomid,"student",null,this.ss.socket,"screen",null,"",!0),this.publisherScreenShare.on("screen-share-denied",(t,e)=>this.ss.socket.emit("leave",{uuid:e,type:"webcam"})),this.publisherScreenShare.sock=this.ss.socket,this.publisherScreenShare.connect()):this.stopScreen()},leave:()=>{this.openDialog()},endRoom:()=>{this.moderatorLeave(!1)},muteRoom:()=>this.muteAllParticipants(),"toggle-view":()=>this.Menu(e),"":()=>{}};i[t]()||i[""]()}openDialog(){let t=this.dialog.open(w.a,{height:"25%",width:"25%"});t.afterClosed().subscribe(e=>{e&&this.moderatorLeave(!0),t=null})}moderatorLeave(t){this.pub.destroy(),this.sendToAdmin(),this.stopScreen(),dynamoIp,this.ss.socket.emit("endRoom",{roomid:this.param.room}),this.ss.socket.emit("leave",{uuid:this.param.id,type:"webcam"}),this.router.navigate(["report"],{queryParams:{roomid:this.param.roomid}}).then(()=>{})}configMediaoptions(){this.availableMediaDevices&&(this.dialogOpener=this.dialog.open(_.a,{data:{devicesList:this.availableMediaDevices},panelClass:"configDevice-dialog-container",hasBackdrop:!0,width:"23%",height:"auto",backdropClass:"backdropBackground"}).afterClosed().subscribe(t=>{this.resetConfigOptions.emit(!1),this.dialogOpener=null,t.result&&mediaDev.deltaMedia(t.result.label,t.result.id)}))}ngOnDestroy(){this.timer&&clearInterval(this.timer),this.debounce&&clearTimeout(this.debounce)}tryAgain(){this.ss.socket.connect(),this.router.navigate(["/teacher/call"],{queryParamsHandling:"merge"}),this.as.getApiStatic("getRoomIp?roomid="+this.param.roomid).subscribe(t=>{fetchAvailableInstance(t.room.grp,t.room.instance),this.bhvSub.obDynamicLink(t.room.grp)})}muteAllParticipants(){this.muteAll=!this.muteAll,this.as.postApi("muteRoom",{status:this.muteAll?"mute_room":"unmute_room",room:this.param.room,uuid:this.param.id}).subscribe(()=>{})}sendToAdmin(){const t={Admin:"",Name:"",Summary:"",Attendees:y.g,Link:"",Date:""};this.as.getApi("getInviteRoom?roomid="+this.param.roomid).subscribe(e=>{if(e&&e.response){const i=e.response.attendees.filter(t=>t&&!t.includes("(screen)")).length,{start:{dateTime:n},creator_ID:o,creator:s,summary:a,roomid:r}=e.response,c=new Date,l=new Date(n),d=Math.abs(c.getTime()-l.getTime())/1e3;t.Admin=o,t.Name=s,t.Summary=a;const u=this.utility.convertDate(d,d).split(":");t.Duration=2===u.length?`${u[0]}min ${u[1]}sec`:`${u[0]}hr ${u[1]}min ${u[2]}sec`,t.Attendees=i,t.Link="https://www.monetlive.com/report/dashboard?roomid="+r,t.Date=this.datePipe.transform(new Date(n),"medium"),t.RoomId=r,this.as.postApiStatic("sendAdminEmail",t).subscribe(t=>console.log("Send Email Response :",t)),this.as.putApiStatic("updateMeetingHours",{user:JSON.parse(localStorage.getItem("userDetails")||"{}"),hours:(d/3600).toFixed(2)}).subscribe(t=>{})}})}managePublisher(){this.pub=myPubUser=new PubUser(this.param.name,this.param.id,this.param.roomid,"teacher",null,this.ss.socket,"webcam",mediaDev.mediaStream,JSON.parse(localStorage.getItem("userDetails")||"").email,!0),this.moderatorStream=mediaDev.mediaStream,this.pub.newAudioStatus=this.configurations.audio,this.pub.newVideoStatus=this.configurations.video,this.pub.sendSpeakingInfo(),this.publisherStreamHandler(this.moderatorStream),this.pub.on("local",(t,e)=>{this.Menu(!0),this.publisherAvatar=this.configurations.video,-1===this.studentsList.findIndex(t=>t&&t.std_id===this.param.id)&&this.studentsList.push({audio:this.configurations.audio,engAvg:NaN,msobj:null,screen:null,video:this.configurations.video,webcam:!0,name:this.param.name,proctor:"proctor",roomid:this.param.roomid,serverIP:null,time:null,std_id:this.param.id}),this.studentEmit.emit(this.studentsList)}),this.studentEmit.emit(this.studentsList),this.getUsers(this.param.roomid),this.pub.on("remote",(t,e)=>Object(S.b)(this,void 0,void 0,function*(){var t;(null===(t=this.audioview)||void 0===t?void 0:t.nativeElement)?this.audioview.nativeElement.srcObject=yield e:console.error("Audio Element not found")})),this.pub.on("toggleVideo",t=>{this.studentsList.map(e=>{e.std_id===t.from&&(e.video=t.status)})}),this.pub.on("toggleAudio",t=>{this.studentsList.map(e=>{e.std_id===t.from&&(e.audio=t.status)})}),this.pub.sock=this.ss.socket,this.pub.connect()}socketEventListeners(t,e){const i={"user-list":()=>{const t=e.users.filter(t=>{var e;return-1===(null===(e=null==t?void 0:t.uuid)||void 0===e?void 0:e.search(this.param.id))});if(t.length>0)for(const e of t){const t=new SubUser(e.name,Math.floor(1e5*Math.random()),e.roomid,"dummy",e.serverIP,this.ss.socket,e.uuid);t.on("remote",(t,i,n)=>{this.studentsList.map(t=>{t.std_id===e.uuid&&(t.msobj=n)});const o=this.studentsList.findIndex(t=>"teacher"===t.proctor);this.studentsList.unshift(this.studentsList.splice(o,1)[0]),this.mediaStreamObj=n}),t.sock=this.ss.socket,t.connect()}console.log("Students-List =>",this.studentsList)},"face-data":()=>{e&&(this.faceDataState=!0,this.studentsList=this.studentsList.map(t=>{var i,n;return t.engagement=Math.floor((null===(i=e[null==t?void 0:t.std_id])||void 0===i?void 0:i.engagement)||0),t.mood=Math.floor((null===(n=e[null==t?void 0:t.std_id])||void 0===n?void 0:n.mood_score)||0),t.category_engagement=t.engagement>80?"High":t.engagement>40?"Medium":"Low",t.category_mood=t.mood>80?"High":t.mood>40?"Medium":"Low",t}),this.studentEmit.emit(this.studentsList),this.debounce&&clearTimeout(this.debounce))},"raise-hand":()=>{this.studentsList=this.studentsList.map(t=>(t.std_id===e.from&&(t.raiseHand=e.status,this.selectUser=this.studentsList.filter(t=>t.std_id===e.from)[0],this.showSelectUser(e.from,!1),this.utility.notify(!0===e.status?e.name+" raised his/her hand":e.name+" put his/her hand down","")),t))},leave:()=>{var t,i,n,o;Object.keys(null==e?void 0:e.userObj).length&&(this.studentsList=this.studentsList.filter(t=>{var i;return t.std_id!==(null===(i=e.userObj)||void 0===i?void 0:i.uuid)}),!1===(null===(i=null===(t=null==e?void 0:e.userObj)||void 0===t?void 0:t.janus)||void 0===i?void 0:i.screen)&&(null===(n=null==e?void 0:e.userObj)||void 0===n?void 0:n.uuid.includes("___"))&&(this.screenShareStat.emit("Share Screen"),this.collapseList(!1,!0),this.bhvSub.obScreenShare(!1),[this.screen,this.screenshare,this.screenShareId]=[void 0,void 0,void 0]),this.studentEmit.emit(this.studentsList),this.utility.notify(e.userObj.name+((null===(o=null==e?void 0:e.userObj)||void 0===o?void 0:o.uuid.includes("___"))?" stopped sharing screen":" left the call"),""))},"room-audio":()=>{this.userAudioIcon=e.mute?"mic_off":"mic",this.utility.notify(e.mute?"Room muted":"Room  un-muted",""),this.studentsList=this.studentsList.map(t=>(t.audio=!e.mute,t))},"screen-share":()=>{this.utility.notify("Screen is already being shared by someone",""),[this.screen,this.screenshare,this.screenShareId]=[void 0,void 0,void 0],this.bhvSub.obScreenShare(!1)},"join-request":()=>this.bhvSub.obAddToWaitingList({userName:e.name,userId:e.uuid,socketId:e.sid}),"":()=>{}};i[t]&&i[t]()||i[""]()}getSubscribedUsers(t,e,i,n,o,s){"audio"===t&&null!==e&&(this.scShareAudio.nativeElement.srcObject=e);const a=this.studentsList.find(t=>t.std_id===i.uuid);a?a.msobj=e:(this.studentsList.push({audio:s.janus.audio,engAvg:NaN,msobj:e,screen:s.janus.screen,video:s.janus.video,webcam:s.janus.webcam,name:s.name,proctor:s.proctor,roomid:s.janus.room,serverIP:null,time:null,std_id:i.uuid}),this.utility.notify(s.name+" Joined the call","")),this.studentsList.forEach((t,e)=>{t.std_id.includes("___")&&(this.studentsList=this.studentsList.filter(t=>{var e;return-1===(null===(e=null==t?void 0:t.std_id)||void 0===e?void 0:e.indexOf("___"))}),(null==t?void 0:t.std_id)!==this.param.id+"___"+this.param.id&&this.screenShareMediaEmit.emit(t.msobj),this.bhvSub.obScreenShare(!0),this.param.id+"___"+this.param.id===i.uuid&&([this.screen,this.screenshare,this.screenShareId]=[1,!0,this.param.id+"___"+this.param.id]),[this.screenshare,this.screen]=[!0,1],setTimeout(()=>{document.getElementById("screenShareStreem").srcObject=t.msobj,this.utility.notify(s.name+" Shared his/her screen",""),this.screenShareStat.emit(this.param.id+"___"+this.param.id===i.uuid?{type:"Self",Name:this.param.name}:{type:"Other",Name:s.name})},1e3),this.stopScreenShareButtonStat=!1)})}ngAfterViewInit(){this.route.queryParams.subscribe(t=>{var e,i;this.link=(null===(i=null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.href)||void 0===i?void 0:i.split("#")[0])+"#/student/login?roomid="+(null==t?void 0:t.roomid)+"&room="+(null==t?void 0:t.room),this.param=t,this.ss.generateSocket(),this.dynamicLink?(this.subSession=new StateSubscription(`wss://www.monetlive.com/${this.dynamicLink}/rtc/`,this.param.id,parseInt(this.param.room,10),this.ss.socket),this.subSession.start(),this.managePublisher()):console.error("Dynamic Link not found"),this.ss.socket.onAny((t,e)=>{this.socketEventListeners(t,e)})}),this.subSession.on("remote",({type:t,stream:e,slot:i,mid:n,sub:o,user:s})=>{console.log("State Subscription (remote) : ",s),this.getSubscribedUsers(t,e,o,i,n,s)}),this.studentEmit.emit(this.studentsList)}trackByUsers(t,e){if(null==e?void 0:e.std_id)return e.std_id}ngOnInit(){this.sl.load("janus").then(()=>this.sl.load("user").then(()=>{})),this.startTimer(),this.bhvSub.fullScreen$.subscribe(t=>{this.fullScreen=t}),this.bhvSub.screenShare$.subscribe(t=>{""!==t&&(this.opacity=t)}),this.bhvSub.faceData$.subscribe(t=>{console.log("FaceDataFromBehaviourSubject-teacher side",t),this.faceDataState=t}),mediaDev.on("media",t=>{const e=document.getElementById("webcamvideo");e&&(e.srcObject=t)}),mediaDev.on("media-error",t=>{console.log("media-error :",t),this.router.navigate(["/auth"])}),this.bhvSub.dynamicLink$.subscribe(t=>{console.log("Moderator - dynamic link :",t),this.dynamicLink=t})}publisherStreamHandler(t){return Object(S.b)(this,void 0,void 0,function*(){let t;this.cdref.detectChanges(),t=yield document.getElementById("webcamvideo"),console.log("Publisher Video Element : ",t),[t.width,t.height,t.muted,t.autoplay,t.srcObject]=[300,300,!1,!0,this.moderatorStream]})}getUsers(t){this.as.getApi("user_list?id="+t).subscribe(t=>{if(t){if(t.response=t.response.filter(t=>(t.screen&&t.active&&([this.screen,this.screenshare,this.screenShareId]=[1,!0,t.std_id]),!t.screen&&t.active)),t.response.length>1){const e=t.response.findIndex(t=>t.std_id===this.param.id);t.response.unshift(t.response.splice(e,1)[0]);const i=t.response.findIndex(t=>"proctor"===t.proctor);t.response.unshift(t.response.splice(i,1)[0])}if(this.selectUser){const e=this.selectUser.std_id;if(t.response.length>1){const i=t.response.findIndex(t=>t.std_id===e);t.response.unshift(t.response.splice(i,1)[0])}}this.studentsList=t.response,this.studentEmit.emit(this.studentsList)}})}scrollList(t){const e=document.getElementById("list");e.scrollTop="top"===t?e.scrollTop-200:e.scrollTop+200}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(o.a),c.Rb(l.a),c.Rb(u.a),c.Rb(h.a),c.Rb(a.a),c.Rb(l.b),c.Rb(g.b),c.Rb(r.e),c.Rb(s.b),c.Rb(d.b),c.Rb(m.a),c.Rb(c.h))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-student-video"]],viewQuery:function(t,e){if(1&t&&(c.Uc(j,1),c.Uc(F,1),c.Uc(I,1),c.Uc(A,1),c.Uc(X,1)),2&t){let t;c.Cc(t=c.gc())&&(e.studentContainer=t.first),c.Cc(t=c.gc())&&(e.screenShareStreem=t.first),c.Cc(t=c.gc())&&(e.audioNotification=t.first),c.Cc(t=c.gc())&&(e.audioview=t.first),c.Cc(t=c.gc())&&(e.scShareAudio=t.first)}},inputs:{configMediaSettings:"configMediaSettings",actionObj:"actionObj",moderatorObj:"moderatorObj",action:"action",module:"module",selectUser:"selectUser",configurations:"configurations",room:"room",Duration:"Duration",stream:"stream"},outputs:{screenShareStat:"screenShareStat",resetConfigOptions:"resetConfigOptions",screenShareMediaEmit:"screenShareMediaEmit",moderatorMediaEmit:"moderatorMediaEmit",studentEmit:"studentEmit",sideNavSize:"sideNavSize",stopScreenShare:"stopScreenShare",toggleSideNav:"toggleSideNav"},features:[c.Eb([o.a]),c.Db],decls:2,vars:6,consts:[[3,"room","duration","action","role","toggleMenu","refreshSession"],["fxLayout","row","style","min-height: calc(93vh); position: relative",3,"fxLayoutAlign","ngStyle",4,"ngIf"],["fxLayout","row",2,"min-height","calc(93vh)","position","relative",3,"fxLayoutAlign","ngStyle"],["id","webcamaudio","preload","none","autoplay","",3,"hidden"],["audioview",""],["f-white","","pointer","","style","position: absolute; right: 0px ; bottom: 50vh; background: red; z-index: 999;",3,"matTooltip","click",4,"ngIf"],["fxFlex","","class","screenshare-box",3,"fxFlexAlign","fxLayout","fxLayoutAlign","ngStyle",4,"ngIf"],["id","usersList","fxLayout","row","fxFlexAlign","start",3,"fxFlex"],["fxLayout","column","fxFlex","90","style","height: 80vh",3,"fxFlexOrder","ngStyle",4,"ngIf"],["f-white","","pointer","",2,"position","absolute","right","0px","bottom","50vh","background","red","z-index","999",3,"matTooltip","click"],["fxFlex","",1,"screenshare-box",3,"fxFlexAlign","fxLayout","fxLayoutAlign","ngStyle"],["id","screenShareStreem","height","100%","width","auto","autoplay","",1,"videocol",3,"fxHide"],["screenShareStreem",""],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","space-around center",2,"border","1px solid black","height","250px","width","350px","border-radius","4px"],["mat-icon-button","",2,"background","#5829A6"],["id","exit_to_app","f-white",""],["xlarge",""],["mat-raised-button","","color","primary",2,"background","#5829A6","border-radius","40px",3,"disabled","click"],[3,"ngModel","ngModelChange","click"],["fxLayout","column","fxFlex","90",2,"height","80vh",3,"fxFlexOrder","ngStyle"],["mat-icon-button","","style","margin: 1% auto;",4,"ngIf"],["id","list","fxLayoutAlign","center start","fxLayoutGap","20px",1,"student-list",3,"fxFlex","fxLayout"],["studentContainer",""],["rowHeight","3:2","full-width","","gutterSize","5px",3,"cols"],["relative","",3,"ngClass","colspan","rowspan",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["mat-icon-button","",2,"margin","1% auto"],["id","arrow_up","f-white","",3,"click"],["relative","",3,"ngClass","colspan","rowspan"],["fxFill","","class","no-camera","fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","5px",4,"ngIf"],["fxLayout","column",1,"videodiv"],["id","webcamvideo","height","100%","width","100%","autoplay","",1,"videocol"],["fxFill","","fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","5px",1,"no-camera"],[1,"avatar",3,"ngStyle"],["f-white",""],["title-white14-400",""],["fxLayout","row","fxLayoutAlign","center center",3,"ngClass"],["f-white","","large","",2,"vertical-align","middle"],[2,"height","100%","width","90%",3,"module","selectUser","std","mediaStreamObj","actionEmitter"],["id","arrow_down","f-white","",3,"click"]],template:function(t,e){1&t&&(c.Xb(0,"app-top-bar",0),c.fc("toggleMenu",function(t){return e.Menu(t)})("refreshSession",function(){return e.tryAgain()}),c.Wb(),c.Nc(1,it,7,10,"div",1)),2&t&&(c.qc("room",e.room)("duration",e.duration)("action",c.tc(5,nt))("role","moderator"),c.Fb(1),c.qc("ngIf",e.faceDataState))},directives:[k.a,r.n,f.f,f.e,r.o,v.c,f.a,f.b,p.a,O.a,v.b,C.a,M.a,n.s,n.v,f.d,f.g,P.a,r.m,P.c,r.l,v.a,f.h,L.a],styles:[".student-list[_ngcontent-%COMP%]{height:calc(100vh - 80px);overflow-y:auto;padding:10px}.student-list[_ngcontent-%COMP%]   .student-preview[_ngcontent-%COMP%]{box-sizing:border-box;background:hsla(0,0%,100%,.1)}.bubble[_ngcontent-%COMP%]{color:#fff;border-radius:50%;height:30px;width:30px;display:flex;align-items:center;justify-content:center}.Low[_ngcontent-%COMP%]{background-color:#ff275a}.Medium[_ngcontent-%COMP%]{background-color:#ff8b4c}.High[_ngcontent-%COMP%]{background-color:#3ab147}.screenshare-box[_ngcontent-%COMP%]{background-color:#fff;padding:5px;border-radius:4px;height:450px;width:400px}.panel[_ngcontent-%COMP%]{margin:16px;height:auto}.panel[_ngcontent-%COMP%], .panel[_ngcontent-%COMP%]   .panel-head[_ngcontent-%COMP%]{border-radius:10px 10px 0 0}.panel[_ngcontent-%COMP%]   .panel-head[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.1);padding:10px}.panel[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{height:100%!important;width:100%!important}.redDot[_ngcontent-%COMP%]{color:red}.greenDot[_ngcontent-%COMP%]{color:green}mat-grid-tile[_ngcontent-%COMP%]{border:1px solid rgba(86,216,225,.16862745098039217);background:rgba(0,0,0,.4)}mat-grid-list[_ngcontent-%COMP%]{width:100%}.screen-div[_ngcontent-%COMP%]{max-width:70%;height:calc(100vh - 134px);position:relative;margin-right:10px}.screen-div[_ngcontent-%COMP%]   .title-name[_ngcontent-%COMP%]{padding:8px;border-top-right-radius:5px;border-top-left-radius:5px;font-size:16px;text-align:center;position:absolute;bottom:0;background:rgba(0,0,0,.43137254901960786);color:#fff}.single-grid[_ngcontent-%COMP%]{display:block;width:70%;margin:auto}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto;grid-gap:10px;padding:10px}.grid-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center;padding:5px;font-size:30px;grid-row-start:1;grid-row-end:1;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.item1[_ngcontent-%COMP%]{grid-row-start:1!important;grid-row-end:3!important;grid-column-start:1;grid-column-end:3}.engagement[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:12px;font-weight:400;border-radius:50%;height:14px;width:14px;position:absolute;line-height:24px;z-index:10;top:5px;right:5px}.full-screen-div[_ngcontent-%COMP%]{width:70%;margin:0 auto}.single-view[_ngcontent-%COMP%]   .videodiv[_ngcontent-%COMP%]{height:100%;width:99%}mat-grid-tile[_ngcontent-%COMP%]   .video-title[_ngcontent-%COMP%]{position:absolute;top:5px;padding:5px;background-color:rgba(66,63,63,.58);color:#fff}mat-card[_ngcontent-%COMP%]{background-color:#fff!important}#webcamvideo[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}.avatar[_ngcontent-%COMP%]{height:60px;width:60px;border-radius:50%;display:flex;text-align:center;align-items:center;justify-content:center;z-index:5}#arrow_down[_ngcontent-%COMP%]{margin:auto;transform:rotate(90deg);-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg)}#arrow_up[_ngcontent-%COMP%], #exit_to_app[_ngcontent-%COMP%]{margin:auto;transform:rotate(270deg);-webkit-transform:rotate(270deg);-moz-transform:rotate(270deg)}[_nghost-%COMP%]{border-radius:30px}#list[_ngcontent-%COMP%]{scroll-behavior:smooth;min-width:inherit!important}.example-margin[_ngcontent-%COMP%]{margin:0 10px}"]}),t})();var st=i("c8Cp"),at=i("iQ2w"),rt=i("TU8p"),ct=i("Xa2L");function lt(t,e){1&t&&(c.Xb(0,"div",24),c.Sb(1,"mat-spinner",25),c.Wb()),2&t&&(c.Fb(1),c.qc("diameter",30))}function dt(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"button",26),c.fc("click",function(){c.Fc(t);const i=e.$implicit,n=c.jc();return i.status=!i.status,n.mainActions(i)}),c.Xb(2,"mat-icon",27),c.Pc(3),c.Wb(),c.Wb(),c.Ub()}if(2&t){const t=e.$implicit;c.Fb(1),c.qc("matTooltip",t.status?t.name:t.nameop||""),c.Fb(1),c.qc("id",t.icon)("inline",!0),c.Fb(1),c.Qc(t.status?t.icon:t.iconop)}}const ut=function(){return["/profile/dashboard/personal"]},ht=function(){return{position:"absolute",top:"30px",right:"2px"}},mt=function(){return{marginRight:"3%"}},gt=function(){return{position:"absolute",bottom:"30px"}};let bt=(()=>{class t{constructor(t,e,i,n,o,s,a){this.route=t,this.ss=e,this.router=i,this.dialog=n,this.sl=o,this.as=s,this.utility=a,this.startSession=new c.o,this.recordingEnabled=!1,this.recordMeeting=!1,this.startMeet=!0,this.action=!0,this.permission={audio:!0,video:!0,screen:!1},this.video={loadstart:!0,buffering:!1,canplay:!1},this.actions=[{name:"Mute",nameop:"Unmute",value:"audio",icon:"mic",status:!0,iconop:"mic_off"},{name:"Stop Camera",value:"video",icon:"videocam",nameop:"Share Camera",status:!0,iconop:"videocam_off"}]}mainActions(t){switch(t.value){case"video":this.permission.video=t.status,mediaDev.toggleVideo(t.status),this.ss.socket.emit("preview-toggle-video",{status:t.status});break;case"audio":this.permission.audio=t.status,mediaDev.toggleAudio(t.status),this.ss.socket.emit("preview-toggle-audio",{status:t.status})}}ngOnInit(){var t;this.ss.generateSocket(),this.sl.load("janus").then(t=>{this.sl.load("user").then(e=>{t[0].loaded&&e[0].loaded&&(mediaDev.on("media",t=>Object(S.b)(this,void 0,void 0,function*(){this.vidElement=document.getElementById("video"),this.vidElement&&([this.vidElement.srcObject,this.vidElement.muted]=[t,!0]),this.availableMediaDevices=yield mediaDev.availableDevices})),mediaDev.on("media-error",t=>{this.router.navigate(["/auth"])}),mediaDev.start())})}),this.recordingEnabled=null===(t=JSON.parse(localStorage.getItem("userPlanDetails")||"[]"))||void 0===t?void 0:t.recording}ngAfterViewInit(){this.route.queryParams.subscribe(t=>{t&&(this.params=t)}),this.OS=this.getOS()}getOS(){const t=window.navigator.platform;let e=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)?e="Mac":-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)&&(e="Windows"),e}start(){setTimeout(()=>{this.recordMeeting&&this.recordCall(),this.startSession.emit(this.permission)},1e3)}loadedMetaData(t){this.startMeet=!1}onLoadStart(t){t&&(this.video.loadstart=!1)}configMediaoptions(){this.availableMediaDevices&&(this.dialogOpener=this.dialog.open(_.a,{data:{devicesList:this.availableMediaDevices},panelClass:"configDevice-dialog-container",hasBackdrop:!0,width:"23%",height:"auto",backdropClass:"backdropBackground"}).afterClosed().subscribe(t=>{this.dialogOpener=null,t.result&&mediaDev.deltaMedia(t.result.label,t.result.id)}))}recordCall(){this.ss.socket.emit("create-mosaic",{roomid:this.params.roomid,uuid:this.params.id})}stopStream(){mediaDev.stop()}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(l.a),c.Rb(u.a),c.Rb(l.b),c.Rb(s.b),c.Rb(a.a),c.Rb(o.a),c.Rb(m.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-preview"]],outputs:{startSession:"startSession"},decls:37,vars:13,consts:[["fxLayoutAlign"," center","fxFill",""],["src","assets/images/previewBackground.jpg","id","previewBackground","height","100%","width","100%"],["id","content","fxLayout","row"],["fxFlex","20"],[2,"margin-left","24px","margin-top","16px"],["src","assets/MonetLiveWhite.png","height","50px","pointer","",1,"logo",3,"routerLink","click"],["fxFlex","60","fxLayoutAlign","center center"],[1,"preview-container-card"],[1,"video-container",2,"text-align","center"],[2,"height","300px","width","400px","margin","auto","position","relative"],["class","spinner","fxLayout","row","fxLayoutAlign","center center","style","min-height: 100%; height: 100%; position: absolute; width: 100%",4,"ngIf"],["id","video","autoplay","","muted","","height","300px","width","400px",2,"border-radius","10px",3,"loadedmetadata","loadstart"],["fxLayout","column","fxLayoutAlign","space-between","fxFill","",2,"width","auto","height","100%","border-radius","10px","position","absolute","margin","16px","top","0","left","0","z-index","10"],["fxLayout","row","fxLayoutAlign","end center","fxFlex","20",1,"settings-container",3,"ngStyle"],["mat-mini-fab","","color","primary",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item",""],["mat-menu-item","",3,"disabled","click"],["fxLayout","row","fxLayoutGap","16px","fxLayoutAlign","center center","fxFlex","20",1,"audio-video-button-container",3,"ngStyle"],[4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","center center",1,"meeting-link-container"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"record-meeting-container"],[3,"disabled","click"],["fxLayout","row","fxLayoutAlign","center center",1,"spinner",2,"min-height","100%","height","100%","position","absolute","width","100%"],[3,"diameter"],["mat-icon-button","","mat-mini-fab","","color","primary",3,"matTooltip","click"],[2,"font-size","20px",3,"id","inline"]],template:function(t,e){if(1&t&&(c.Xb(0,"div",0),c.Sb(1,"img",1),c.Wb(),c.Xb(2,"div",2),c.Xb(3,"div",3),c.Xb(4,"div",4),c.Xb(5,"img",5),c.fc("click",function(){return e.stopStream()}),c.Wb(),c.Wb(),c.Wb(),c.Xb(6,"div",6),c.Xb(7,"div",7),c.Xb(8,"div",8),c.Xb(9,"div",9),c.Nc(10,lt,2,1,"div",10),c.Xb(11,"video",11),c.fc("loadedmetadata",function(t){return e.loadedMetaData(t)})("loadstart",function(t){return e.onLoadStart(t)}),c.Wb(),c.Xb(12,"div",12),c.Xb(13,"div",13),c.Xb(14,"button",14),c.Xb(15,"mat-icon"),c.Pc(16,"more_vert"),c.Wb(),c.Wb(),c.Xb(17,"mat-menu",null,15),c.Xb(19,"button",16),c.Xb(20,"mat-icon"),c.Pc(21,"feedback"),c.Wb(),c.Xb(22,"span"),c.Pc(23,"Feedback"),c.Wb(),c.Wb(),c.Xb(24,"button",17),c.fc("click",function(){return e.configMediaoptions()}),c.Xb(25,"mat-icon"),c.Pc(26,"settings"),c.Wb(),c.Xb(27,"span"),c.Pc(28,"Settings"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(29,"div",18),c.Nc(30,dt,4,4,"ng-container",19),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(31,"div",20),c.Xb(32,"button",21),c.fc("click",function(){return e.start()}),c.Pc(33,"Start Meeting"),c.Wb(),c.Wb(),c.Xb(34,"div",22),c.Xb(35,"mat-checkbox",23),c.fc("click",function(){return e.recordMeeting=!e.recordMeeting}),c.Pc(36,"Record this call"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t){const t=c.Dc(18);c.Fb(5),c.qc("routerLink",c.tc(9,ut)),c.Fb(5),c.qc("ngIf",(null==e.video?null:e.video.loadstart)||(null==e.video?null:e.video.buffering)),c.Fb(3),c.qc("ngStyle","Mac"===e.OS?c.tc(10,ht):c.tc(11,mt)),c.Fb(1),c.qc("matMenuTriggerFor",t),c.Fb(10),c.qc("disabled",!e.availableMediaDevices),c.Fb(5),c.qc("ngStyle","Mac"===e.OS?c.tc(12,gt):null),c.Fb(1),c.qc("ngForOf",e.actions),c.Fb(2),c.qc("disabled",e.startMeet),c.Fb(3),c.qc("disabled",!e.recordingEnabled)}},directives:[f.e,f.h,f.f,f.b,l.c,r.n,r.o,v.c,C.a,b.d,p.a,b.a,b.b,f.g,r.m,M.a,ct.c,O.a],styles:[".preview-container-card[_ngcontent-%COMP%]{height:80%;width:60%;background-color:#fff;border-radius:10px}.video-container[_ngcontent-%COMP%]{height:60%;margin:16px}.meeting-link-container[_ngcontent-%COMP%]{height:20%;margin-left:16px;margin-right:16px;margin-bottom:16px}.custom-button[_ngcontent-%COMP%]{margin-top:16px;background-color:#1c5ba2;color:#fff;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border-style:none;border-radius:30px;padding:12px 24px}.record-meeting-container[_ngcontent-%COMP%]{height:-webkit-max-content;height:-moz-max-content;height:max-content;margin-left:24px;margin-right:16px;margin-bottom:16px}.audio-video-button-container[_ngcontent-%COMP%]{width:100%}.mat-raised-button[_ngcontent-%COMP%]{margin-top:12px;border-radius:35px}#previewBackground[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:calc(100vw);height:calc(100vh);min-width:calc(100vw);min-height:calc(100vh)}#content[_ngcontent-%COMP%]{height:100vh;width:100vw;position:absolute;top:0;left:0}#video[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}.mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .spinner[_ngcontent-%COMP%]     .mat-progress-spinner circle{stroke:#3f51b5!important}"]}),t})();var pt=i("f0Cb"),ft=i("kmnG"),vt=i("qFsG"),St=i("n1FK"),xt=i("iadO");const yt=["video"],_t=function(t){return{opacity:t}};function wt(t,e){if(1&t&&c.Sb(0,"video",17),2&t){const t=c.jc(2);c.qc("ngStyle",c.uc(1,_t,!0===t.fullScreen?0:1))}}function kt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"app-chat",22),c.fc("badgeCount",function(e){return c.Fc(t),c.jc(3).msgCount=e})("messagePanelOpen",function(e){return c.Fc(t),c.jc(3).messagePanel=e})("messagePanelClose",function(e){c.Fc(t);const i=c.jc(3);return i.messagePanel=e,i.receivedMessageEvent(e)}),c.Wb()}if(2&t){const t=c.jc(3);c.qc("param",t.param)("messagePanel",t.messagePanel)("role","teacher")("students",t.students)}}const Ot=function(){return{background:"#252030"}},Ct=function(){return{background:"rgba(0,0,0,0.4)"}},Mt=function(){return["side-nav"]},Pt=function(){return["message-panel"]};function Lt(t,e){if(1&t&&(c.Xb(0,"div",18),c.Sb(1,"app-call-sidenav",19),c.Xb(2,"div",20),c.Nc(3,kt,1,4,"app-chat",21),c.Wb(),c.Wb()),2&t){const t=c.jc(2);c.Fb(1),c.qc("ngStyle",!0===t.fullScreen?c.tc(8,Ot):c.tc(9,Ct))("moduleName","proctor")("ngClass",c.tc(10,Mt))("students",t.students)("score",t.scoreVal),c.Fb(1),c.qc("ngClass",c.tc(11,Pt))("hidden",!t.messagePanel),c.Fb(1),c.qc("ngIf",t.param)}}function jt(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"button",34),c.fc("click",function(){c.Fc(t);const i=e.$implicit,n=c.jc(3);return i.status=!i.status,n.mainActions(i)}),c.Xb(2,"mat-icon",35),c.Pc(3),c.Wb(),c.Wb(),c.Ub()}if(2&t){const t=e.$implicit,i=c.jc(3);c.Fb(1),c.qc("ngClass","leave"===t.value?"leave_button":"other_buttons")("matTooltip",t.status?t.name:t.nameop||"")("disabled",!1===i.btnDisabled(t)),c.Fb(1),c.Kc("color",!1===i.btnDisabled(t)?"grey":""),c.rc("matBadge","Chat"===t.name?i.msgCount:""),c.qc("matTooltip","screen"===t.value&&t.status?t.nameop:"")("matBadgeHidden",i.msgCount<=0||i.messagePanel)("inline",!0),c.Fb(1),c.Rc(" ",t.status?t.icon:t.iconop," ")}}function Ft(t,e){if(1&t&&(c.Xb(0,"button",36),c.Xb(1,"mat-icon",30),c.Pc(2,"publish"),c.Wb(),c.Wb()),2&t){c.jc();const t=c.Dc(14);c.qc("matMenuTriggerFor",t)}}function It(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"button",37),c.fc("click",function(e){return c.Fc(t),c.jc(3).publishAssignment(e)}),c.Xb(2,"mat-icon",38),c.Pc(3,"assignment"),c.Wb(),c.Xb(4,"span",38),c.Pc(5),c.Wb(),c.Wb(),c.Ub()}if(2&t){const t=e.$implicit;c.Fb(1),c.rc("id",t.fileId),c.Fb(4),c.Qc(t.title)}}function At(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"div",23),c.Xb(2,"span",24),c.Pc(3),c.Wb(),c.Xb(4,"button",25),c.fc("click",function(){c.Fc(t);const e=c.jc(2);return e.unfoldAction=!e.unfoldAction,e.SidePanel()}),c.Xb(5,"mat-icon",26),c.Pc(6),c.Wb(),c.Wb(),c.Wb(),c.Xb(7,"div",27),c.Nc(8,jt,4,10,"ng-container",28),c.Xb(9,"button",29),c.Xb(10,"mat-icon",30),c.Pc(11,"settings"),c.Wb(),c.Wb(),c.Nc(12,Ft,3,1,"button",31),c.Xb(13,"mat-menu",32,33),c.Nc(15,It,6,2,"ng-container",28),c.Wb(),c.Wb(),c.Ub()}if(2&t){const t=c.jc(2),e=c.Dc(2);c.Fb(1),c.qc("matTooltip","Call duration"),c.Fb(2),c.Qc(null==t.duration?null:t.duration.time),c.Fb(1),c.qc("matTooltip",t.unfoldAction?"Expand":"Collapse")("disabled",!t.fullScreen),c.Fb(1),c.qc("inline",!0),c.Fb(1),c.Qc(t.unfoldAction?"unfold_less":"unfold_more"),c.Fb(2),c.qc("ngForOf",t.actions),c.Fb(1),c.qc("matMenuTriggerFor",e),c.Fb(3),c.qc("ngIf",t.assigmentList.length>0),c.Fb(3),c.qc("ngForOf",t.assigmentList)}}const Xt=function(){return{left:"18vw",width:"82vw"}},Wt=function(){return{left:"0vw",width:"100vw"}},qt=function(){return["invite","link"]};function Rt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",8),c.Xb(1,"div",9),c.Xb(2,"video",10),c.fc("loadstart",function(e){return c.Fc(t),c.jc().onLoadStart(e)}),c.Wb(),c.Nc(3,wt,1,3,"video",11),c.Wb(),c.Xb(4,"div",12),c.Nc(5,Lt,4,12,"div",13),c.Xb(6,"div",14),c.Xb(7,"app-student-video",15),c.fc("moderatorMediaEmit",function(e){return c.Fc(t),c.jc().getModeratorStream(e)})("screenShareMediaEmit",function(e){return c.Fc(t),c.jc().getScreenShare(e)})("screenShareStat",function(e){return c.Fc(t),c.jc().getStat(e)})("studentEmit",function(e){return c.Fc(t),c.jc().students=e})("resetConfigOptions",function(e){return c.Fc(t),c.jc().configMediaSettings=e})("stopScreenShare",function(){c.Fc(t);const e=c.jc();return e.shareScreen(e.param)}),c.Wb(),c.Wb(),c.Wb(),c.Nc(8,At,16,10,"ng-container",16),c.Wb()}if(2&t){const t=c.jc();c.Fb(2),c.qc("ngClass",!0===t.dispSideNav?"videocol":"screenShare")("ngStyle",c.uc(14,_t,!0===t.fullScreen?0:1)),c.Fb(1),c.qc("ngIf",t.checkSS),c.Fb(2),c.qc("ngIf",t.dispSideNav),c.Fb(2),c.qc("ngStyle",!0===t.dispSideNav?c.tc(16,Xt):c.tc(17,Wt))("moderatorObj",t.moderatorObj)("configMediaSettings",t.configMediaSettings)("configurations",t.configurations)("module","proctor")("action",c.tc(18,qt))("actionObj",t.actionObj)("room",t.room)("Duration",t.duration),c.Fb(1),c.qc("ngIf",t.session)}}function Dt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",39),c.Xb(1,"app-preview",40),c.fc("startSession",function(e){return c.Fc(t),c.jc().startSession(e)}),c.Wb(),c.Wb()}}let Et=(()=>{class t{constructor(t,e,i,n,o,s,a,r,c,l,d,u){this.fb=t,this.route=e,this.api=i,this.dialog=n,this.sl=o,this.router=s,this.httpClient=a,this.datePipe=r,this.ss=c,this.bhvSub=l,this.utility=d,this._snackBar=u,this.unfoldAction=!1,this.checkSS=!1,this.moderatorObj={instance:"",stream:""},this.fullScreen=!1,this.dispSideNav=!0,this.date=new Date,this.loaded=!1,this.scoreVal=1,this.dispFilterBottom=!1,this.scores=[{name:"Session",value:0},{name:"10 Seconds",value:10},{name:"Actual",value:1}],this.muteAll={name:"Mute All",nameop:"Unmute All",value:"muteall",icon:"mic",status:!1,iconop:"mic_off"},this.students=[],this.stream={},this.session=!1,this.msgCount=0,this.flexValue="243px",this.video_spinner={loadstart:!0,buffering:!1,canplay:!1},this.duration={time:"00:00:00",duration:0},this.actionObj={name:"",value:!1},this.actions=[{name:"Mute",nameop:"Unmute",value:"audio",icon:"mic",status:!1,iconop:"mic_off"},{name:"Stop Camera",value:"video",icon:"videocam",nameop:"Share Camera",status:!1,iconop:"videocam_off"},{name:"Leave Room",value:"leave",status:!1,icon:"call_end",iconop:"call_end"},{name:"Stop Sharing",value:"screen",nameop:"Share Screen",icon:"stop_screen_share",status:!1,iconop:"screen_share"},{name:"Chat",value:"chat",icon:"speaker_notes_off",status:!1,iconop:"message"}],this.messagePanel=!1,this.assigmentList=[],this.btnDisabled=t=>{if("chat"===t.value)return JSON.parse(String(localStorage.getItem("chat")))},this.studentFilter=this.fb.group({duration:["1"]}),this.permission=this.fb.group({audio:[!0],video:[!0],screen:[!1]})}getRoom(t){this.api.getApi("getInviteRoom?roomid="+t).subscribe(t=>{t&&(this.room=t.response)})}muteAllParticipants(t){console.log(t),this.muteAll.status=!this.muteAll.status,[this.actionObj.name,this.actionObj.value]=["muteRoom",this.muteAll.status],this.actionObj=Object.assign({},this.actionObj),this.actions[0].status=!this.muteAll.status}uploadAssignment(t){for(let e=0;e<t.target.files.length;e++){const i=t.target.files[e],n=new FormData;n.append("files",i),this.api.postApi("createAssignment?roomId="+this.roomId,n).subscribe(t=>{t.error||this.assigmentList.push({fileName:i.name,title:t.assignment.title,fileId:t.assignment._id})})}this._snackBar.open("Assignment uploaded","Ok",{horizontalPosition:"end",verticalPosition:"bottom"}),console.log("Assignment list",this.assigmentList)}ngOnInit(){this.route.queryParams.subscribe(t=>{t&&(this.param=t,this.teacherID=t.id,this.roomId=t.roomid,this.getRoom(t.roomid),this.getUsers(t.roomid),this.link=window.location.href.split("#")[0]+"#/student/login?roomid="+this.param.roomid+"&room="+this.param.room,this.ss.generateSocket(),this.sl.load("janus").then(t=>{this.sl.load("user").then(e=>{t[0].loaded&&e[0].loaded&&(this.loaded=!0)})}))}),this.bhvSub.screenShare$.subscribe(t=>{""!==t&&(this.checkSS=t,this.actions[3].status=t,this.dispSideNav=t&&!this.fullScreen?!t:!t||!this.fullScreen||t)}),this.bhvSub.fullScreen$.subscribe(t=>{""!==t&&(this.fullScreen=t||!1)})}ngOnDestroy(){this.students&&(localStorage.setItem("students",JSON.stringify(this.students)),localStorage.setItem("callDetails",JSON.stringify(this.duration))),clearInterval(this.interval)}getUsers(t){this.api.getApi("user_list?id="+t)}mainActions(t){switch([this.actionObj.name,this.actionObj.value]=[t.value,t.status],t.value){case"screen":this.actionObj=Object.assign({},this.actionObj),this.bhvSub.obScreenShare(!0);break;case"video":case"audio":case"leave":this.actionObj=Object.assign({},this.actionObj);break;case"chat":this.check(t.status);break;case"settings":this.actionObj=Object.assign({},this.actionObj)}}toggleView(t){[this.actionObj.name,this.actionObj.value]=["toggle-view",t],this.actionObj=Object.assign({},this.actionObj)}shareScreen(t){console.log(t)}getStudents(t){this.students=t}startSession(t){if(this.configurations=t,this.actions.map(e=>{t.hasOwnProperty(e.value)&&(e.status=t[e.value])}),t.screen&&this.shareScreen(this.param),0===this.duration.duration){const t=JSON.parse(localStorage.getItem("userPlanDetails")||"[]").meetingDuration;this.interval=setInterval(()=>{this.duration.duration++,this.duration.time=this.datePipe.transform(1e3*this.duration.duration,"H:mm:ss","UTC")||"",this.duration.duration<60*t&&this.duration.duration===60*t-300?this.utility.notifyPermanent("Your Meeting is going to expire in 5 minutes.","Okay"):this.duration.duration===60*t&&(this.utility.notify("Call Ended. Duration limit reached !",""),this.actionObj=Object.assign("",{name:"endRoom",value:!0}))},1e3)}this.session=!0,setTimeout(()=>this.dispFilterBottom=!0)}check(t){this.messagePanel=t}receivedMessageEvent(t){this.actions[4].status=t}getModeratorStream(t){const e=document.getElementById("moderatorvideo");e&&(this.moderatorObj.stream=t,[e.width,e.height,e.muted,e.autoplay,e.srcObject]=[300,300,!0,!0,t])}getScreenShare(t){setTimeout(()=>{const e=document.getElementById("screenShareVideo");e&&([e.width,e.height,e.muted,e.autoplay,e.srcObject]=[300,300,!1,!0,t])},1e3)}onLoadStart(t){t&&(this.video_spinner.loadstart=!0)}SidePanel(){let t=0,e=this.unfoldAction?18:0,i=this.unfoldAction?18:0;const n=this.unfoldAction?82:100,o=document.getElementById("sideNav"),s=document.getElementById("video_streams");if(this.unfoldAction){const a=setInterval(()=>{o.style.width=e--+"vw",s.style.left=i--+"vw",s.style.width=n+t+++"vw",e<0&&clearInterval(a)},1)}else{const a=setInterval(()=>{o.style.width=e+++"vw",s.style.left=i+++"vw",s.style.width=n-t+++"vw",e>18&&clearInterval(a)},1)}}getStat(t){this.actions[3].nameop="object"==typeof t?"Self"===t.type?"You are sharing your screen":"Screen is being Shared by "+t.Name:t}publishAssignment(t){this.ss.socket.emit("publish-assignment",{id:t.target.id,roomId:this.roomId}),this.assigmentList=this.assigmentList.filter(e=>e.fileId!==t.target.id)}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(n.g),c.Rb(l.a),c.Rb(o.a),c.Rb(s.b),c.Rb(a.a),c.Rb(l.b),c.Rb(d.b),c.Rb(r.e),c.Rb(u.a),c.Rb(h.a),c.Rb(m.a),c.Rb(g.b))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-call"]],viewQuery:function(t,e){if(1&t&&c.Uc(yt,1),2&t){let t;c.Cc(t=c.gc())&&(e.video=t.first)}},features:[c.Eb([o.a,a.a,r.e])],decls:31,vars:6,consts:[["class","moderatorVid","full-height","",4,"ngIf"],[1,"popup-upload"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["type","file","multiple","","accept","application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",1,"file-upload",2,"display","none",3,"change"],["fileUpload",""],["fxLayout","row","full-height","",4,"ngIf"],["full-height","",1,"moderatorVid"],["fxLayoutAlign"," center","fxFill",""],["id","moderatorvideo","height","100%","width","100%","autoplay","",3,"ngClass","ngStyle","loadstart"],["id","screenShareVideo","class","videocol","height","100%","width","100%","autoplay","",3,"ngStyle",4,"ngIf"],["fxLayout","row"],["fxLayout","column","fxFlex","10%",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center end"],["id","video_streams",3,"ngStyle","moderatorObj","configMediaSettings","configurations","module","action","actionObj","room","Duration","moderatorMediaEmit","screenShareMediaEmit","screenShareStat","studentEmit","resetConfigOptions","stopScreenShare"],[4,"ngIf"],["id","screenShareVideo","height","100%","width","100%","autoplay","",1,"videocol",3,"ngStyle"],["fxLayout","column","fxFlex","10%"],["id","sideNav","full-width","",2,"width","18vw","height","calc(100vh)",3,"ngStyle","moduleName","ngClass","students","score"],[3,"ngClass","hidden"],[3,"param","messagePanel","role","students","badgeCount","messagePanelOpen","messagePanelClose",4,"ngIf"],[3,"param","messagePanel","role","students","badgeCount","messagePanelOpen","messagePanelClose"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"float-timer",3,"matTooltip"],["title-white18-200",""],["mat-icon-button","","title-white18-200","","id","unfold",3,"matTooltip","disabled","click"],[2,"font-size","30px",3,"inline"],["fxLayout","row","fxLayoutGap","30px",1,"float-panel"],[4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Settings",3,"matMenuTriggerFor"],[1,"other_buttons"],["mat-icon-button","","matTooltip","Publish assignment","style","line-height: 60px;",3,"matMenuTriggerFor",4,"ngIf"],[2,"height","auto"],["pAssig","matMenu"],["mat-icon-button","",3,"ngClass","matTooltip","disabled","click"],["matBadgeColor","accent","matBadgeSize","small",3,"matTooltip","matBadgeHidden","inline","matBadge"],["mat-icon-button","","matTooltip","Publish assignment",2,"line-height","60px",3,"matMenuTriggerFor"],["mat-menu-item","",3,"id","click"],[2,"pointer-events","none"],["fxLayout","row","full-height",""],[3,"startSession"]],template:function(t,e){if(1&t){const t=c.Yb();c.Nc(0,Rt,9,19,"div",0),c.Xb(1,"mat-menu",1,2),c.Xb(3,"button",3),c.fc("click",function(){return e.toggleView(!0)}),c.Xb(4,"mat-icon"),c.Pc(5,"grid_on"),c.Wb(),c.Xb(6,"span"),c.Pc(7,"Grid View"),c.Wb(),c.Wb(),c.Xb(8,"button",3),c.fc("click",function(){return e.toggleView(!1)}),c.Xb(9,"mat-icon"),c.Pc(10,"fullscreen"),c.Wb(),c.Xb(11,"span"),c.Pc(12,"Fullscreen"),c.Wb(),c.Wb(),c.Xb(13,"button",4),c.fc("click",function(t){return e.muteAllParticipants(t)}),c.Xb(14,"mat-icon"),c.Pc(15),c.Wb(),c.Xb(16,"span"),c.Pc(17),c.Wb(),c.Wb(),c.Xb(18,"button",4),c.fc("click",function(){return e.configMediaSettings=!0}),c.Xb(19,"mat-icon"),c.Pc(20,"build"),c.Wb(),c.Xb(21,"span"),c.Pc(22,"Configure"),c.Wb(),c.Wb(),c.Xb(23,"button",4),c.fc("click",function(){return c.Fc(t),c.Dc(29).click()}),c.Xb(24,"mat-icon"),c.Pc(25,"cloud_upload"),c.Wb(),c.Xb(26,"span"),c.Pc(27,"Upload Assignment"),c.Wb(),c.Wb(),c.Xb(28,"input",5,6),c.fc("change",function(t){return e.uploadAssignment(t)}),c.Wb(),c.Wb(),c.Nc(30,Dt,2,0,"div",7)}2&t&&(c.qc("ngIf",e.session),c.Fb(3),c.qc("disabled",e.checkSS||e.actions[3].status),c.Fb(5),c.qc("disabled",e.checkSS||e.actions[3].status),c.Fb(7),c.Qc(e.muteAll.status?e.muteAll.iconop:e.muteAll.icon),c.Fb(2),c.Qc(e.muteAll.status?e.muteAll.nameop:e.muteAll.name),c.Fb(13),c.qc("ngIf",!e.session))},directives:[r.n,b.a,b.b,p.a,f.e,f.h,r.l,v.a,r.o,v.c,f.f,ot,f.b,st.a,at.a,f.g,O.a,C.a,r.m,b.d,rt.a,bt],styles:[".filter-bottom[_ngcontent-%COMP%]{position:absolute;bottom:7px}.filter-bottom-screenshare[_ngcontent-%COMP%]{position:absolute;bottom:4px;left:0;width:115px}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#1c5ba2;color:#fff}.message[_ngcontent-%COMP%]{background-color:#eee;color:#777;padding:10px;border-radius:3px;max-height:300px;overflow-y:auto}.message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1c5ba2;text-decoration:none}.intro[_ngcontent-%COMP%]{height:calc(100% - 72px)}.intro[_ngcontent-%COMP%]   .intro-box[_ngcontent-%COMP%]{padding:20px;width:500px;border-radius:5px;background-color:#eee}.intro[_ngcontent-%COMP%]   .intro-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#777}.intro[_ngcontent-%COMP%]   .intro-box[_ngcontent-%COMP%]   .start-message[_ngcontent-%COMP%]{width:100%;text-align:left;padding:10px;border-radius:3px;background-color:rgba(28,91,162,.09);color:#1c5ba2}  .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background-color:#1c5ba2}  .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:rgba(28,91,162,.35)}  .mat-icon-button{height:auto!important}.side-nav[_ngcontent-%COMP%]{height:calc(100vh - 43px);overflow-y:auto}.message-btn[_ngcontent-%COMP%]{position:absolute;right:20px;bottom:20px}.message-panel[_ngcontent-%COMP%]{position:fixed;right:10px;bottom:0;height:500px;width:300px;background:#fff;z-index:20}.moderatorVid[_ngcontent-%COMP%]{position:relative}#sideNav[_ngcontent-%COMP%]{left:0}#sideNav[_ngcontent-%COMP%], #video_streams[_ngcontent-%COMP%]{position:absolute;top:0}.leave_button[_ngcontent-%COMP%]{background:#e71c31;height:60px;width:60px;border-radius:50px;font-size:35px;line-height:55px}.other_buttons[_ngcontent-%COMP%]{height:50px;width:50px;font-size:40px;line-height:55px}.screenShare[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:250px;height:170px;margin-left:2%;display:none}.screenShare[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{background-color:#777}#moderatorvideo[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}#screenShareVideo[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:-1}#unfold[_ngcontent-%COMP%]{transform:rotate(270deg);-webkit-transform:rotate(270deg);-moz-transform:rotate(270deg)}.popup-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#775fee;height:-webkit-max-content!important;height:-moz-max-content!important;height:max-content!important}  .mat-menu-content:not(:empty){padding:16px!important;height:auto!important;overflow:hidden;padding:0!important}  .mat-menu-panel{height:auto!important}"]}),t})();var Nt=i("FpXt"),Ut=i("sOF7"),Tt=i("jaxi"),Bt=i("UXJo"),Vt=i("4GZO"),zt=i("1jcm"),Yt=i("ioy8"),Gt=i("folJ"),$t=i("rjSt"),Ht=i("tbnV"),Jt=i("nLfN"),Qt=i("vxfF"),Kt=i("FKr1");i("8LU1"),i("FtGj"),i("XNiG"),i("xgIS"),i("VRyK"),i("pLZG"),i("lJxs"),i("7o/Q"),i("1G5W"),i("/uUt"),i("IzEk"),i("JX91"),i("Kj3r"),i("R1ws"),i("u47x"),i("cH1L");let Zt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({imports:[[r.c,Kt.j,Jt.b,Qt.b],Qt.b,Kt.j]}),t})();const te=[{path:"",component:Et}];let ee=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({imports:[[Nt.a,l.d.forChild(te),r.c,ft.e,vt.c,C.b,pt.b,n.x,Vt.a,Ut.a,Yt.a,O.b,p.b,Tt.c,Bt.b,s.e,zt.b,xt.h,rt.b,Zt,St.c,St.e,St.d,Gt.a,$t.a,Ht.PreviewModule,ct.b,b.c]]}),t})()}}]);